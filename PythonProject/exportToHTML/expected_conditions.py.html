<html>
<head>
<title>expected_conditions.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #7a7e85;}
.s1 { color: #bcbec4;}
.s2 { color: #cf8e6d;}
.s3 { color: #bcbec4;}
.s4 { color: #6aab73;}
.s5 { color: #5f826b; font-style: italic;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
expected_conditions.py</font>
</center></td></tr></table>
<pre><span class="s0"># Licensed to the Software Freedom Conservancy (SFC) under one</span>
<span class="s0"># or more contributor license agreements.  See the NOTICE file</span>
<span class="s0"># distributed with this work for additional information</span>
<span class="s0"># regarding copyright ownership.  The SFC licenses this file</span>
<span class="s0"># to you under the Apache License, Version 2.0 (the</span>
<span class="s0"># &quot;License&quot;); you may not use this file except in compliance</span>
<span class="s0"># with the License.  You may obtain a copy of the License at</span>
<span class="s0">#</span>
<span class="s0">#   http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="s0">#</span>
<span class="s0"># Unless required by applicable law or agreed to in writing,</span>
<span class="s0"># software distributed under the License is distributed on an</span>
<span class="s0"># &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span>
<span class="s0"># KIND, either express or implied.  See the License for the</span>
<span class="s0"># specific language governing permissions and limitations</span>
<span class="s0"># under the License.</span>

<span class="s2">import </span><span class="s1">re</span>
<span class="s2">from </span><span class="s1">collections</span><span class="s3">.</span><span class="s1">abc </span><span class="s2">import </span><span class="s1">Iterable</span>
<span class="s2">from </span><span class="s1">typing </span><span class="s2">import </span><span class="s1">Any</span><span class="s3">, </span><span class="s1">Callable</span><span class="s3">, </span><span class="s1">Literal</span><span class="s3">, </span><span class="s1">TypeVar</span><span class="s3">, </span><span class="s1">Union</span>

<span class="s2">from </span><span class="s1">selenium</span><span class="s3">.</span><span class="s1">common</span><span class="s3">.</span><span class="s1">exceptions </span><span class="s2">import </span><span class="s3">(</span>
    <span class="s1">NoAlertPresentException</span><span class="s3">,</span>
    <span class="s1">NoSuchElementException</span><span class="s3">,</span>
    <span class="s1">NoSuchFrameException</span><span class="s3">,</span>
    <span class="s1">StaleElementReferenceException</span><span class="s3">,</span>
    <span class="s1">WebDriverException</span><span class="s3">,</span>
<span class="s3">)</span>
<span class="s2">from </span><span class="s1">selenium</span><span class="s3">.</span><span class="s1">webdriver</span><span class="s3">.</span><span class="s1">common</span><span class="s3">.</span><span class="s1">alert </span><span class="s2">import </span><span class="s1">Alert</span>
<span class="s2">from </span><span class="s1">selenium</span><span class="s3">.</span><span class="s1">webdriver</span><span class="s3">.</span><span class="s1">remote</span><span class="s3">.</span><span class="s1">webdriver </span><span class="s2">import </span><span class="s1">WebDriver</span><span class="s3">, </span><span class="s1">WebElement</span>

<span class="s4">&quot;&quot;&quot; 
 * Canned &quot;Expected Conditions&quot; which are generally useful within webdriver 
 * tests. 
&quot;&quot;&quot;</span>

<span class="s1">D </span><span class="s3">= </span><span class="s1">TypeVar</span><span class="s3">(</span><span class="s4">&quot;D&quot;</span><span class="s3">)</span>
<span class="s1">T </span><span class="s3">= </span><span class="s1">TypeVar</span><span class="s3">(</span><span class="s4">&quot;T&quot;</span><span class="s3">)</span>

<span class="s1">WebDriverOrWebElement </span><span class="s3">= </span><span class="s1">Union</span><span class="s3">[</span><span class="s1">WebDriver</span><span class="s3">, </span><span class="s1">WebElement</span><span class="s3">]</span>


<span class="s2">def </span><span class="s1">title_is</span><span class="s3">(</span><span class="s1">title</span><span class="s3">: </span><span class="s1">str</span><span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriver</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking the title of a page. 
 
    Parameters: 
    ----------- 
    title : str 
        The expected title, which must be an exact match. 
 
    Returns: 
    ------- 
    boolean : True if the title matches, False otherwise. 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriver</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">title </span><span class="s3">== </span><span class="s1">title</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">title_contains</span><span class="s3">(</span><span class="s1">title</span><span class="s3">: </span><span class="s1">str</span><span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriver</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking that the title contains a case-sensitive 
    substring. 
 
    Parameters: 
    ----------- 
    title : str 
        The fragment of title expected. 
 
    Returns: 
    ------- 
    boolean : True when the title matches, False otherwise. 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriver</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">title </span><span class="s2">in </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">title</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">presence_of_element_located</span><span class="s3">(</span><span class="s1">locator</span><span class="s3">: </span><span class="s1">tuple</span><span class="s3">[</span><span class="s1">str</span><span class="s3">, </span><span class="s1">str</span><span class="s3">]) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriverOrWebElement</span><span class="s3">], </span><span class="s1">WebElement</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking that an element is present on the DOM of a 
    page. This does not necessarily mean that the element is visible. 
 
    Parameters: 
    ----------- 
    locator : Tuple[str, str] 
        Used to find the element. 
 
    Returns: 
    ------- 
    WebElement : The WebElement once it is located. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; element = WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.NAME, &quot;q&quot;))) 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriverOrWebElement</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">find_element</span><span class="s3">(*</span><span class="s1">locator</span><span class="s3">)</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">url_contains</span><span class="s3">(</span><span class="s1">url</span><span class="s3">: </span><span class="s1">str</span><span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriver</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking that the current url contains a case- 
    sensitive substring. 
 
    Parameters: 
    ----------- 
    url : str 
        The fragment of url expected. 
 
    Returns: 
    ------- 
    boolean : True when the url matches, False otherwise. 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriver</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">url </span><span class="s2">in </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">current_url</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">url_matches</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">: </span><span class="s1">str</span><span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriver</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking the current url. 
 
    Parameters: 
    ----------- 
    pattern : str 
        The pattern to match with the current url. 
 
    Returns: 
    ------- 
    boolean : True when the pattern matches, False otherwise. 
 
    Notes: 
    ------ 
    More powerful than url_contains, as it allows for regular expressions. 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriver</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">re</span><span class="s3">.</span><span class="s1">search</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">, </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">current_url</span><span class="s3">) </span><span class="s2">is not None</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">url_to_be</span><span class="s3">(</span><span class="s1">url</span><span class="s3">: </span><span class="s1">str</span><span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriver</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking the current url. 
 
    Parameters: 
    ----------- 
    url : str 
        The expected url, which must be an exact match. 
 
    Returns: 
    ------- 
    boolean : True when the url matches, False otherwise. 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriver</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">url </span><span class="s3">== </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">current_url</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">url_changes</span><span class="s3">(</span><span class="s1">url</span><span class="s3">: </span><span class="s1">str</span><span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriver</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking the current url is different than a given 
    string. 
 
    Parameters: 
    ----------- 
    url : str 
        The expected url, which must not be an exact match. 
 
    Returns: 
    ------- 
    boolean : True when the url does not match, False otherwise 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriver</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">url </span><span class="s3">!= </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">current_url</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">visibility_of_element_located</span><span class="s3">(</span>
    <span class="s1">locator</span><span class="s3">: </span><span class="s1">tuple</span><span class="s3">[</span><span class="s1">str</span><span class="s3">, </span><span class="s1">str</span><span class="s3">],</span>
<span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriverOrWebElement</span><span class="s3">], </span><span class="s1">Union</span><span class="s3">[</span><span class="s1">Literal</span><span class="s3">[</span><span class="s2">False</span><span class="s3">], </span><span class="s1">WebElement</span><span class="s3">]]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking that an element is present on the DOM of a 
    page and visible. Visibility means that the element is not only displayed 
    but also has a height and width that is greater than 0. 
 
    Parameters: 
    ----------- 
    locator : Tuple[str, str] 
        Used to find the element. 
 
    Returns: 
    ------- 
    WebElement : The WebElement once it is located and visible. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; element = WebDriverWait(driver, 10).until(EC.visibility_of_element_located((By.NAME, &quot;q&quot;))) 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriverOrWebElement</span><span class="s3">):</span>
        <span class="s2">try</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">_element_if_visible</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">.</span><span class="s1">find_element</span><span class="s3">(*</span><span class="s1">locator</span><span class="s3">))</span>
        <span class="s2">except </span><span class="s1">StaleElementReferenceException</span><span class="s3">:</span>
            <span class="s2">return False</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">visibility_of</span><span class="s3">(</span><span class="s1">element</span><span class="s3">: </span><span class="s1">WebElement</span><span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">Any</span><span class="s3">], </span><span class="s1">Union</span><span class="s3">[</span><span class="s1">Literal</span><span class="s3">[</span><span class="s2">False</span><span class="s3">], </span><span class="s1">WebElement</span><span class="s3">]]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking that an element, known to be present on the 
    DOM of a page, is visible. 
 
    Parameters: 
    ----------- 
    element : WebElement 
        The WebElement to check. 
 
    Returns: 
    ------- 
    WebElement : The WebElement once it is visible. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; element = WebDriverWait(driver, 10).until(EC.visibility_of(driver.find_element(By.NAME, &quot;q&quot;))) 
 
    Notes: 
    ------ 
    Visibility means that the element is not only displayed but also has 
    a height and width that is greater than 0. element is the WebElement 
    returns the (same) WebElement once it is visible 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">_</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">_element_if_visible</span><span class="s3">(</span><span class="s1">element</span><span class="s3">)</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">_element_if_visible</span><span class="s3">(</span><span class="s1">element</span><span class="s3">: </span><span class="s1">WebElement</span><span class="s3">, </span><span class="s1">visibility</span><span class="s3">: </span><span class="s1">bool </span><span class="s3">= </span><span class="s2">True</span><span class="s3">) </span><span class="s1">-&gt; Union</span><span class="s3">[</span><span class="s1">Literal</span><span class="s3">[</span><span class="s2">False</span><span class="s3">], </span><span class="s1">WebElement</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking that an element, known to be present on the 
    DOM of a page, is of the expected visibility. 
 
    Parameters: 
    ----------- 
    element : WebElement 
        The WebElement to check. 
    visibility : bool 
        The expected visibility of the element. 
 
    Returns: 
    ------- 
    WebElement : The WebElement once it is visible or not visible. 
    &quot;&quot;&quot;</span>
    <span class="s2">return </span><span class="s1">element </span><span class="s2">if </span><span class="s1">element</span><span class="s3">.</span><span class="s1">is_displayed</span><span class="s3">() == </span><span class="s1">visibility </span><span class="s2">else False</span>


<span class="s2">def </span><span class="s1">presence_of_all_elements_located</span><span class="s3">(</span><span class="s1">locator</span><span class="s3">: </span><span class="s1">tuple</span><span class="s3">[</span><span class="s1">str</span><span class="s3">, </span><span class="s1">str</span><span class="s3">]) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriverOrWebElement</span><span class="s3">], </span><span class="s1">list</span><span class="s3">[</span><span class="s1">WebElement</span><span class="s3">]]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking that there is at least one element present 
    on a web page. 
 
    Parameters: 
    ----------- 
    locator : Tuple[str, str] 
        Used to find the element. 
 
    Returns: 
    ------- 
    List[WebElement] : The list of WebElements once they are located. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; elements = WebDriverWait(driver, 10).until(EC.presence_of_all_elements_located((By.CLASS_NAME, &quot;foo&quot;))) 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriverOrWebElement</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">find_elements</span><span class="s3">(*</span><span class="s1">locator</span><span class="s3">)</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">visibility_of_any_elements_located</span><span class="s3">(</span><span class="s1">locator</span><span class="s3">: </span><span class="s1">tuple</span><span class="s3">[</span><span class="s1">str</span><span class="s3">, </span><span class="s1">str</span><span class="s3">]) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriverOrWebElement</span><span class="s3">], </span><span class="s1">list</span><span class="s3">[</span><span class="s1">WebElement</span><span class="s3">]]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking that there is at least one element visible 
    on a web page. 
 
    Parameters: 
    ----------- 
    locator : Tuple[str, str] 
        Used to find the element. 
 
    Returns: 
    ------- 
    List[WebElement] : The list of WebElements once they are located and visible. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; elements = WebDriverWait(driver, 10).until(EC.visibility_of_any_elements_located((By.CLASS_NAME, &quot;foo&quot;))) 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriverOrWebElement</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s3">[</span><span class="s1">element </span><span class="s2">for </span><span class="s1">element </span><span class="s2">in </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">find_elements</span><span class="s3">(*</span><span class="s1">locator</span><span class="s3">) </span><span class="s2">if </span><span class="s1">_element_if_visible</span><span class="s3">(</span><span class="s1">element</span><span class="s3">)]</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">visibility_of_all_elements_located</span><span class="s3">(</span>
    <span class="s1">locator</span><span class="s3">: </span><span class="s1">tuple</span><span class="s3">[</span><span class="s1">str</span><span class="s3">, </span><span class="s1">str</span><span class="s3">],</span>
<span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriverOrWebElement</span><span class="s3">], </span><span class="s1">Union</span><span class="s3">[</span><span class="s1">list</span><span class="s3">[</span><span class="s1">WebElement</span><span class="s3">], </span><span class="s1">Literal</span><span class="s3">[</span><span class="s2">False</span><span class="s3">]]]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking that all elements are present on the DOM of 
    a page and visible. Visibility means that the elements are not only 
    displayed but also has a height and width that is greater than 0. 
 
    Parameters: 
    ----------- 
    locator : Tuple[str, str] 
        Used to find the elements. 
 
    Returns: 
    ------- 
    List[WebElement] : The list of WebElements once they are located and visible. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; elements = WebDriverWait(driver, 10).until(EC.visibility_of_all_elements_located((By.CLASS_NAME, &quot;foo&quot;))) 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriverOrWebElement</span><span class="s3">):</span>
        <span class="s2">try</span><span class="s3">:</span>
            <span class="s1">elements </span><span class="s3">= </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">find_elements</span><span class="s3">(*</span><span class="s1">locator</span><span class="s3">)</span>
            <span class="s2">for </span><span class="s1">element </span><span class="s2">in </span><span class="s1">elements</span><span class="s3">:</span>
                <span class="s2">if </span><span class="s1">_element_if_visible</span><span class="s3">(</span><span class="s1">element</span><span class="s3">, </span><span class="s1">visibility</span><span class="s3">=</span><span class="s2">False</span><span class="s3">):</span>
                    <span class="s2">return False</span>
            <span class="s2">return </span><span class="s1">elements</span>
        <span class="s2">except </span><span class="s1">StaleElementReferenceException</span><span class="s3">:</span>
            <span class="s2">return False</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">text_to_be_present_in_element</span><span class="s3">(</span><span class="s1">locator</span><span class="s3">: </span><span class="s1">tuple</span><span class="s3">[</span><span class="s1">str</span><span class="s3">, </span><span class="s1">str</span><span class="s3">], </span><span class="s1">text_</span><span class="s3">: </span><span class="s1">str</span><span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriverOrWebElement</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking if the given text is present in the 
    specified element. 
 
    Parameters: 
    ----------- 
    locator : Tuple[str, str] 
        Used to find the element. 
    text_ : str 
        The text to be present in the element. 
 
    Returns: 
    ------- 
    boolean : True when the text is present, False otherwise. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; is_text_in_element = WebDriverWait(driver, 10).until( 
            EC.text_to_be_present_in_element((By.CLASS_NAME, &quot;foo&quot;), &quot;bar&quot;) 
        ) 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriverOrWebElement</span><span class="s3">):</span>
        <span class="s2">try</span><span class="s3">:</span>
            <span class="s1">element_text </span><span class="s3">= </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">find_element</span><span class="s3">(*</span><span class="s1">locator</span><span class="s3">).</span><span class="s1">text</span>
            <span class="s2">return </span><span class="s1">text_ </span><span class="s2">in </span><span class="s1">element_text</span>
        <span class="s2">except </span><span class="s1">StaleElementReferenceException</span><span class="s3">:</span>
            <span class="s2">return False</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">text_to_be_present_in_element_value</span><span class="s3">(</span>
    <span class="s1">locator</span><span class="s3">: </span><span class="s1">tuple</span><span class="s3">[</span><span class="s1">str</span><span class="s3">, </span><span class="s1">str</span><span class="s3">], </span><span class="s1">text_</span><span class="s3">: </span><span class="s1">str</span>
<span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriverOrWebElement</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking if the given text is present in the 
    element's value. 
 
    Parameters: 
    ----------- 
    locator : Tuple[str, str] 
        Used to find the element. 
    text_ : str 
        The text to be present in the element's value. 
 
    Returns: 
    ------- 
    boolean : True when the text is present, False otherwise. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; is_text_in_element_value = WebDriverWait(driver, 10).until( 
    ...     EC.text_to_be_present_in_element_value((By.CLASS_NAME, &quot;foo&quot;), &quot;bar&quot;) 
    ... ) 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriverOrWebElement</span><span class="s3">):</span>
        <span class="s2">try</span><span class="s3">:</span>
            <span class="s1">element_text </span><span class="s3">= </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">find_element</span><span class="s3">(*</span><span class="s1">locator</span><span class="s3">).</span><span class="s1">get_attribute</span><span class="s3">(</span><span class="s4">&quot;value&quot;</span><span class="s3">)</span>
            <span class="s2">if </span><span class="s1">element_text </span><span class="s2">is None</span><span class="s3">:</span>
                <span class="s2">return False</span>
            <span class="s2">return </span><span class="s1">text_ </span><span class="s2">in </span><span class="s1">element_text</span>
        <span class="s2">except </span><span class="s1">StaleElementReferenceException</span><span class="s3">:</span>
            <span class="s2">return False</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">text_to_be_present_in_element_attribute</span><span class="s3">(</span>
    <span class="s1">locator</span><span class="s3">: </span><span class="s1">tuple</span><span class="s3">[</span><span class="s1">str</span><span class="s3">, </span><span class="s1">str</span><span class="s3">], </span><span class="s1">attribute_</span><span class="s3">: </span><span class="s1">str</span><span class="s3">, </span><span class="s1">text_</span><span class="s3">: </span><span class="s1">str</span>
<span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriverOrWebElement</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking if the given text is present in the 
    element's attribute. 
 
    Parameters: 
    ----------- 
    locator : Tuple[str, str] 
        Used to find the element. 
    attribute_ : str 
        The attribute to check the text in. 
    text_ : str 
        The text to be present in the element's attribute. 
 
    Returns: 
    ------- 
    boolean : True when the text is present, False otherwise. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; is_text_in_element_attribute = WebDriverWait(driver, 10).until( 
    ...     EC.text_to_be_present_in_element_attribute((By.CLASS_NAME, &quot;foo&quot;), &quot;bar&quot;, &quot;baz&quot;) 
    ... ) 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriverOrWebElement</span><span class="s3">):</span>
        <span class="s2">try</span><span class="s3">:</span>
            <span class="s1">element_text </span><span class="s3">= </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">find_element</span><span class="s3">(*</span><span class="s1">locator</span><span class="s3">).</span><span class="s1">get_attribute</span><span class="s3">(</span><span class="s1">attribute_</span><span class="s3">)</span>
            <span class="s2">if </span><span class="s1">element_text </span><span class="s2">is None</span><span class="s3">:</span>
                <span class="s2">return False</span>
            <span class="s2">return </span><span class="s1">text_ </span><span class="s2">in </span><span class="s1">element_text</span>
        <span class="s2">except </span><span class="s1">StaleElementReferenceException</span><span class="s3">:</span>
            <span class="s2">return False</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">frame_to_be_available_and_switch_to_it</span><span class="s3">(</span>
    <span class="s1">locator</span><span class="s3">: </span><span class="s1">Union</span><span class="s3">[</span><span class="s1">tuple</span><span class="s3">[</span><span class="s1">str</span><span class="s3">, </span><span class="s1">str</span><span class="s3">], </span><span class="s1">str</span><span class="s3">, </span><span class="s1">WebElement</span><span class="s3">],</span>
<span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriver</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking whether the given frame is available to 
    switch to. 
 
    Parameters: 
    ----------- 
    locator : Union[Tuple[str, str], str, WebElement] 
        Used to find the frame. 
 
    Returns: 
    ------- 
    boolean : True when the frame is available, False otherwise. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; WebDriverWait(driver, 10).until(EC.frame_to_be_available_and_switch_to_it(&quot;frame_name&quot;)) 
 
    Notes: 
    ------ 
    If the frame is available it switches the given driver to the 
    specified frame. 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriver</span><span class="s3">):</span>
        <span class="s2">try</span><span class="s3">:</span>
            <span class="s2">if </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">locator</span><span class="s3">, </span><span class="s1">Iterable</span><span class="s3">) </span><span class="s2">and not </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">locator</span><span class="s3">, </span><span class="s1">str</span><span class="s3">):</span>
                <span class="s1">driver</span><span class="s3">.</span><span class="s1">switch_to</span><span class="s3">.</span><span class="s1">frame</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">.</span><span class="s1">find_element</span><span class="s3">(*</span><span class="s1">locator</span><span class="s3">))</span>
            <span class="s2">else</span><span class="s3">:</span>
                <span class="s1">driver</span><span class="s3">.</span><span class="s1">switch_to</span><span class="s3">.</span><span class="s1">frame</span><span class="s3">(</span><span class="s1">locator</span><span class="s3">)</span>
            <span class="s2">return True</span>
        <span class="s2">except </span><span class="s1">NoSuchFrameException</span><span class="s3">:</span>
            <span class="s2">return False</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">invisibility_of_element_located</span><span class="s3">(</span>
    <span class="s1">locator</span><span class="s3">: </span><span class="s1">Union</span><span class="s3">[</span><span class="s1">WebElement</span><span class="s3">, </span><span class="s1">tuple</span><span class="s3">[</span><span class="s1">str</span><span class="s3">, </span><span class="s1">str</span><span class="s3">]],</span>
<span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriverOrWebElement</span><span class="s3">], </span><span class="s1">Union</span><span class="s3">[</span><span class="s1">WebElement</span><span class="s3">, </span><span class="s1">bool</span><span class="s3">]]:</span>
    <span class="s5">&quot;&quot;&quot;An Expectation for checking that an element is either invisible or not 
    present on the DOM. 
 
    Parameters: 
    ----------- 
    locator : Union[WebElement, Tuple[str, str]] 
        Used to find the element. 
 
    Returns: 
    ------- 
    boolean : True when the element is invisible or not present, False otherwise. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; is_invisible = WebDriverWait(driver, 10).until(EC.invisibility_of_element_located((By.CLASS_NAME, &quot;foo&quot;))) 
 
    Notes: 
    ------ 
    - In the case of NoSuchElement, returns true because the element is not 
    present in DOM. The try block checks if the element is present but is 
    invisible. 
    - In the case of StaleElementReference, returns true because stale element 
    reference implies that element is no longer visible. 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriverOrWebElement</span><span class="s3">):</span>
        <span class="s2">try</span><span class="s3">:</span>
            <span class="s1">target </span><span class="s3">= </span><span class="s1">locator</span>
            <span class="s2">if not </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">target</span><span class="s3">, </span><span class="s1">WebElement</span><span class="s3">):</span>
                <span class="s1">target </span><span class="s3">= </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">find_element</span><span class="s3">(*</span><span class="s1">target</span><span class="s3">)</span>
            <span class="s2">return </span><span class="s1">_element_if_visible</span><span class="s3">(</span><span class="s1">target</span><span class="s3">, </span><span class="s1">visibility</span><span class="s3">=</span><span class="s2">False</span><span class="s3">)</span>
        <span class="s2">except </span><span class="s3">(</span><span class="s1">NoSuchElementException</span><span class="s3">, </span><span class="s1">StaleElementReferenceException</span><span class="s3">):</span>
            <span class="s0"># In the case of NoSuchElement, returns true because the element is</span>
            <span class="s0"># not present in DOM. The try block checks if the element is present</span>
            <span class="s0"># but is invisible.</span>
            <span class="s0"># In the case of StaleElementReference, returns true because stale</span>
            <span class="s0"># element reference implies that element is no longer visible.</span>
            <span class="s2">return True</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">invisibility_of_element</span><span class="s3">(</span>
    <span class="s1">element</span><span class="s3">: </span><span class="s1">Union</span><span class="s3">[</span><span class="s1">WebElement</span><span class="s3">, </span><span class="s1">tuple</span><span class="s3">[</span><span class="s1">str</span><span class="s3">, </span><span class="s1">str</span><span class="s3">]],</span>
<span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriverOrWebElement</span><span class="s3">], </span><span class="s1">Union</span><span class="s3">[</span><span class="s1">WebElement</span><span class="s3">, </span><span class="s1">bool</span><span class="s3">]]:</span>
    <span class="s5">&quot;&quot;&quot;An Expectation for checking that an element is either invisible or not 
    present on the DOM. 
 
    Parameters: 
    ----------- 
    element : Union[WebElement, Tuple[str, str]] 
        Used to find the element. 
 
    Returns: 
    ------- 
    boolean : True when the element is invisible or not present, False otherwise. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; is_invisible_or_not_present = WebDriverWait(driver, 10).until( 
    ...     EC.invisibility_of_element(driver.find_element(By.CLASS_NAME, &quot;foo&quot;)) 
    ... ) 
    &quot;&quot;&quot;</span>
    <span class="s2">return </span><span class="s1">invisibility_of_element_located</span><span class="s3">(</span><span class="s1">element</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">element_to_be_clickable</span><span class="s3">(</span>
    <span class="s1">mark</span><span class="s3">: </span><span class="s1">Union</span><span class="s3">[</span><span class="s1">WebElement</span><span class="s3">, </span><span class="s1">tuple</span><span class="s3">[</span><span class="s1">str</span><span class="s3">, </span><span class="s1">str</span><span class="s3">]],</span>
<span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriverOrWebElement</span><span class="s3">], </span><span class="s1">Union</span><span class="s3">[</span><span class="s1">Literal</span><span class="s3">[</span><span class="s2">False</span><span class="s3">], </span><span class="s1">WebElement</span><span class="s3">]]:</span>
    <span class="s5">&quot;&quot;&quot;An Expectation for checking an element is visible and enabled such that 
    you can click it. 
 
    Parameters: 
    ----------- 
    mark : Union[WebElement, Tuple[str, str]] 
        Used to find the element. 
 
    Returns: 
    ------- 
    WebElement : The WebElement once it is located and clickable. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; element = WebDriverWait(driver, 10).until(EC.element_to_be_clickable((By.CLASS_NAME, &quot;foo&quot;))) 
    &quot;&quot;&quot;</span>

    <span class="s0"># renamed argument to 'mark', to indicate that both locator</span>
    <span class="s0"># and WebElement args are valid</span>
    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriverOrWebElement</span><span class="s3">):</span>
        <span class="s1">target </span><span class="s3">= </span><span class="s1">mark</span>
        <span class="s2">if not </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">target</span><span class="s3">, </span><span class="s1">WebElement</span><span class="s3">):  </span><span class="s0"># if given locator instead of WebElement</span>
            <span class="s1">target </span><span class="s3">= </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">find_element</span><span class="s3">(*</span><span class="s1">target</span><span class="s3">)  </span><span class="s0"># grab element at locator</span>
        <span class="s1">element </span><span class="s3">= </span><span class="s1">visibility_of</span><span class="s3">(</span><span class="s1">target</span><span class="s3">)(</span><span class="s1">driver</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">element </span><span class="s2">and </span><span class="s1">element</span><span class="s3">.</span><span class="s1">is_enabled</span><span class="s3">():</span>
            <span class="s2">return </span><span class="s1">element</span>
        <span class="s2">return False</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">staleness_of</span><span class="s3">(</span><span class="s1">element</span><span class="s3">: </span><span class="s1">WebElement</span><span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">Any</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;Wait until an element is no longer attached to the DOM. 
 
    Parameters: 
    ----------- 
    element : WebElement 
        The element to wait for. 
 
    Returns: 
    ------- 
    boolean : False if the element is still attached to the DOM, true otherwise. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; is_element_stale = WebDriverWait(driver, 10).until(EC.staleness_of(driver.find_element(By.CLASS_NAME, &quot;foo&quot;))) 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">_</span><span class="s3">):</span>
        <span class="s2">try</span><span class="s3">:</span>
            <span class="s0"># Calling any method forces a staleness check</span>
            <span class="s1">element</span><span class="s3">.</span><span class="s1">is_enabled</span><span class="s3">()</span>
            <span class="s2">return False</span>
        <span class="s2">except </span><span class="s1">StaleElementReferenceException</span><span class="s3">:</span>
            <span class="s2">return True</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">element_to_be_selected</span><span class="s3">(</span><span class="s1">element</span><span class="s3">: </span><span class="s1">WebElement</span><span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">Any</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking the selection is selected. 
 
    Parameters: 
    ----------- 
    element : WebElement 
        The WebElement to check. 
 
    Returns: 
    ------- 
    boolean : True if the element is selected, False otherwise. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; is_selected = WebDriverWait(driver, 10).until(EC.element_to_be_selected(driver.find_element( 
            By.CLASS_NAME, &quot;foo&quot;)) 
        ) 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">_</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">element</span><span class="s3">.</span><span class="s1">is_selected</span><span class="s3">()</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">element_located_to_be_selected</span><span class="s3">(</span><span class="s1">locator</span><span class="s3">: </span><span class="s1">tuple</span><span class="s3">[</span><span class="s1">str</span><span class="s3">, </span><span class="s1">str</span><span class="s3">]) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriverOrWebElement</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for the element to be located is selected. 
 
    Parameters: 
    ----------- 
    locator : Tuple[str, str] 
        Used to find the element. 
 
    Returns: 
    ------- 
    boolean : True if the element is selected, False otherwise. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; is_selected = WebDriverWait(driver, 10).until(EC.element_located_to_be_selected((By.CLASS_NAME, &quot;foo&quot;))) 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriverOrWebElement</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">find_element</span><span class="s3">(*</span><span class="s1">locator</span><span class="s3">).</span><span class="s1">is_selected</span><span class="s3">()</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">element_selection_state_to_be</span><span class="s3">(</span><span class="s1">element</span><span class="s3">: </span><span class="s1">WebElement</span><span class="s3">, </span><span class="s1">is_selected</span><span class="s3">: </span><span class="s1">bool</span><span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">Any</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking if the given element is selected. 
 
    Parameters: 
    ----------- 
    element : WebElement 
        The WebElement to check. 
    is_selected : bool 
 
    Returns: 
    ------- 
    boolean : True if the element's selection state is the same as is_selected 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; is_selected = WebDriverWait(driver, 10).until( 
    ...     EC.element_selection_state_to_be(driver.find_element(By.CLASS_NAME, &quot;foo&quot;), True) 
    ... ) 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">_</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">element</span><span class="s3">.</span><span class="s1">is_selected</span><span class="s3">() == </span><span class="s1">is_selected</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">element_located_selection_state_to_be</span><span class="s3">(</span>
    <span class="s1">locator</span><span class="s3">: </span><span class="s1">tuple</span><span class="s3">[</span><span class="s1">str</span><span class="s3">, </span><span class="s1">str</span><span class="s3">], </span><span class="s1">is_selected</span><span class="s3">: </span><span class="s1">bool</span>
<span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriverOrWebElement</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation to locate an element and check if the selection state 
    specified is in that state. 
 
    Parameters: 
    ----------- 
    locator : Tuple[str, str] 
        Used to find the element. 
    is_selected : bool 
 
    Returns: 
    ------- 
    boolean : True if the element's selection state is the same as is_selected 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; is_selected = WebDriverWait(driver, 10).until(EC.element_located_selection_state_to_be( 
            (By.CLASS_NAME, &quot;foo&quot;), True) 
        ) 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriverOrWebElement</span><span class="s3">):</span>
        <span class="s2">try</span><span class="s3">:</span>
            <span class="s1">element </span><span class="s3">= </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">find_element</span><span class="s3">(*</span><span class="s1">locator</span><span class="s3">)</span>
            <span class="s2">return </span><span class="s1">element</span><span class="s3">.</span><span class="s1">is_selected</span><span class="s3">() == </span><span class="s1">is_selected</span>
        <span class="s2">except </span><span class="s1">StaleElementReferenceException</span><span class="s3">:</span>
            <span class="s2">return False</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">number_of_windows_to_be</span><span class="s3">(</span><span class="s1">num_windows</span><span class="s3">: </span><span class="s1">int</span><span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriver</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for the number of windows to be a certain value. 
 
    Parameters: 
    ----------- 
    num_windows : int 
        The expected number of windows. 
 
    Returns: 
    ------- 
    boolean : True when the number of windows matches, False otherwise. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; is_number_of_windows = WebDriverWait(driver, 10).until(EC.number_of_windows_to_be(2)) 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriver</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">len</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">.</span><span class="s1">window_handles</span><span class="s3">) == </span><span class="s1">num_windows</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">new_window_is_opened</span><span class="s3">(</span><span class="s1">current_handles</span><span class="s3">: </span><span class="s1">list</span><span class="s3">[</span><span class="s1">str</span><span class="s3">]) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriver</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation that a new window will be opened and have the number of 
    windows handles increase. 
 
    Parameters: 
    ----------- 
    current_handles : List[str] 
        The current window handles. 
 
    Returns: 
    ------- 
    boolean : True when a new window is opened, False otherwise. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; is_new_window_opened = WebDriverWait(driver, 10).until(EC.new_window_is_opened(driver.window_handles)) 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriver</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">len</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">.</span><span class="s1">window_handles</span><span class="s3">) &gt; </span><span class="s1">len</span><span class="s3">(</span><span class="s1">current_handles</span><span class="s3">)</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">alert_is_present</span><span class="s3">() </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriver</span><span class="s3">], </span><span class="s1">Union</span><span class="s3">[</span><span class="s1">Alert</span><span class="s3">, </span><span class="s1">Literal</span><span class="s3">[</span><span class="s2">False</span><span class="s3">]]]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking if an alert is currently present and 
    switching to it. 
 
    Returns: 
    ------- 
    Alert : The Alert once it is located. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; alert = WebDriverWait(driver, 10).until(EC.alert_is_present()) 
 
    Notes: 
    ------ 
    If the alert is present it switches the given driver to it. 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriver</span><span class="s3">):</span>
        <span class="s2">try</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">switch_to</span><span class="s3">.</span><span class="s1">alert</span>
        <span class="s2">except </span><span class="s1">NoAlertPresentException</span><span class="s3">:</span>
            <span class="s2">return False</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">element_attribute_to_include</span><span class="s3">(</span><span class="s1">locator</span><span class="s3">: </span><span class="s1">tuple</span><span class="s3">[</span><span class="s1">str</span><span class="s3">, </span><span class="s1">str</span><span class="s3">], </span><span class="s1">attribute_</span><span class="s3">: </span><span class="s1">str</span><span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">WebDriverOrWebElement</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation for checking if the given attribute is included in the 
    specified element. 
 
    Parameters: 
    ----------- 
    locator : Tuple[str, str] 
        Used to find the element. 
    attribute_ : str 
        The attribute to check. 
 
    Returns: 
    ------- 
    boolean : True when the attribute is included, False otherwise. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; is_attribute_in_element = WebDriverWait(driver, 10).until( 
    ...     EC.element_attribute_to_include((By.CLASS_NAME, &quot;foo&quot;), &quot;bar&quot;) 
    ... ) 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">_predicate</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">WebDriverOrWebElement</span><span class="s3">):</span>
        <span class="s2">try</span><span class="s3">:</span>
            <span class="s1">element_attribute </span><span class="s3">= </span><span class="s1">driver</span><span class="s3">.</span><span class="s1">find_element</span><span class="s3">(*</span><span class="s1">locator</span><span class="s3">).</span><span class="s1">get_attribute</span><span class="s3">(</span><span class="s1">attribute_</span><span class="s3">)</span>
            <span class="s2">return </span><span class="s1">element_attribute </span><span class="s2">is not None</span>
        <span class="s2">except </span><span class="s1">StaleElementReferenceException</span><span class="s3">:</span>
            <span class="s2">return False</span>

    <span class="s2">return </span><span class="s1">_predicate</span>


<span class="s2">def </span><span class="s1">any_of</span><span class="s3">(*</span><span class="s1">expected_conditions</span><span class="s3">: </span><span class="s1">Callable</span><span class="s3">[[</span><span class="s1">D</span><span class="s3">], </span><span class="s1">T</span><span class="s3">]) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">D</span><span class="s3">], </span><span class="s1">Union</span><span class="s3">[</span><span class="s1">Literal</span><span class="s3">[</span><span class="s2">False</span><span class="s3">], </span><span class="s1">T</span><span class="s3">]]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation that any of multiple expected conditions is true. 
 
    Parameters: 
    ----------- 
    expected_conditions : Callable[[D], T] 
        The list of expected conditions to check. 
 
    Returns: 
    ------- 
    T : The result of the first matching condition, or False if none do. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; element = WebDriverWait(driver, 10).until( 
    ... EC.any_of(EC.presence_of_element_located((By.NAME, &quot;q&quot;), 
    ... EC.visibility_of_element_located((By.NAME, &quot;q&quot;)))) 
 
    Notes: 
    ------ 
    Equivalent to a logical 'OR'. Returns results of the first matching 
    condition, or False if none do. 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">any_of_condition</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">D</span><span class="s3">):</span>
        <span class="s2">for </span><span class="s1">expected_condition </span><span class="s2">in </span><span class="s1">expected_conditions</span><span class="s3">:</span>
            <span class="s2">try</span><span class="s3">:</span>
                <span class="s1">result </span><span class="s3">= </span><span class="s1">expected_condition</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">)</span>
                <span class="s2">if </span><span class="s1">result</span><span class="s3">:</span>
                    <span class="s2">return </span><span class="s1">result</span>
            <span class="s2">except </span><span class="s1">WebDriverException</span><span class="s3">:</span>
                <span class="s2">pass</span>
        <span class="s2">return False</span>

    <span class="s2">return </span><span class="s1">any_of_condition</span>


<span class="s2">def </span><span class="s1">all_of</span><span class="s3">(</span>
    <span class="s3">*</span><span class="s1">expected_conditions</span><span class="s3">: </span><span class="s1">Callable</span><span class="s3">[[</span><span class="s1">D</span><span class="s3">], </span><span class="s1">Union</span><span class="s3">[</span><span class="s1">T</span><span class="s3">, </span><span class="s1">Literal</span><span class="s3">[</span><span class="s2">False</span><span class="s3">]]],</span>
<span class="s3">) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">D</span><span class="s3">], </span><span class="s1">Union</span><span class="s3">[</span><span class="s1">list</span><span class="s3">[</span><span class="s1">T</span><span class="s3">], </span><span class="s1">Literal</span><span class="s3">[</span><span class="s2">False</span><span class="s3">]]]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation that all of multiple expected conditions is true. 
 
    Parameters: 
    ----------- 
    expected_conditions : Callable[[D], Union[T, Literal[False]]] 
        The list of expected conditions to check. 
 
    Returns: 
    ------- 
    List[T] : The results of all the matching conditions, or False if any do not. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; elements = WebDriverWait(driver, 10).until( 
    ... EC.all_of(EC.presence_of_element_located((By.NAME, &quot;q&quot;), 
    ... EC.visibility_of_element_located((By.NAME, &quot;q&quot;)))) 
 
    Notes: 
    ------ 
    Equivalent to a logical 'AND'. 
    Returns: When any ExpectedCondition is not met: False. 
    When all ExpectedConditions are met: A List with each ExpectedCondition's return value. 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">all_of_condition</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">D</span><span class="s3">):</span>
        <span class="s1">results</span><span class="s3">: </span><span class="s1">list</span><span class="s3">[</span><span class="s1">T</span><span class="s3">] = []</span>
        <span class="s2">for </span><span class="s1">expected_condition </span><span class="s2">in </span><span class="s1">expected_conditions</span><span class="s3">:</span>
            <span class="s2">try</span><span class="s3">:</span>
                <span class="s1">result </span><span class="s3">= </span><span class="s1">expected_condition</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">)</span>
                <span class="s2">if not </span><span class="s1">result</span><span class="s3">:</span>
                    <span class="s2">return False</span>
                <span class="s1">results</span><span class="s3">.</span><span class="s1">append</span><span class="s3">(</span><span class="s1">result</span><span class="s3">)</span>
            <span class="s2">except </span><span class="s1">WebDriverException</span><span class="s3">:</span>
                <span class="s2">return False</span>
        <span class="s2">return </span><span class="s1">results</span>

    <span class="s2">return </span><span class="s1">all_of_condition</span>


<span class="s2">def </span><span class="s1">none_of</span><span class="s3">(*</span><span class="s1">expected_conditions</span><span class="s3">: </span><span class="s1">Callable</span><span class="s3">[[</span><span class="s1">D</span><span class="s3">], </span><span class="s1">Any</span><span class="s3">]) </span><span class="s1">-&gt; Callable</span><span class="s3">[[</span><span class="s1">D</span><span class="s3">], </span><span class="s1">bool</span><span class="s3">]:</span>
    <span class="s5">&quot;&quot;&quot;An expectation that none of 1 or multiple expected conditions is true. 
 
    Parameters: 
    ----------- 
    expected_conditions : Callable[[D], Any] 
        The list of expected conditions to check. 
 
    Returns: 
    ------- 
    boolean : True if none of the conditions are true, False otherwise. 
 
    Example: 
    -------- 
    &gt;&gt;&gt; from selenium.webdriver.common.by import By 
    &gt;&gt;&gt; from selenium.webdriver.support.ui import WebDriverWait 
    &gt;&gt;&gt; from selenium.webdriver.support import expected_conditions as EC 
    &gt;&gt;&gt; element = WebDriverWait(driver, 10).until( 
    ... EC.none_of(EC.presence_of_element_located((By.NAME, &quot;q&quot;), 
    ... EC.visibility_of_element_located((By.NAME, &quot;q&quot;)))) 
 
    Notes: 
    ------ 
    Equivalent to a logical 'NOT-OR'. Returns a Boolean 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">none_of_condition</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">: </span><span class="s1">D</span><span class="s3">):</span>
        <span class="s2">for </span><span class="s1">expected_condition </span><span class="s2">in </span><span class="s1">expected_conditions</span><span class="s3">:</span>
            <span class="s2">try</span><span class="s3">:</span>
                <span class="s1">result </span><span class="s3">= </span><span class="s1">expected_condition</span><span class="s3">(</span><span class="s1">driver</span><span class="s3">)</span>
                <span class="s2">if </span><span class="s1">result</span><span class="s3">:</span>
                    <span class="s2">return False</span>
            <span class="s2">except </span><span class="s1">WebDriverException</span><span class="s3">:</span>
                <span class="s2">pass</span>
        <span class="s2">return True</span>

    <span class="s2">return </span><span class="s1">none_of_condition</span>
</pre>
</body>
</html>