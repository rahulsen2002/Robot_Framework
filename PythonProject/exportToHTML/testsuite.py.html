<html>
<head>
<title>testsuite.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #7a7e85;}
.s1 { color: #bcbec4;}
.s2 { color: #cf8e6d;}
.s3 { color: #bcbec4;}
.s4 { color: #6aab73;}
.s5 { color: #5f826b; font-style: italic;}
.s6 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
testsuite.py</font>
</center></td></tr></table>
<pre><span class="s0">#  Copyright 2008-2015 Nokia Networks</span>
<span class="s0">#  Copyright 2016-     Robot Framework Foundation</span>
<span class="s0">#</span>
<span class="s0">#  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="s0">#  you may not use this file except in compliance with the License.</span>
<span class="s0">#  You may obtain a copy of the License at</span>
<span class="s0">#</span>
<span class="s0">#      http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="s0">#</span>
<span class="s0">#  Unless required by applicable law or agreed to in writing, software</span>
<span class="s0">#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="s0">#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="s0">#  See the License for the specific language governing permissions and</span>
<span class="s0">#  limitations under the License.</span>

<span class="s2">from </span><span class="s1">collections</span><span class="s3">.</span><span class="s1">abc </span><span class="s2">import </span><span class="s1">Mapping</span>
<span class="s2">from </span><span class="s1">pathlib </span><span class="s2">import </span><span class="s1">Path</span>
<span class="s2">from </span><span class="s1">typing </span><span class="s2">import </span><span class="s1">Any</span><span class="s3">, </span><span class="s1">Generic</span><span class="s3">, </span><span class="s1">Iterator</span><span class="s3">, </span><span class="s1">Sequence</span><span class="s3">, </span><span class="s1">Type</span><span class="s3">, </span><span class="s1">TypeVar</span>

<span class="s2">from </span><span class="s1">robot</span><span class="s3">.</span><span class="s1">errors </span><span class="s2">import </span><span class="s1">DataError</span>
<span class="s2">from </span><span class="s1">robot</span><span class="s3">.</span><span class="s1">utils </span><span class="s2">import </span><span class="s1">seq2str</span><span class="s3">, </span><span class="s1">setter</span>

<span class="s2">from </span><span class="s3">.</span><span class="s1">configurer </span><span class="s2">import </span><span class="s1">SuiteConfigurer</span>
<span class="s2">from </span><span class="s3">.</span><span class="s1">filter </span><span class="s2">import </span><span class="s1">EmptySuiteRemover</span><span class="s3">, </span><span class="s1">Filter</span>
<span class="s2">from </span><span class="s3">.</span><span class="s1">fixture </span><span class="s2">import </span><span class="s1">create_fixture</span>
<span class="s2">from </span><span class="s3">.</span><span class="s1">itemlist </span><span class="s2">import </span><span class="s1">ItemList</span>
<span class="s2">from </span><span class="s3">.</span><span class="s1">keyword </span><span class="s2">import </span><span class="s1">Keyword</span>
<span class="s2">from </span><span class="s3">.</span><span class="s1">metadata </span><span class="s2">import </span><span class="s1">Metadata</span>
<span class="s2">from </span><span class="s3">.</span><span class="s1">modelobject </span><span class="s2">import </span><span class="s1">DataDict</span><span class="s3">, </span><span class="s1">ModelObject</span>
<span class="s2">from </span><span class="s3">.</span><span class="s1">tagsetter </span><span class="s2">import </span><span class="s1">TagSetter</span>
<span class="s2">from </span><span class="s3">.</span><span class="s1">testcase </span><span class="s2">import </span><span class="s1">TestCase</span><span class="s3">, </span><span class="s1">TestCases</span>
<span class="s2">from </span><span class="s3">.</span><span class="s1">visitor </span><span class="s2">import </span><span class="s1">SuiteVisitor</span>

<span class="s1">TS </span><span class="s3">= </span><span class="s1">TypeVar</span><span class="s3">(</span><span class="s4">&quot;TS&quot;</span><span class="s3">, </span><span class="s1">bound</span><span class="s3">=</span><span class="s4">&quot;TestSuite&quot;</span><span class="s3">)</span>
<span class="s1">KW </span><span class="s3">= </span><span class="s1">TypeVar</span><span class="s3">(</span><span class="s4">&quot;KW&quot;</span><span class="s3">, </span><span class="s1">bound</span><span class="s3">=</span><span class="s1">Keyword</span><span class="s3">, </span><span class="s1">covariant</span><span class="s3">=</span><span class="s2">True</span><span class="s3">)</span>
<span class="s1">TC </span><span class="s3">= </span><span class="s1">TypeVar</span><span class="s3">(</span><span class="s4">&quot;TC&quot;</span><span class="s3">, </span><span class="s1">bound</span><span class="s3">=</span><span class="s1">TestCase</span><span class="s3">, </span><span class="s1">covariant</span><span class="s3">=</span><span class="s2">True</span><span class="s3">)</span>


<span class="s2">class </span><span class="s1">TestSuite</span><span class="s3">(</span><span class="s1">ModelObject</span><span class="s3">, </span><span class="s1">Generic</span><span class="s3">[</span><span class="s1">KW</span><span class="s3">, </span><span class="s1">TC</span><span class="s3">]):</span>
    <span class="s5">&quot;&quot;&quot;Base model for single suite. 
 
    Extended by :class:`robot.running.model.TestSuite` and 
    :class:`robot.result.model.TestSuite`. 
    &quot;&quot;&quot;</span>

    <span class="s1">type </span><span class="s3">= </span><span class="s4">&quot;SUITE&quot;</span>
    <span class="s0"># FIXME: Type Ignore declarations: Typevars only accept subclasses of the bound class</span>
    <span class="s0"># assigning `Type[KW]` to `Keyword` results in an error. In RF 7 the class should be</span>
    <span class="s0"># made impossible to instantiate directly, and the assignments can be replaced with</span>
    <span class="s0"># KnownAtRuntime</span>
    <span class="s1">fixture_class</span><span class="s3">: </span><span class="s1">Type</span><span class="s3">[</span><span class="s1">KW</span><span class="s3">] = </span><span class="s1">Keyword  </span><span class="s0"># type: ignore</span>
    <span class="s1">test_class</span><span class="s3">: </span><span class="s1">Type</span><span class="s3">[</span><span class="s1">TC</span><span class="s3">] = </span><span class="s1">TestCase  </span><span class="s0"># type: ignore</span>

    <span class="s1">repr_args </span><span class="s3">= (</span><span class="s4">&quot;name&quot;</span><span class="s3">,)</span>
    <span class="s1">__slots__ </span><span class="s3">= (</span><span class="s4">&quot;parent&quot;</span><span class="s3">, </span><span class="s4">&quot;_name&quot;</span><span class="s3">, </span><span class="s4">&quot;doc&quot;</span><span class="s3">, </span><span class="s4">&quot;_setup&quot;</span><span class="s3">, </span><span class="s4">&quot;_teardown&quot;</span><span class="s3">, </span><span class="s4">&quot;rpa&quot;</span><span class="s3">, </span><span class="s4">&quot;_my_visitors&quot;</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__init__</span><span class="s3">(</span>
        <span class="s1">self</span><span class="s3">,</span>
        <span class="s1">name</span><span class="s3">: </span><span class="s1">str </span><span class="s3">= </span><span class="s4">&quot;&quot;</span><span class="s3">,</span>
        <span class="s1">doc</span><span class="s3">: </span><span class="s1">str </span><span class="s3">= </span><span class="s4">&quot;&quot;</span><span class="s3">,</span>
        <span class="s1">metadata</span><span class="s3">: </span><span class="s4">&quot;Mapping[str, str]|None&quot; </span><span class="s3">= </span><span class="s2">None</span><span class="s3">,</span>
        <span class="s1">source</span><span class="s3">: </span><span class="s4">&quot;Path|str|None&quot; </span><span class="s3">= </span><span class="s2">None</span><span class="s3">,</span>
        <span class="s1">rpa</span><span class="s3">: </span><span class="s4">&quot;bool|None&quot; </span><span class="s3">= </span><span class="s2">False</span><span class="s3">,</span>
        <span class="s1">parent</span><span class="s3">: </span><span class="s4">&quot;TestSuite[KW, TC]|None&quot; </span><span class="s3">= </span><span class="s2">None</span><span class="s3">,</span>
    <span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_name </span><span class="s3">= </span><span class="s1">name</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">doc </span><span class="s3">= </span><span class="s1">doc</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">metadata </span><span class="s3">= </span><span class="s1">metadata</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">source </span><span class="s3">= </span><span class="s1">source</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">parent </span><span class="s3">= </span><span class="s1">parent</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">rpa </span><span class="s3">= </span><span class="s1">rpa</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">suites </span><span class="s3">= []</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">tests </span><span class="s3">= []</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_setup</span><span class="s3">: </span><span class="s4">&quot;KW|None&quot; </span><span class="s3">= </span><span class="s2">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_teardown</span><span class="s3">: </span><span class="s4">&quot;KW|None&quot; </span><span class="s3">= </span><span class="s2">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_my_visitors</span><span class="s3">: </span><span class="s4">&quot;list[SuiteVisitor]&quot; </span><span class="s3">= []</span>

    <span class="s3">@</span><span class="s1">staticmethod</span>
    <span class="s2">def </span><span class="s1">name_from_source</span><span class="s3">(</span><span class="s1">source</span><span class="s3">: </span><span class="s4">&quot;Path|str|None&quot;</span><span class="s3">, </span><span class="s1">extension</span><span class="s3">: </span><span class="s1">Sequence</span><span class="s3">[</span><span class="s1">str</span><span class="s3">] = ()) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s5">&quot;&quot;&quot;Create suite name based on the given ``source``. 
 
        This method is used by Robot Framework itself when it builds suites. 
        External parsers and other tools that want to produce suites with 
        names matching names created by Robot Framework can use this method as 
        well. This method is also used if :attr:`name` is not set and someone 
        accesses it. 
 
        The algorithm is as follows: 
 
        - If the source is ``None`` or empty, return an empty string. 
        - Get the base name of the source. Read more below. 
        - Remove possible prefix separated with ``__``. 
        - Convert underscores to spaces. 
        - If the name is all lower case, title case it. 
 
        The base name of files is got by calling `Path.stem`__ that drops 
        the file extension. It typically works fine, but gives wrong result 
        if the extension has multiple parts like in ``tests.robot.zip``. 
        That problem can be avoided by giving valid file extension or extensions 
        as the optional ``extension`` argument. 
 
        Examples:: 
 
            TestSuite.name_from_source(source) 
            TestSuite.name_from_source(source, extension='.robot.zip') 
            TestSuite.name_from_source(source, ('.robot', '.robot.zip')) 
 
        __ https://docs.python.org/3/library/pathlib.html#pathlib.PurePath.stem 
        &quot;&quot;&quot;</span>
        <span class="s2">if not </span><span class="s1">source</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s4">&quot;&quot;</span>
        <span class="s2">if not </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">source</span><span class="s3">, </span><span class="s1">Path</span><span class="s3">):</span>
            <span class="s1">source </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">source</span><span class="s3">)</span>
        <span class="s1">name </span><span class="s3">= </span><span class="s1">TestSuite</span><span class="s3">.</span><span class="s1">_get_base_name</span><span class="s3">(</span><span class="s1">source</span><span class="s3">, </span><span class="s1">extension</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s4">&quot;__&quot; </span><span class="s2">in </span><span class="s1">name</span><span class="s3">:</span>
            <span class="s1">name </span><span class="s3">= </span><span class="s1">name</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s4">&quot;__&quot;</span><span class="s3">, </span><span class="s6">1</span><span class="s3">)[</span><span class="s6">1</span><span class="s3">] </span><span class="s2">or </span><span class="s1">name</span>
        <span class="s1">name </span><span class="s3">= </span><span class="s1">name</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s4">&quot;_&quot;</span><span class="s3">, </span><span class="s4">&quot; &quot;</span><span class="s3">).</span><span class="s1">strip</span><span class="s3">()</span>
        <span class="s2">return </span><span class="s1">name</span><span class="s3">.</span><span class="s1">title</span><span class="s3">() </span><span class="s2">if </span><span class="s1">name</span><span class="s3">.</span><span class="s1">islower</span><span class="s3">() </span><span class="s2">else </span><span class="s1">name</span>

    <span class="s3">@</span><span class="s1">staticmethod</span>
    <span class="s2">def </span><span class="s1">_get_base_name</span><span class="s3">(</span><span class="s1">path</span><span class="s3">: </span><span class="s1">Path</span><span class="s3">, </span><span class="s1">extensions</span><span class="s3">: </span><span class="s1">Sequence</span><span class="s3">[</span><span class="s1">str</span><span class="s3">]) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s2">if </span><span class="s1">path</span><span class="s3">.</span><span class="s1">is_dir</span><span class="s3">():</span>
            <span class="s2">return </span><span class="s1">path</span><span class="s3">.</span><span class="s1">name</span>
        <span class="s2">if not </span><span class="s1">extensions</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">path</span><span class="s3">.</span><span class="s1">stem</span>
        <span class="s2">if </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">extensions</span><span class="s3">, </span><span class="s1">str</span><span class="s3">):</span>
            <span class="s1">extensions </span><span class="s3">= [</span><span class="s1">extensions</span><span class="s3">]</span>
        <span class="s2">for </span><span class="s1">ext </span><span class="s2">in </span><span class="s1">extensions</span><span class="s3">:</span>
            <span class="s1">ext </span><span class="s3">= </span><span class="s4">&quot;.&quot; </span><span class="s3">+ </span><span class="s1">ext</span><span class="s3">.</span><span class="s1">lower</span><span class="s3">().</span><span class="s1">lstrip</span><span class="s3">(</span><span class="s4">&quot;.&quot;</span><span class="s3">)</span>
            <span class="s2">if </span><span class="s1">path</span><span class="s3">.</span><span class="s1">name</span><span class="s3">.</span><span class="s1">lower</span><span class="s3">().</span><span class="s1">endswith</span><span class="s3">(</span><span class="s1">ext</span><span class="s3">):</span>
                <span class="s2">return </span><span class="s1">path</span><span class="s3">.</span><span class="s1">name</span><span class="s3">[: -</span><span class="s1">len</span><span class="s3">(</span><span class="s1">ext</span><span class="s3">)]</span>
        <span class="s1">valid_extensions </span><span class="s3">= </span><span class="s1">seq2str</span><span class="s3">(</span><span class="s1">extensions</span><span class="s3">, </span><span class="s1">lastsep</span><span class="s3">=</span><span class="s4">&quot; or &quot;</span><span class="s3">)</span>
        <span class="s2">raise </span><span class="s1">ValueError</span><span class="s3">(</span><span class="s4">f&quot;File '</span><span class="s2">{</span><span class="s1">path</span><span class="s2">}</span><span class="s4">' does not have extension </span><span class="s2">{</span><span class="s1">valid_extensions</span><span class="s2">}</span><span class="s4">.&quot;</span><span class="s3">)</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">_visitors</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; </span><span class="s4">&quot;list[SuiteVisitor]&quot;</span><span class="s3">:</span>
        <span class="s1">parent_visitors </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">parent</span><span class="s3">.</span><span class="s1">_visitors </span><span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">parent </span><span class="s2">else </span><span class="s3">[]</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_my_visitors </span><span class="s3">+ </span><span class="s1">parent_visitors</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">name</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s5">&quot;&quot;&quot;Suite name. 
 
        If name is not set, it is constructed from source. If source is not set, 
        name is constructed from child suite names by concatenating them with 
        `` &amp; ``. If there are no child suites, name is an empty string. 
        &quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s3">(</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_name</span>
            <span class="s2">or </span><span class="s1">self</span><span class="s3">.</span><span class="s1">name_from_source</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">source</span><span class="s3">)</span>
            <span class="s2">or </span><span class="s4">&quot; &amp; &quot;</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">s</span><span class="s3">.</span><span class="s1">name </span><span class="s2">for </span><span class="s1">s </span><span class="s2">in </span><span class="s1">self</span><span class="s3">.</span><span class="s1">suites</span><span class="s3">)</span>
        <span class="s3">)</span>

    <span class="s3">@</span><span class="s1">name</span><span class="s3">.</span><span class="s1">setter</span>
    <span class="s2">def </span><span class="s1">name</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">name</span><span class="s3">: </span><span class="s1">str</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_name </span><span class="s3">= </span><span class="s1">name</span>

    <span class="s3">@</span><span class="s1">setter</span>
    <span class="s2">def </span><span class="s1">source</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">source</span><span class="s3">: </span><span class="s4">&quot;Path|str|None&quot;</span><span class="s3">) </span><span class="s1">-&gt; </span><span class="s4">&quot;Path|None&quot;</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">source </span><span class="s2">if </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">source</span><span class="s3">, (</span><span class="s1">Path</span><span class="s3">, </span><span class="s1">type</span><span class="s3">(</span><span class="s2">None</span><span class="s3">))) </span><span class="s2">else </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">source</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">adjust_source</span><span class="s3">(</span>
        <span class="s1">self</span><span class="s3">,</span>
        <span class="s1">relative_to</span><span class="s3">: </span><span class="s4">&quot;Path|str|None&quot; </span><span class="s3">= </span><span class="s2">None</span><span class="s3">,</span>
        <span class="s1">root</span><span class="s3">: </span><span class="s4">&quot;Path|str|None&quot; </span><span class="s3">= </span><span class="s2">None</span><span class="s3">,</span>
    <span class="s3">):</span>
        <span class="s5">&quot;&quot;&quot;Adjust suite source and child suite sources, recursively. 
 
        :param relative_to: Make suite source relative to the given path. Calls 
            `pathlib.Path.relative_to()`__ internally. Raises ``ValueError`` 
            if creating a relative path is not possible. 
        :param root: Make given path a new root directory for the source. Raises 
            ``ValueError`` if suite source is absolute. 
 
        Adjusting the source is especially useful when moving data around as JSON:: 
 
            from robot.api import TestSuite 
 
            # Create a suite, adjust source and convert to JSON. 
            suite = TestSuite.from_file_system('/path/to/data') 
            suite.adjust_source(relative_to='/path/to') 
            suite.to_json('data.rbt') 
 
            # Recreate suite elsewhere and adjust source accordingly. 
            suite = TestSuite.from_json('data.rbt') 
            suite.adjust_source(root='/new/path/to') 
 
        New in Robot Framework 6.1. 
 
        __ https://docs.python.org/3/library/pathlib.html#pathlib.PurePath.relative_to 
        &quot;&quot;&quot;</span>
        <span class="s2">if not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">source</span><span class="s3">:</span>
            <span class="s2">raise </span><span class="s1">ValueError</span><span class="s3">(</span><span class="s4">&quot;Suite has no source.&quot;</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">relative_to</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">source </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">source</span><span class="s3">.</span><span class="s1">relative_to</span><span class="s3">(</span><span class="s1">relative_to</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">root</span><span class="s3">:</span>
            <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">source</span><span class="s3">.</span><span class="s1">is_absolute</span><span class="s3">():</span>
                <span class="s2">raise </span><span class="s1">ValueError</span><span class="s3">(</span>
                    <span class="s4">f&quot;Cannot set root for absolute source '</span><span class="s2">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">source</span><span class="s2">}</span><span class="s4">'.&quot;</span>
                <span class="s3">)</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">source </span><span class="s3">= </span><span class="s1">root </span><span class="s3">/ </span><span class="s1">self</span><span class="s3">.</span><span class="s1">source</span>
        <span class="s2">for </span><span class="s1">suite </span><span class="s2">in </span><span class="s1">self</span><span class="s3">.</span><span class="s1">suites</span><span class="s3">:</span>
            <span class="s1">suite</span><span class="s3">.</span><span class="s1">adjust_source</span><span class="s3">(</span><span class="s1">relative_to</span><span class="s3">, </span><span class="s1">root</span><span class="s3">)</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">full_name</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s5">&quot;&quot;&quot;Suite name prefixed with the full name of the possible parent suite. 
 
        Just :attr:`name` of the suite if it has no :attr:`parent`. 
        &quot;&quot;&quot;</span>
        <span class="s2">if not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">parent</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">name</span>
        <span class="s2">return </span><span class="s4">f&quot;</span><span class="s2">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">parent</span><span class="s3">.</span><span class="s1">full_name</span><span class="s2">}</span><span class="s4">.</span><span class="s2">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">name</span><span class="s2">}</span><span class="s4">&quot;</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">longname</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s5">&quot;&quot;&quot;Deprecated since Robot Framework 7.0. Use :attr:`full_name` instead.&quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">full_name</span>

    <span class="s3">@</span><span class="s1">setter</span>
    <span class="s2">def </span><span class="s1">metadata</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">metadata</span><span class="s3">: </span><span class="s4">&quot;Mapping[str, str]|None&quot;</span><span class="s3">) </span><span class="s1">-&gt; Metadata</span><span class="s3">:</span>
        <span class="s5">&quot;&quot;&quot;Free suite metadata as a :class:`~.metadata.Metadata` object.&quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">Metadata</span><span class="s3">(</span><span class="s1">metadata</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">validate_execution_mode</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; </span><span class="s4">&quot;bool|None&quot;</span><span class="s3">:</span>
        <span class="s5">&quot;&quot;&quot;Validate that suite execution mode is set consistently. 
 
        Raise an exception if the execution mode is not set (i.e. the :attr:`rpa` 
        attribute is ``None``) and child suites have conflicting execution modes. 
 
        The execution mode is returned. New in RF 6.1.1. 
        &quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">rpa </span><span class="s2">is None</span><span class="s3">:</span>
            <span class="s1">rpa </span><span class="s3">= </span><span class="s1">name </span><span class="s3">= </span><span class="s2">None</span>
            <span class="s2">for </span><span class="s1">suite </span><span class="s2">in </span><span class="s1">self</span><span class="s3">.</span><span class="s1">suites</span><span class="s3">:</span>
                <span class="s1">suite</span><span class="s3">.</span><span class="s1">validate_execution_mode</span><span class="s3">()</span>
                <span class="s2">if </span><span class="s1">rpa </span><span class="s2">is None</span><span class="s3">:</span>
                    <span class="s1">rpa </span><span class="s3">= </span><span class="s1">suite</span><span class="s3">.</span><span class="s1">rpa</span>
                    <span class="s1">name </span><span class="s3">= </span><span class="s1">suite</span><span class="s3">.</span><span class="s1">full_name</span>
                <span class="s2">elif </span><span class="s1">rpa </span><span class="s2">is not </span><span class="s1">suite</span><span class="s3">.</span><span class="s1">rpa</span><span class="s3">:</span>
                    <span class="s1">mode1</span><span class="s3">, </span><span class="s1">mode2 </span><span class="s3">= (</span><span class="s4">&quot;tasks&quot;</span><span class="s3">, </span><span class="s4">&quot;tests&quot;</span><span class="s3">) </span><span class="s2">if </span><span class="s1">rpa </span><span class="s2">else </span><span class="s3">(</span><span class="s4">&quot;tests&quot;</span><span class="s3">, </span><span class="s4">&quot;tasks&quot;</span><span class="s3">)</span>
                    <span class="s2">raise </span><span class="s1">DataError</span><span class="s3">(</span>
                        <span class="s4">f&quot;Conflicting execution modes: Suite '</span><span class="s2">{</span><span class="s1">name</span><span class="s2">}</span><span class="s4">' has </span><span class="s2">{</span><span class="s1">mode1</span><span class="s2">} </span><span class="s4">but &quot;</span>
                        <span class="s4">f&quot;suite '</span><span class="s2">{</span><span class="s1">suite</span><span class="s3">.</span><span class="s1">full_name</span><span class="s2">}</span><span class="s4">' has </span><span class="s2">{</span><span class="s1">mode2</span><span class="s2">}</span><span class="s4">. Resolve the conflict &quot;</span>
                        <span class="s4">f&quot;or use '--rpa' or '--norpa' options to set the execution &quot;</span>
                        <span class="s4">f&quot;mode explicitly.&quot;</span>
                    <span class="s3">)</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">rpa </span><span class="s3">= </span><span class="s1">rpa</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">rpa</span>

    <span class="s3">@</span><span class="s1">setter</span>
    <span class="s2">def </span><span class="s1">suites</span><span class="s3">(</span>
        <span class="s1">self</span><span class="s3">, </span><span class="s1">suites</span><span class="s3">: </span><span class="s4">&quot;Sequence[TestSuite|DataDict]&quot;</span>
    <span class="s3">) </span><span class="s1">-&gt; </span><span class="s4">&quot;TestSuites[TestSuite[KW, TC]]&quot;</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">TestSuites</span><span class="s3">[</span><span class="s4">&quot;TestSuite&quot;</span><span class="s3">](</span><span class="s1">self</span><span class="s3">.</span><span class="s1">__class__</span><span class="s3">, </span><span class="s1">self</span><span class="s3">, </span><span class="s1">suites</span><span class="s3">)</span>

    <span class="s3">@</span><span class="s1">setter</span>
    <span class="s2">def </span><span class="s1">tests</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">tests</span><span class="s3">: </span><span class="s4">&quot;Sequence[TC|DataDict]&quot;</span><span class="s3">) </span><span class="s1">-&gt; TestCases</span><span class="s3">[</span><span class="s1">TC</span><span class="s3">]:</span>
        <span class="s2">return </span><span class="s1">TestCases</span><span class="s3">[</span><span class="s1">TC</span><span class="s3">](</span><span class="s1">self</span><span class="s3">.</span><span class="s1">test_class</span><span class="s3">, </span><span class="s1">self</span><span class="s3">, </span><span class="s1">tests</span><span class="s3">)</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">setup</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; KW</span><span class="s3">:</span>
        <span class="s5">&quot;&quot;&quot;Suite setup. 
 
        This attribute is a ``Keyword`` object also when a suite has no setup 
        but in that case its truth value is ``False``. The preferred way to 
        check does a suite have a setup is using :attr:`has_setup`. 
 
        Setup can be modified by setting attributes directly:: 
 
            suite.setup.name = 'Example' 
            suite.setup.args = ('First', 'Second') 
 
        Alternatively the :meth:`config` method can be used to set multiple 
        attributes in one call:: 
 
            suite.setup.config(name='Example', args=('First', 'Second')) 
 
        The easiest way to reset the whole setup is setting it to ``None``. 
        It will automatically recreate the underlying ``Keyword`` object:: 
 
            suite.setup = None 
 
        New in Robot Framework 4.0. Earlier setup was accessed like 
        ``suite.keywords.setup``. 
        &quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_setup </span><span class="s2">is None</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_setup </span><span class="s3">= </span><span class="s1">create_fixture</span><span class="s3">(</span>
                <span class="s1">self</span><span class="s3">.</span><span class="s1">fixture_class</span><span class="s3">,</span>
                <span class="s2">None</span><span class="s3">,</span>
                <span class="s1">self</span><span class="s3">,</span>
                <span class="s1">Keyword</span><span class="s3">.</span><span class="s1">SETUP</span><span class="s3">,</span>
            <span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_setup</span>

    <span class="s3">@</span><span class="s1">setup</span><span class="s3">.</span><span class="s1">setter</span>
    <span class="s2">def </span><span class="s1">setup</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">setup</span><span class="s3">: </span><span class="s4">&quot;KW|DataDict|None&quot;</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_setup </span><span class="s3">= </span><span class="s1">create_fixture</span><span class="s3">(</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">fixture_class</span><span class="s3">,</span>
            <span class="s1">setup</span><span class="s3">,</span>
            <span class="s1">self</span><span class="s3">,</span>
            <span class="s1">Keyword</span><span class="s3">.</span><span class="s1">SETUP</span><span class="s3">,</span>
        <span class="s3">)</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">has_setup</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; bool</span><span class="s3">:</span>
        <span class="s5">&quot;&quot;&quot;Check does a suite have a setup without creating a setup object. 
 
        A difference between using ``if suite.has_setup:`` and ``if suite.setup:`` 
        is that accessing the :attr:`setup` attribute creates a :class:`Keyword` 
        object representing the setup even when the suite actually does not have 
        one. This typically does not matter, but with bigger suite structures 
        it can have some effect on memory usage. 
 
        New in Robot Framework 5.0. 
        &quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">bool</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_setup</span><span class="s3">)</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">teardown</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; KW</span><span class="s3">:</span>
        <span class="s5">&quot;&quot;&quot;Suite teardown. 
 
        See :attr:`setup` for more information. 
        &quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_teardown </span><span class="s2">is None</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_teardown </span><span class="s3">= </span><span class="s1">create_fixture</span><span class="s3">(</span>
                <span class="s1">self</span><span class="s3">.</span><span class="s1">fixture_class</span><span class="s3">,</span>
                <span class="s2">None</span><span class="s3">,</span>
                <span class="s1">self</span><span class="s3">,</span>
                <span class="s1">Keyword</span><span class="s3">.</span><span class="s1">TEARDOWN</span><span class="s3">,</span>
            <span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_teardown</span>

    <span class="s3">@</span><span class="s1">teardown</span><span class="s3">.</span><span class="s1">setter</span>
    <span class="s2">def </span><span class="s1">teardown</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">teardown</span><span class="s3">: </span><span class="s4">&quot;KW|DataDict|None&quot;</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_teardown </span><span class="s3">= </span><span class="s1">create_fixture</span><span class="s3">(</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">fixture_class</span><span class="s3">,</span>
            <span class="s1">teardown</span><span class="s3">,</span>
            <span class="s1">self</span><span class="s3">,</span>
            <span class="s1">Keyword</span><span class="s3">.</span><span class="s1">TEARDOWN</span><span class="s3">,</span>
        <span class="s3">)</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">has_teardown</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; bool</span><span class="s3">:</span>
        <span class="s5">&quot;&quot;&quot;Check does a suite have a teardown without creating a teardown object. 
 
        See :attr:`has_setup` for more information. 
 
        New in Robot Framework 5.0. 
        &quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">bool</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_teardown</span><span class="s3">)</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">id</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s5">&quot;&quot;&quot;An automatically generated unique id. 
 
        The root suite has id ``s1``, its child suites have ids ``s1-s1``, 
        ``s1-s2``, ..., their child suites get ids ``s1-s1-s1``, ``s1-s1-s2``, 
        ..., ``s1-s2-s1``, ..., and so on. 
 
        The first test in a suite has an id like ``s1-t1``, the second has an 
        id ``s1-t2``, and so on. Similarly, keywords in suites (setup/teardown) 
        and in tests get ids like ``s1-k1``, ``s1-t1-k1``, and ``s1-s4-t2-k5``. 
        &quot;&quot;&quot;</span>
        <span class="s2">if not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">parent</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s4">&quot;s1&quot;</span>
        <span class="s1">suites </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">parent</span><span class="s3">.</span><span class="s1">suites</span>
        <span class="s1">index </span><span class="s3">= </span><span class="s1">suites</span><span class="s3">.</span><span class="s1">index</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s2">if </span><span class="s1">self </span><span class="s2">in </span><span class="s1">suites </span><span class="s2">else </span><span class="s1">len</span><span class="s3">(</span><span class="s1">suites</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s4">f&quot;</span><span class="s2">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">parent</span><span class="s3">.</span><span class="s1">id</span><span class="s2">}</span><span class="s4">-s</span><span class="s2">{</span><span class="s1">index </span><span class="s3">+ </span><span class="s6">1</span><span class="s2">}</span><span class="s4">&quot;</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">all_tests</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; Iterator</span><span class="s3">[</span><span class="s1">TestCase</span><span class="s3">]:</span>
        <span class="s5">&quot;&quot;&quot;Yields all tests this suite and its child suites contain. 
 
        New in Robot Framework 6.1. 
        &quot;&quot;&quot;</span>
        <span class="s2">yield from </span><span class="s1">self</span><span class="s3">.</span><span class="s1">tests</span>
        <span class="s2">for </span><span class="s1">suite </span><span class="s2">in </span><span class="s1">self</span><span class="s3">.</span><span class="s1">suites</span><span class="s3">:</span>
            <span class="s2">yield from </span><span class="s1">suite</span><span class="s3">.</span><span class="s1">all_tests</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">test_count</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; int</span><span class="s3">:</span>
        <span class="s5">&quot;&quot;&quot;Total number of the tests in this suite and in its child suites.&quot;&quot;&quot;</span>
        <span class="s0"># This is considerably faster than `return len(list(self.all_tests))`.</span>
        <span class="s2">return </span><span class="s1">len</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">tests</span><span class="s3">) + </span><span class="s1">sum</span><span class="s3">(</span><span class="s1">suite</span><span class="s3">.</span><span class="s1">test_count </span><span class="s2">for </span><span class="s1">suite </span><span class="s2">in </span><span class="s1">self</span><span class="s3">.</span><span class="s1">suites</span><span class="s3">)</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">has_tests</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; bool</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">bool</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">tests</span><span class="s3">) </span><span class="s2">or </span><span class="s1">any</span><span class="s3">(</span><span class="s1">s</span><span class="s3">.</span><span class="s1">has_tests </span><span class="s2">for </span><span class="s1">s </span><span class="s2">in </span><span class="s1">self</span><span class="s3">.</span><span class="s1">suites</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">set_tags</span><span class="s3">(</span>
        <span class="s1">self</span><span class="s3">,</span>
        <span class="s1">add</span><span class="s3">: </span><span class="s1">Sequence</span><span class="s3">[</span><span class="s1">str</span><span class="s3">] = (),</span>
        <span class="s1">remove</span><span class="s3">: </span><span class="s1">Sequence</span><span class="s3">[</span><span class="s1">str</span><span class="s3">] = (),</span>
        <span class="s1">persist</span><span class="s3">: </span><span class="s1">bool </span><span class="s3">= </span><span class="s2">False</span><span class="s3">,</span>
    <span class="s3">):</span>
        <span class="s5">&quot;&quot;&quot;Add and/or remove specified tags to the tests in this suite. 
 
        :param add: Tags to add as a list or, if adding only one, 
            as a single string. 
        :param remove: Tags to remove as a list or as a single string. 
            Can be given as patterns where ``*`` and ``?`` work as wildcards. 
        :param persist: Add/remove specified tags also to new tests added 
            to this suite in the future. 
        &quot;&quot;&quot;</span>
        <span class="s1">setter </span><span class="s3">= </span><span class="s1">TagSetter</span><span class="s3">(</span><span class="s1">add</span><span class="s3">, </span><span class="s1">remove</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">visit</span><span class="s3">(</span><span class="s1">setter</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">persist</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_my_visitors</span><span class="s3">.</span><span class="s1">append</span><span class="s3">(</span><span class="s1">setter</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">filter</span><span class="s3">(</span>
        <span class="s1">self</span><span class="s3">,</span>
        <span class="s1">included_suites</span><span class="s3">: </span><span class="s4">&quot;Sequence[str]|None&quot; </span><span class="s3">= </span><span class="s2">None</span><span class="s3">,</span>
        <span class="s1">included_tests</span><span class="s3">: </span><span class="s4">&quot;Sequence[str]|None&quot; </span><span class="s3">= </span><span class="s2">None</span><span class="s3">,</span>
        <span class="s1">included_tags</span><span class="s3">: </span><span class="s4">&quot;Sequence[str]|None&quot; </span><span class="s3">= </span><span class="s2">None</span><span class="s3">,</span>
        <span class="s1">excluded_tags</span><span class="s3">: </span><span class="s4">&quot;Sequence[str]|None&quot; </span><span class="s3">= </span><span class="s2">None</span><span class="s3">,</span>
    <span class="s3">):</span>
        <span class="s5">&quot;&quot;&quot;Select test cases and remove others from this suite. 
 
        Parameters have the same semantics as ``--suite``, ``--test``, 
        ``--include``, and ``--exclude`` command line options. All of them 
        can be given as a list of strings, or when selecting only one, as 
        a single string. 
 
        Child suites that contain no tests after filtering are automatically 
        removed. 
 
        Example:: 
 
            suite.filter(included_tests=['Test 1', '* Example'], 
                         included_tags='priority-1') 
        &quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">visit</span><span class="s3">(</span>
            <span class="s1">Filter</span><span class="s3">(</span><span class="s1">included_suites</span><span class="s3">, </span><span class="s1">included_tests</span><span class="s3">, </span><span class="s1">included_tags</span><span class="s3">, </span><span class="s1">excluded_tags</span><span class="s3">)</span>
        <span class="s3">)</span>

    <span class="s2">def </span><span class="s1">configure</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, **</span><span class="s1">options</span><span class="s3">):</span>
        <span class="s5">&quot;&quot;&quot;A shortcut to configure a suite using one method call. 
 
        Can only be used with the root test suite. 
 
        :param options: Passed to 
            :class:`~robot.model.configurer.SuiteConfigurer` that will then 
            set suite attributes, call :meth:`filter`, etc. as needed. 
 
        Not to be confused with :meth:`config` method that suites, tests, 
        and keywords have to make it possible to set multiple attributes in 
        one call. 
        &quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">parent </span><span class="s2">is not None</span><span class="s3">:</span>
            <span class="s2">raise </span><span class="s1">ValueError</span><span class="s3">(</span>
                <span class="s4">&quot;'TestSuite.configure()' can only be used with the root test suite.&quot;</span>
            <span class="s3">)</span>
        <span class="s2">if </span><span class="s1">options</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">visit</span><span class="s3">(</span><span class="s1">SuiteConfigurer</span><span class="s3">(**</span><span class="s1">options</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">remove_empty_suites</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">preserve_direct_children</span><span class="s3">: </span><span class="s1">bool </span><span class="s3">= </span><span class="s2">False</span><span class="s3">):</span>
        <span class="s5">&quot;&quot;&quot;Removes all child suites not containing any tests, recursively.&quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">visit</span><span class="s3">(</span><span class="s1">EmptySuiteRemover</span><span class="s3">(</span><span class="s1">preserve_direct_children</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">visit</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">visitor</span><span class="s3">: </span><span class="s1">SuiteVisitor</span><span class="s3">):</span>
        <span class="s5">&quot;&quot;&quot;:mod:`Visitor interface &lt;robot.model.visitor&gt;` entry-point.&quot;&quot;&quot;</span>
        <span class="s1">visitor</span><span class="s3">.</span><span class="s1">visit_suite</span><span class="s3">(</span><span class="s1">self</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">to_dict</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; </span><span class="s4">&quot;dict[str, Any]&quot;</span><span class="s3">:</span>
        <span class="s1">data</span><span class="s3">: </span><span class="s4">&quot;dict[str, Any]&quot; </span><span class="s3">= {</span><span class="s4">&quot;name&quot;</span><span class="s3">: </span><span class="s1">self</span><span class="s3">.</span><span class="s1">name</span><span class="s3">}</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">doc</span><span class="s3">:</span>
            <span class="s1">data</span><span class="s3">[</span><span class="s4">&quot;doc&quot;</span><span class="s3">] = </span><span class="s1">self</span><span class="s3">.</span><span class="s1">doc</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">metadata</span><span class="s3">:</span>
            <span class="s1">data</span><span class="s3">[</span><span class="s4">&quot;metadata&quot;</span><span class="s3">] = </span><span class="s1">dict</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">metadata</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">source</span><span class="s3">:</span>
            <span class="s1">data</span><span class="s3">[</span><span class="s4">&quot;source&quot;</span><span class="s3">] = </span><span class="s1">str</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">source</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">rpa</span><span class="s3">:</span>
            <span class="s1">data</span><span class="s3">[</span><span class="s4">&quot;rpa&quot;</span><span class="s3">] = </span><span class="s1">self</span><span class="s3">.</span><span class="s1">rpa</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">has_setup</span><span class="s3">:</span>
            <span class="s1">data</span><span class="s3">[</span><span class="s4">&quot;setup&quot;</span><span class="s3">] = </span><span class="s1">self</span><span class="s3">.</span><span class="s1">setup</span><span class="s3">.</span><span class="s1">to_dict</span><span class="s3">()</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">has_teardown</span><span class="s3">:</span>
            <span class="s1">data</span><span class="s3">[</span><span class="s4">&quot;teardown&quot;</span><span class="s3">] = </span><span class="s1">self</span><span class="s3">.</span><span class="s1">teardown</span><span class="s3">.</span><span class="s1">to_dict</span><span class="s3">()</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">tests</span><span class="s3">:</span>
            <span class="s1">data</span><span class="s3">[</span><span class="s4">&quot;tests&quot;</span><span class="s3">] = </span><span class="s1">self</span><span class="s3">.</span><span class="s1">tests</span><span class="s3">.</span><span class="s1">to_dicts</span><span class="s3">()</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">suites</span><span class="s3">:</span>
            <span class="s1">data</span><span class="s3">[</span><span class="s4">&quot;suites&quot;</span><span class="s3">] = </span><span class="s1">self</span><span class="s3">.</span><span class="s1">suites</span><span class="s3">.</span><span class="s1">to_dicts</span><span class="s3">()</span>
        <span class="s2">return </span><span class="s1">data</span>


<span class="s2">class </span><span class="s1">TestSuites</span><span class="s3">(</span><span class="s1">ItemList</span><span class="s3">[</span><span class="s1">TS</span><span class="s3">]):</span>
    <span class="s1">__slots__ </span><span class="s3">= ()</span>

    <span class="s2">def </span><span class="s1">__init__</span><span class="s3">(</span>
        <span class="s1">self</span><span class="s3">,</span>
        <span class="s1">suite_class</span><span class="s3">: </span><span class="s1">Type</span><span class="s3">[</span><span class="s1">TS</span><span class="s3">] = </span><span class="s1">TestSuite</span><span class="s3">,</span>
        <span class="s1">parent</span><span class="s3">: </span><span class="s4">&quot;TS|None&quot; </span><span class="s3">= </span><span class="s2">None</span><span class="s3">,</span>
        <span class="s1">suites</span><span class="s3">: </span><span class="s4">&quot;Sequence[TS|DataDict]&quot; </span><span class="s3">= (),</span>
    <span class="s3">):</span>
        <span class="s1">super</span><span class="s3">().</span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">suite_class</span><span class="s3">, {</span><span class="s4">&quot;parent&quot;</span><span class="s3">: </span><span class="s1">parent</span><span class="s3">}, </span><span class="s1">suites</span><span class="s3">)</span>
</pre>
</body>
</html>