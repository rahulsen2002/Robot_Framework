<html>
<head>
<title>convert.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #6aab73;}
.s4 { color: #2aacb8;}
.s5 { color: #7a7e85;}
.s6 { color: #5f826b; font-style: italic;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
convert.py</font>
</center></td></tr></table>
<pre><span class="s0">from </span><span class="s1">__future__ </span><span class="s0">import </span><span class="s1">annotations</span>

<span class="s0">import </span><span class="s1">os</span><span class="s2">.</span><span class="s1">path</span>
<span class="s0">import </span><span class="s1">re</span>
<span class="s0">from </span><span class="s1">abc </span><span class="s0">import </span><span class="s1">ABCMeta</span><span class="s2">, </span><span class="s1">abstractmethod</span>
<span class="s0">from </span><span class="s1">collections </span><span class="s0">import </span><span class="s1">defaultdict</span>
<span class="s0">from </span><span class="s1">collections</span><span class="s2">.</span><span class="s1">abc </span><span class="s0">import </span><span class="s1">Iterator</span>
<span class="s0">from </span><span class="s1">email</span><span class="s2">.</span><span class="s1">message </span><span class="s0">import </span><span class="s1">Message</span>
<span class="s0">from </span><span class="s1">email</span><span class="s2">.</span><span class="s1">parser </span><span class="s0">import </span><span class="s1">Parser</span>
<span class="s0">from </span><span class="s1">email</span><span class="s2">.</span><span class="s1">policy </span><span class="s0">import </span><span class="s1">EmailPolicy</span>
<span class="s0">from </span><span class="s1">glob </span><span class="s0">import </span><span class="s1">iglob</span>
<span class="s0">from </span><span class="s1">pathlib </span><span class="s0">import </span><span class="s1">Path</span>
<span class="s0">from </span><span class="s1">textwrap </span><span class="s0">import </span><span class="s1">dedent</span>
<span class="s0">from </span><span class="s1">zipfile </span><span class="s0">import </span><span class="s1">ZipFile</span>

<span class="s0">from </span><span class="s2">.. </span><span class="s0">import </span><span class="s1">__version__</span>
<span class="s0">from </span><span class="s2">..</span><span class="s1">metadata </span><span class="s0">import </span><span class="s1">generate_requirements</span>
<span class="s0">from </span><span class="s2">..</span><span class="s1">vendored</span><span class="s2">.</span><span class="s1">packaging</span><span class="s2">.</span><span class="s1">tags </span><span class="s0">import </span><span class="s1">parse_tag</span>
<span class="s0">from </span><span class="s2">..</span><span class="s1">wheelfile </span><span class="s0">import </span><span class="s1">WheelFile</span>

<span class="s1">egg_filename_re </span><span class="s2">= </span><span class="s1">re</span><span class="s2">.</span><span class="s1">compile</span><span class="s2">(</span>
    <span class="s3">r&quot;&quot;&quot; 
    (?P&lt;name&gt;.+?)-(?P&lt;ver&gt;.+?) 
    (-(?P&lt;pyver&gt;py\d\.\d+) 
     (-(?P&lt;arch&gt;.+?))? 
    )?.egg$&quot;&quot;&quot;</span><span class="s2">,</span>
    <span class="s1">re</span><span class="s2">.</span><span class="s1">VERBOSE</span><span class="s2">,</span>
<span class="s2">)</span>
<span class="s1">egg_info_re </span><span class="s2">= </span><span class="s1">re</span><span class="s2">.</span><span class="s1">compile</span><span class="s2">(</span>
    <span class="s3">r&quot;&quot;&quot; 
    ^(?P&lt;name&gt;.+?)-(?P&lt;ver&gt;.+?) 
    (-(?P&lt;pyver&gt;py\d\.\d+) 
    )?.egg-info/&quot;&quot;&quot;</span><span class="s2">,</span>
    <span class="s1">re</span><span class="s2">.</span><span class="s1">VERBOSE</span><span class="s2">,</span>
<span class="s2">)</span>
<span class="s1">wininst_re </span><span class="s2">= </span><span class="s1">re</span><span class="s2">.</span><span class="s1">compile</span><span class="s2">(</span>
    <span class="s3">r&quot;\.(?P&lt;platform&gt;win32|win-amd64)(?:-(?P&lt;pyver&gt;py\d\.\d))?\.exe$&quot;</span>
<span class="s2">)</span>
<span class="s1">pyd_re </span><span class="s2">= </span><span class="s1">re</span><span class="s2">.</span><span class="s1">compile</span><span class="s2">(</span><span class="s3">r&quot;\.(?P&lt;abi&gt;[a-z0-9]+)-(?P&lt;platform&gt;win32|win_amd64)\.pyd$&quot;</span><span class="s2">)</span>
<span class="s1">serialization_policy </span><span class="s2">= </span><span class="s1">EmailPolicy</span><span class="s2">(</span>
    <span class="s1">utf8</span><span class="s2">=</span><span class="s0">True</span><span class="s2">,</span>
    <span class="s1">mangle_from_</span><span class="s2">=</span><span class="s0">False</span><span class="s2">,</span>
    <span class="s1">max_line_length</span><span class="s2">=</span><span class="s4">0</span><span class="s2">,</span>
<span class="s2">)</span>
<span class="s1">GENERATOR </span><span class="s2">= </span><span class="s3">f&quot;wheel </span><span class="s0">{</span><span class="s1">__version__</span><span class="s0">}</span><span class="s3">&quot;</span>


<span class="s0">def </span><span class="s1">convert_requires</span><span class="s2">(</span><span class="s1">requires</span><span class="s2">: </span><span class="s1">str</span><span class="s2">, </span><span class="s1">metadata</span><span class="s2">: </span><span class="s1">Message</span><span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">:</span>
    <span class="s1">extra</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span>
    <span class="s1">requirements</span><span class="s2">: </span><span class="s1">dict</span><span class="s2">[</span><span class="s1">str </span><span class="s2">| </span><span class="s0">None</span><span class="s2">, </span><span class="s1">list</span><span class="s2">[</span><span class="s1">str</span><span class="s2">]] = </span><span class="s1">defaultdict</span><span class="s2">(</span><span class="s1">list</span><span class="s2">)</span>
    <span class="s0">for </span><span class="s1">line </span><span class="s0">in </span><span class="s1">requires</span><span class="s2">.</span><span class="s1">splitlines</span><span class="s2">():</span>
        <span class="s1">line </span><span class="s2">= </span><span class="s1">line</span><span class="s2">.</span><span class="s1">strip</span><span class="s2">()</span>
        <span class="s0">if not </span><span class="s1">line</span><span class="s2">:</span>
            <span class="s0">continue</span>

        <span class="s0">if </span><span class="s1">line</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s3">&quot;[&quot;</span><span class="s2">) </span><span class="s0">and </span><span class="s1">line</span><span class="s2">.</span><span class="s1">endswith</span><span class="s2">(</span><span class="s3">&quot;]&quot;</span><span class="s2">):</span>
            <span class="s1">extra </span><span class="s2">= </span><span class="s1">line</span><span class="s2">[</span><span class="s4">1</span><span class="s2">:-</span><span class="s4">1</span><span class="s2">]</span>
            <span class="s0">continue</span>

        <span class="s1">requirements</span><span class="s2">[</span><span class="s1">extra</span><span class="s2">].</span><span class="s1">append</span><span class="s2">(</span><span class="s1">line</span><span class="s2">)</span>

    <span class="s0">for </span><span class="s1">key</span><span class="s2">, </span><span class="s1">value </span><span class="s0">in </span><span class="s1">generate_requirements</span><span class="s2">(</span><span class="s1">requirements</span><span class="s2">):</span>
        <span class="s1">metadata</span><span class="s2">.</span><span class="s1">add_header</span><span class="s2">(</span><span class="s1">key</span><span class="s2">, </span><span class="s1">value</span><span class="s2">)</span>


<span class="s0">def </span><span class="s1">convert_pkg_info</span><span class="s2">(</span><span class="s1">pkginfo</span><span class="s2">: </span><span class="s1">str</span><span class="s2">, </span><span class="s1">metadata</span><span class="s2">: </span><span class="s1">Message</span><span class="s2">):</span>
    <span class="s1">parsed_message </span><span class="s2">= </span><span class="s1">Parser</span><span class="s2">().</span><span class="s1">parsestr</span><span class="s2">(</span><span class="s1">pkginfo</span><span class="s2">)</span>
    <span class="s0">for </span><span class="s1">key</span><span class="s2">, </span><span class="s1">value </span><span class="s0">in </span><span class="s1">parsed_message</span><span class="s2">.</span><span class="s1">items</span><span class="s2">():</span>
        <span class="s1">key_lower </span><span class="s2">= </span><span class="s1">key</span><span class="s2">.</span><span class="s1">lower</span><span class="s2">()</span>
        <span class="s0">if </span><span class="s1">value </span><span class="s2">== </span><span class="s3">&quot;UNKNOWN&quot;</span><span class="s2">:</span>
            <span class="s0">continue</span>

        <span class="s0">if </span><span class="s1">key_lower </span><span class="s2">== </span><span class="s3">&quot;description&quot;</span><span class="s2">:</span>
            <span class="s1">description_lines </span><span class="s2">= </span><span class="s1">value</span><span class="s2">.</span><span class="s1">splitlines</span><span class="s2">()</span>
            <span class="s1">value </span><span class="s2">= </span><span class="s3">&quot;</span><span class="s0">\n</span><span class="s3">&quot;</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span>
                <span class="s2">(</span>
                    <span class="s1">description_lines</span><span class="s2">[</span><span class="s4">0</span><span class="s2">].</span><span class="s1">lstrip</span><span class="s2">(),</span>
                    <span class="s1">dedent</span><span class="s2">(</span><span class="s3">&quot;</span><span class="s0">\n</span><span class="s3">&quot;</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s1">description_lines</span><span class="s2">[</span><span class="s4">1</span><span class="s2">:])),</span>
                    <span class="s3">&quot;</span><span class="s0">\n</span><span class="s3">&quot;</span><span class="s2">,</span>
                <span class="s2">)</span>
            <span class="s2">)</span>
            <span class="s1">metadata</span><span class="s2">.</span><span class="s1">set_payload</span><span class="s2">(</span><span class="s1">value</span><span class="s2">)</span>
        <span class="s0">elif </span><span class="s1">key_lower </span><span class="s2">== </span><span class="s3">&quot;home-page&quot;</span><span class="s2">:</span>
            <span class="s1">metadata</span><span class="s2">.</span><span class="s1">add_header</span><span class="s2">(</span><span class="s3">&quot;Project-URL&quot;</span><span class="s2">, </span><span class="s3">f&quot;Homepage, </span><span class="s0">{</span><span class="s1">value</span><span class="s0">}</span><span class="s3">&quot;</span><span class="s2">)</span>
        <span class="s0">elif </span><span class="s1">key_lower </span><span class="s2">== </span><span class="s3">&quot;download-url&quot;</span><span class="s2">:</span>
            <span class="s1">metadata</span><span class="s2">.</span><span class="s1">add_header</span><span class="s2">(</span><span class="s3">&quot;Project-URL&quot;</span><span class="s2">, </span><span class="s3">f&quot;Download, </span><span class="s0">{</span><span class="s1">value</span><span class="s0">}</span><span class="s3">&quot;</span><span class="s2">)</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">metadata</span><span class="s2">.</span><span class="s1">add_header</span><span class="s2">(</span><span class="s1">key</span><span class="s2">, </span><span class="s1">value</span><span class="s2">)</span>

    <span class="s1">metadata</span><span class="s2">.</span><span class="s1">replace_header</span><span class="s2">(</span><span class="s3">&quot;Metadata-Version&quot;</span><span class="s2">, </span><span class="s3">&quot;2.4&quot;</span><span class="s2">)</span>


<span class="s0">def </span><span class="s1">normalize</span><span class="s2">(</span><span class="s1">name</span><span class="s2">: </span><span class="s1">str</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">:</span>
    <span class="s0">return </span><span class="s1">re</span><span class="s2">.</span><span class="s1">sub</span><span class="s2">(</span><span class="s3">r&quot;[-_.]+&quot;</span><span class="s2">, </span><span class="s3">&quot;-&quot;</span><span class="s2">, </span><span class="s1">name</span><span class="s2">).</span><span class="s1">lower</span><span class="s2">().</span><span class="s1">replace</span><span class="s2">(</span><span class="s3">&quot;-&quot;</span><span class="s2">, </span><span class="s3">&quot;_&quot;</span><span class="s2">)</span>


<span class="s0">class </span><span class="s1">ConvertSource</span><span class="s2">(</span><span class="s1">metaclass</span><span class="s2">=</span><span class="s1">ABCMeta</span><span class="s2">):</span>
    <span class="s1">name</span><span class="s2">: </span><span class="s1">str</span>
    <span class="s1">version</span><span class="s2">: </span><span class="s1">str</span>
    <span class="s1">pyver</span><span class="s2">: </span><span class="s1">str </span><span class="s2">= </span><span class="s3">&quot;py2.py3&quot;</span>
    <span class="s1">abi</span><span class="s2">: </span><span class="s1">str </span><span class="s2">= </span><span class="s3">&quot;none&quot;</span>
    <span class="s1">platform</span><span class="s2">: </span><span class="s1">str </span><span class="s2">= </span><span class="s3">&quot;any&quot;</span>
    <span class="s1">metadata</span><span class="s2">: </span><span class="s1">Message</span>

    <span class="s2">@</span><span class="s1">property</span>
    <span class="s0">def </span><span class="s1">dist_info_dir</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">:</span>
        <span class="s0">return </span><span class="s3">f&quot;</span><span class="s0">{</span><span class="s1">self</span><span class="s2">.</span><span class="s1">name</span><span class="s0">}</span><span class="s3">-</span><span class="s0">{</span><span class="s1">self</span><span class="s2">.</span><span class="s1">version</span><span class="s0">}</span><span class="s3">.dist-info&quot;</span>

    <span class="s2">@</span><span class="s1">abstractmethod</span>
    <span class="s0">def </span><span class="s1">generate_contents</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; Iterator</span><span class="s2">[</span><span class="s1">tuple</span><span class="s2">[</span><span class="s1">str</span><span class="s2">, </span><span class="s1">bytes</span><span class="s2">]]:</span>
        <span class="s0">pass</span>


<span class="s0">class </span><span class="s1">EggFileSource</span><span class="s2">(</span><span class="s1">ConvertSource</span><span class="s2">):</span>
    <span class="s0">def </span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">path</span><span class="s2">: </span><span class="s1">Path</span><span class="s2">):</span>
        <span class="s0">if not </span><span class="s2">(</span><span class="s1">match </span><span class="s2">:= </span><span class="s1">egg_filename_re</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s1">path</span><span class="s2">.</span><span class="s1">name</span><span class="s2">)):</span>
            <span class="s0">raise </span><span class="s1">ValueError</span><span class="s2">(</span><span class="s3">f&quot;Invalid egg file name: </span><span class="s0">{</span><span class="s1">path</span><span class="s2">.</span><span class="s1">name</span><span class="s0">}</span><span class="s3">&quot;</span><span class="s2">)</span>

        <span class="s5"># Binary wheels are assumed to be for CPython</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">path </span><span class="s2">= </span><span class="s1">path</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">name </span><span class="s2">= </span><span class="s1">normalize</span><span class="s2">(</span><span class="s1">match</span><span class="s2">.</span><span class="s1">group</span><span class="s2">(</span><span class="s3">&quot;name&quot;</span><span class="s2">))</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">version </span><span class="s2">= </span><span class="s1">match</span><span class="s2">.</span><span class="s1">group</span><span class="s2">(</span><span class="s3">&quot;ver&quot;</span><span class="s2">)</span>
        <span class="s0">if </span><span class="s1">pyver </span><span class="s2">:= </span><span class="s1">match</span><span class="s2">.</span><span class="s1">group</span><span class="s2">(</span><span class="s3">&quot;pyver&quot;</span><span class="s2">):</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">pyver </span><span class="s2">= </span><span class="s1">pyver</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s3">&quot;.&quot;</span><span class="s2">, </span><span class="s3">&quot;&quot;</span><span class="s2">)</span>
            <span class="s0">if </span><span class="s1">arch </span><span class="s2">:= </span><span class="s1">match</span><span class="s2">.</span><span class="s1">group</span><span class="s2">(</span><span class="s3">&quot;arch&quot;</span><span class="s2">):</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">abi </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">pyver</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s3">&quot;py&quot;</span><span class="s2">, </span><span class="s3">&quot;cp&quot;</span><span class="s2">)</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">platform </span><span class="s2">= </span><span class="s1">normalize</span><span class="s2">(</span><span class="s1">arch</span><span class="s2">)</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">metadata </span><span class="s2">= </span><span class="s1">Message</span><span class="s2">()</span>

    <span class="s0">def </span><span class="s1">generate_contents</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; Iterator</span><span class="s2">[</span><span class="s1">tuple</span><span class="s2">[</span><span class="s1">str</span><span class="s2">, </span><span class="s1">bytes</span><span class="s2">]]:</span>
        <span class="s0">with </span><span class="s1">ZipFile</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">path</span><span class="s2">, </span><span class="s3">&quot;r&quot;</span><span class="s2">) </span><span class="s0">as </span><span class="s1">zip_file</span><span class="s2">:</span>
            <span class="s0">for </span><span class="s1">filename </span><span class="s0">in </span><span class="s1">sorted</span><span class="s2">(</span><span class="s1">zip_file</span><span class="s2">.</span><span class="s1">namelist</span><span class="s2">()):</span>
                <span class="s5"># Skip pure directory entries</span>
                <span class="s0">if </span><span class="s1">filename</span><span class="s2">.</span><span class="s1">endswith</span><span class="s2">(</span><span class="s3">&quot;/&quot;</span><span class="s2">):</span>
                    <span class="s0">continue</span>

                <span class="s5"># Handle files in the egg-info directory specially, selectively moving</span>
                <span class="s5"># them to the dist-info directory while converting as needed</span>
                <span class="s0">if </span><span class="s1">filename</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s3">&quot;EGG-INFO/&quot;</span><span class="s2">):</span>
                    <span class="s0">if </span><span class="s1">filename </span><span class="s2">== </span><span class="s3">&quot;EGG-INFO/requires.txt&quot;</span><span class="s2">:</span>
                        <span class="s1">requires </span><span class="s2">= </span><span class="s1">zip_file</span><span class="s2">.</span><span class="s1">read</span><span class="s2">(</span><span class="s1">filename</span><span class="s2">).</span><span class="s1">decode</span><span class="s2">(</span><span class="s3">&quot;utf-8&quot;</span><span class="s2">)</span>
                        <span class="s1">convert_requires</span><span class="s2">(</span><span class="s1">requires</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">metadata</span><span class="s2">)</span>
                    <span class="s0">elif </span><span class="s1">filename </span><span class="s2">== </span><span class="s3">&quot;EGG-INFO/PKG-INFO&quot;</span><span class="s2">:</span>
                        <span class="s1">pkginfo </span><span class="s2">= </span><span class="s1">zip_file</span><span class="s2">.</span><span class="s1">read</span><span class="s2">(</span><span class="s1">filename</span><span class="s2">).</span><span class="s1">decode</span><span class="s2">(</span><span class="s3">&quot;utf-8&quot;</span><span class="s2">)</span>
                        <span class="s1">convert_pkg_info</span><span class="s2">(</span><span class="s1">pkginfo</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">metadata</span><span class="s2">)</span>
                    <span class="s0">elif </span><span class="s1">filename </span><span class="s2">== </span><span class="s3">&quot;EGG-INFO/entry_points.txt&quot;</span><span class="s2">:</span>
                        <span class="s0">yield </span><span class="s2">(</span>
                            <span class="s3">f&quot;</span><span class="s0">{</span><span class="s1">self</span><span class="s2">.</span><span class="s1">dist_info_dir</span><span class="s0">}</span><span class="s3">/entry_points.txt&quot;</span><span class="s2">,</span>
                            <span class="s1">zip_file</span><span class="s2">.</span><span class="s1">read</span><span class="s2">(</span><span class="s1">filename</span><span class="s2">),</span>
                        <span class="s2">)</span>

                    <span class="s0">continue</span>

                <span class="s5"># For any other file, just pass it through</span>
                <span class="s0">yield </span><span class="s1">filename</span><span class="s2">, </span><span class="s1">zip_file</span><span class="s2">.</span><span class="s1">read</span><span class="s2">(</span><span class="s1">filename</span><span class="s2">)</span>


<span class="s0">class </span><span class="s1">EggDirectorySource</span><span class="s2">(</span><span class="s1">EggFileSource</span><span class="s2">):</span>
    <span class="s0">def </span><span class="s1">generate_contents</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; Iterator</span><span class="s2">[</span><span class="s1">tuple</span><span class="s2">[</span><span class="s1">str</span><span class="s2">, </span><span class="s1">bytes</span><span class="s2">]]:</span>
        <span class="s0">for </span><span class="s1">dirpath</span><span class="s2">, </span><span class="s1">_</span><span class="s2">, </span><span class="s1">filenames </span><span class="s0">in </span><span class="s1">os</span><span class="s2">.</span><span class="s1">walk</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">path</span><span class="s2">):</span>
            <span class="s0">for </span><span class="s1">filename </span><span class="s0">in </span><span class="s1">sorted</span><span class="s2">(</span><span class="s1">filenames</span><span class="s2">):</span>
                <span class="s1">path </span><span class="s2">= </span><span class="s1">Path</span><span class="s2">(</span><span class="s1">dirpath</span><span class="s2">, </span><span class="s1">filename</span><span class="s2">)</span>
                <span class="s0">if </span><span class="s1">path</span><span class="s2">.</span><span class="s1">parent</span><span class="s2">.</span><span class="s1">name </span><span class="s2">== </span><span class="s3">&quot;EGG-INFO&quot;</span><span class="s2">:</span>
                    <span class="s0">if </span><span class="s1">path</span><span class="s2">.</span><span class="s1">name </span><span class="s2">== </span><span class="s3">&quot;requires.txt&quot;</span><span class="s2">:</span>
                        <span class="s1">requires </span><span class="s2">= </span><span class="s1">path</span><span class="s2">.</span><span class="s1">read_text</span><span class="s2">(</span><span class="s3">&quot;utf-8&quot;</span><span class="s2">)</span>
                        <span class="s1">convert_requires</span><span class="s2">(</span><span class="s1">requires</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">metadata</span><span class="s2">)</span>
                    <span class="s0">elif </span><span class="s1">path</span><span class="s2">.</span><span class="s1">name </span><span class="s2">== </span><span class="s3">&quot;PKG-INFO&quot;</span><span class="s2">:</span>
                        <span class="s1">pkginfo </span><span class="s2">= </span><span class="s1">path</span><span class="s2">.</span><span class="s1">read_text</span><span class="s2">(</span><span class="s3">&quot;utf-8&quot;</span><span class="s2">)</span>
                        <span class="s1">convert_pkg_info</span><span class="s2">(</span><span class="s1">pkginfo</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">metadata</span><span class="s2">)</span>
                        <span class="s0">if </span><span class="s1">name </span><span class="s2">:= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">metadata</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s3">&quot;Name&quot;</span><span class="s2">):</span>
                            <span class="s1">self</span><span class="s2">.</span><span class="s1">name </span><span class="s2">= </span><span class="s1">normalize</span><span class="s2">(</span><span class="s1">name</span><span class="s2">)</span>

                        <span class="s0">if </span><span class="s1">version </span><span class="s2">:= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">metadata</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s3">&quot;Version&quot;</span><span class="s2">):</span>
                            <span class="s1">self</span><span class="s2">.</span><span class="s1">version </span><span class="s2">= </span><span class="s1">version</span>
                    <span class="s0">elif </span><span class="s1">path</span><span class="s2">.</span><span class="s1">name </span><span class="s2">== </span><span class="s3">&quot;entry_points.txt&quot;</span><span class="s2">:</span>
                        <span class="s0">yield </span><span class="s2">(</span>
                            <span class="s3">f&quot;</span><span class="s0">{</span><span class="s1">self</span><span class="s2">.</span><span class="s1">dist_info_dir</span><span class="s0">}</span><span class="s3">/entry_points.txt&quot;</span><span class="s2">,</span>
                            <span class="s1">path</span><span class="s2">.</span><span class="s1">read_bytes</span><span class="s2">(),</span>
                        <span class="s2">)</span>

                    <span class="s0">continue</span>

                <span class="s5"># For any other file, just pass it through</span>
                <span class="s0">yield </span><span class="s1">str</span><span class="s2">(</span><span class="s1">path</span><span class="s2">.</span><span class="s1">relative_to</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">path</span><span class="s2">)), </span><span class="s1">path</span><span class="s2">.</span><span class="s1">read_bytes</span><span class="s2">()</span>


<span class="s0">class </span><span class="s1">WininstFileSource</span><span class="s2">(</span><span class="s1">ConvertSource</span><span class="s2">):</span>
    <span class="s6">&quot;&quot;&quot; 
    Handles distributions created with ``bdist_wininst``. 
 
    The egginfo filename has the format:: 
 
        name-ver(-pyver)(-arch).egg-info 
 
    The installer filename has the format:: 
 
        name-ver.arch(-pyver).exe 
 
    Some things to note: 
 
    1. The installer filename is not definitive. An installer can be renamed 
       and work perfectly well as an installer. So more reliable data should 
       be used whenever possible. 
    2. The egg-info data should be preferred for the name and version, because 
       these come straight from the distutils metadata, and are mandatory. 
    3. The pyver from the egg-info data should be ignored, as it is 
       constructed from the version of Python used to build the installer, 
       which is irrelevant - the installer filename is correct here (even to 
       the point that when it's not there, any version is implied). 
    4. The architecture must be taken from the installer filename, as it is 
       not included in the egg-info data. 
    5. Architecture-neutral installers still have an architecture because the 
       installer format itself (being executable) is architecture-specific. We 
       should therefore ignore the architecture if the content is pure-python. 
    &quot;&quot;&quot;</span>

    <span class="s0">def </span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">path</span><span class="s2">: </span><span class="s1">Path</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">path </span><span class="s2">= </span><span class="s1">path</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">metadata </span><span class="s2">= </span><span class="s1">Message</span><span class="s2">()</span>

        <span class="s5"># Determine the initial architecture and Python version from the file name</span>
        <span class="s5"># (if possible)</span>
        <span class="s0">if </span><span class="s1">match </span><span class="s2">:= </span><span class="s1">wininst_re</span><span class="s2">.</span><span class="s1">search</span><span class="s2">(</span><span class="s1">path</span><span class="s2">.</span><span class="s1">name</span><span class="s2">):</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">platform </span><span class="s2">= </span><span class="s1">normalize</span><span class="s2">(</span><span class="s1">match</span><span class="s2">.</span><span class="s1">group</span><span class="s2">(</span><span class="s3">&quot;platform&quot;</span><span class="s2">))</span>
            <span class="s0">if </span><span class="s1">pyver </span><span class="s2">:= </span><span class="s1">match</span><span class="s2">.</span><span class="s1">group</span><span class="s2">(</span><span class="s3">&quot;pyver&quot;</span><span class="s2">):</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">pyver </span><span class="s2">= </span><span class="s1">pyver</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s3">&quot;.&quot;</span><span class="s2">, </span><span class="s3">&quot;&quot;</span><span class="s2">)</span>

        <span class="s5"># Look for an .egg-info directory and any .pyd files for more precise info</span>
        <span class="s1">egg_info_found </span><span class="s2">= </span><span class="s1">pyd_found </span><span class="s2">= </span><span class="s0">False</span>
        <span class="s0">with </span><span class="s1">ZipFile</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">path</span><span class="s2">) </span><span class="s0">as </span><span class="s1">zip_file</span><span class="s2">:</span>
            <span class="s0">for </span><span class="s1">filename </span><span class="s0">in </span><span class="s1">zip_file</span><span class="s2">.</span><span class="s1">namelist</span><span class="s2">():</span>
                <span class="s1">prefix</span><span class="s2">, </span><span class="s1">filename </span><span class="s2">= </span><span class="s1">filename</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s3">&quot;/&quot;</span><span class="s2">, </span><span class="s4">1</span><span class="s2">)</span>
                <span class="s0">if not </span><span class="s1">egg_info_found </span><span class="s0">and </span><span class="s2">(</span><span class="s1">match </span><span class="s2">:= </span><span class="s1">egg_info_re</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s1">filename</span><span class="s2">)):</span>
                    <span class="s1">egg_info_found </span><span class="s2">= </span><span class="s0">True</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">name </span><span class="s2">= </span><span class="s1">normalize</span><span class="s2">(</span><span class="s1">match</span><span class="s2">.</span><span class="s1">group</span><span class="s2">(</span><span class="s3">&quot;name&quot;</span><span class="s2">))</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">version </span><span class="s2">= </span><span class="s1">match</span><span class="s2">.</span><span class="s1">group</span><span class="s2">(</span><span class="s3">&quot;ver&quot;</span><span class="s2">)</span>
                    <span class="s0">if </span><span class="s1">pyver </span><span class="s2">:= </span><span class="s1">match</span><span class="s2">.</span><span class="s1">group</span><span class="s2">(</span><span class="s3">&quot;pyver&quot;</span><span class="s2">):</span>
                        <span class="s1">self</span><span class="s2">.</span><span class="s1">pyver </span><span class="s2">= </span><span class="s1">pyver</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s3">&quot;.&quot;</span><span class="s2">, </span><span class="s3">&quot;&quot;</span><span class="s2">)</span>
                <span class="s0">elif not </span><span class="s1">pyd_found </span><span class="s0">and </span><span class="s2">(</span><span class="s1">match </span><span class="s2">:= </span><span class="s1">pyd_re</span><span class="s2">.</span><span class="s1">search</span><span class="s2">(</span><span class="s1">filename</span><span class="s2">)):</span>
                    <span class="s1">pyd_found </span><span class="s2">= </span><span class="s0">True</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">abi </span><span class="s2">= </span><span class="s1">match</span><span class="s2">.</span><span class="s1">group</span><span class="s2">(</span><span class="s3">&quot;abi&quot;</span><span class="s2">)</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">platform </span><span class="s2">= </span><span class="s1">match</span><span class="s2">.</span><span class="s1">group</span><span class="s2">(</span><span class="s3">&quot;platform&quot;</span><span class="s2">)</span>

                <span class="s0">if </span><span class="s1">egg_info_found </span><span class="s0">and </span><span class="s1">pyd_found</span><span class="s2">:</span>
                    <span class="s0">break</span>

    <span class="s0">def </span><span class="s1">generate_contents</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; Iterator</span><span class="s2">[</span><span class="s1">tuple</span><span class="s2">[</span><span class="s1">str</span><span class="s2">, </span><span class="s1">bytes</span><span class="s2">]]:</span>
        <span class="s1">dist_info_dir </span><span class="s2">= </span><span class="s3">f&quot;</span><span class="s0">{</span><span class="s1">self</span><span class="s2">.</span><span class="s1">name</span><span class="s0">}</span><span class="s3">-</span><span class="s0">{</span><span class="s1">self</span><span class="s2">.</span><span class="s1">version</span><span class="s0">}</span><span class="s3">.dist-info&quot;</span>
        <span class="s1">data_dir </span><span class="s2">= </span><span class="s3">f&quot;</span><span class="s0">{</span><span class="s1">self</span><span class="s2">.</span><span class="s1">name</span><span class="s0">}</span><span class="s3">-</span><span class="s0">{</span><span class="s1">self</span><span class="s2">.</span><span class="s1">version</span><span class="s0">}</span><span class="s3">.data&quot;</span>
        <span class="s0">with </span><span class="s1">ZipFile</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">path</span><span class="s2">, </span><span class="s3">&quot;r&quot;</span><span class="s2">) </span><span class="s0">as </span><span class="s1">zip_file</span><span class="s2">:</span>
            <span class="s0">for </span><span class="s1">filename </span><span class="s0">in </span><span class="s1">sorted</span><span class="s2">(</span><span class="s1">zip_file</span><span class="s2">.</span><span class="s1">namelist</span><span class="s2">()):</span>
                <span class="s5"># Skip pure directory entries</span>
                <span class="s0">if </span><span class="s1">filename</span><span class="s2">.</span><span class="s1">endswith</span><span class="s2">(</span><span class="s3">&quot;/&quot;</span><span class="s2">):</span>
                    <span class="s0">continue</span>

                <span class="s5"># Handle files in the egg-info directory specially, selectively moving</span>
                <span class="s5"># them to the dist-info directory while converting as needed</span>
                <span class="s1">prefix</span><span class="s2">, </span><span class="s1">target_filename </span><span class="s2">= </span><span class="s1">filename</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s3">&quot;/&quot;</span><span class="s2">, </span><span class="s4">1</span><span class="s2">)</span>
                <span class="s0">if </span><span class="s1">egg_info_re</span><span class="s2">.</span><span class="s1">search</span><span class="s2">(</span><span class="s1">target_filename</span><span class="s2">):</span>
                    <span class="s1">basename </span><span class="s2">= </span><span class="s1">target_filename</span><span class="s2">.</span><span class="s1">rsplit</span><span class="s2">(</span><span class="s3">&quot;/&quot;</span><span class="s2">, </span><span class="s4">1</span><span class="s2">)[-</span><span class="s4">1</span><span class="s2">]</span>
                    <span class="s0">if </span><span class="s1">basename </span><span class="s2">== </span><span class="s3">&quot;requires.txt&quot;</span><span class="s2">:</span>
                        <span class="s1">requires </span><span class="s2">= </span><span class="s1">zip_file</span><span class="s2">.</span><span class="s1">read</span><span class="s2">(</span><span class="s1">filename</span><span class="s2">).</span><span class="s1">decode</span><span class="s2">(</span><span class="s3">&quot;utf-8&quot;</span><span class="s2">)</span>
                        <span class="s1">convert_requires</span><span class="s2">(</span><span class="s1">requires</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">metadata</span><span class="s2">)</span>
                    <span class="s0">elif </span><span class="s1">basename </span><span class="s2">== </span><span class="s3">&quot;PKG-INFO&quot;</span><span class="s2">:</span>
                        <span class="s1">pkginfo </span><span class="s2">= </span><span class="s1">zip_file</span><span class="s2">.</span><span class="s1">read</span><span class="s2">(</span><span class="s1">filename</span><span class="s2">).</span><span class="s1">decode</span><span class="s2">(</span><span class="s3">&quot;utf-8&quot;</span><span class="s2">)</span>
                        <span class="s1">convert_pkg_info</span><span class="s2">(</span><span class="s1">pkginfo</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">metadata</span><span class="s2">)</span>
                    <span class="s0">elif </span><span class="s1">basename </span><span class="s2">== </span><span class="s3">&quot;entry_points.txt&quot;</span><span class="s2">:</span>
                        <span class="s0">yield </span><span class="s2">(</span>
                            <span class="s3">f&quot;</span><span class="s0">{</span><span class="s1">dist_info_dir</span><span class="s0">}</span><span class="s3">/entry_points.txt&quot;</span><span class="s2">,</span>
                            <span class="s1">zip_file</span><span class="s2">.</span><span class="s1">read</span><span class="s2">(</span><span class="s1">filename</span><span class="s2">),</span>
                        <span class="s2">)</span>

                    <span class="s0">continue</span>
                <span class="s0">elif </span><span class="s1">prefix </span><span class="s2">== </span><span class="s3">&quot;SCRIPTS&quot;</span><span class="s2">:</span>
                    <span class="s1">target_filename </span><span class="s2">= </span><span class="s3">f&quot;</span><span class="s0">{</span><span class="s1">data_dir</span><span class="s0">}</span><span class="s3">/scripts/</span><span class="s0">{</span><span class="s1">target_filename</span><span class="s0">}</span><span class="s3">&quot;</span>

                <span class="s5"># For any other file, just pass it through</span>
                <span class="s0">yield </span><span class="s1">target_filename</span><span class="s2">, </span><span class="s1">zip_file</span><span class="s2">.</span><span class="s1">read</span><span class="s2">(</span><span class="s1">filename</span><span class="s2">)</span>


<span class="s0">def </span><span class="s1">convert</span><span class="s2">(</span><span class="s1">files</span><span class="s2">: </span><span class="s1">list</span><span class="s2">[</span><span class="s1">str</span><span class="s2">], </span><span class="s1">dest_dir</span><span class="s2">: </span><span class="s1">str</span><span class="s2">, </span><span class="s1">verbose</span><span class="s2">: </span><span class="s1">bool</span><span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">:</span>
    <span class="s0">for </span><span class="s1">pat </span><span class="s0">in </span><span class="s1">files</span><span class="s2">:</span>
        <span class="s0">for </span><span class="s1">archive </span><span class="s0">in </span><span class="s1">iglob</span><span class="s2">(</span><span class="s1">pat</span><span class="s2">):</span>
            <span class="s1">path </span><span class="s2">= </span><span class="s1">Path</span><span class="s2">(</span><span class="s1">archive</span><span class="s2">)</span>
            <span class="s0">if </span><span class="s1">path</span><span class="s2">.</span><span class="s1">suffix </span><span class="s2">== </span><span class="s3">&quot;.egg&quot;</span><span class="s2">:</span>
                <span class="s0">if </span><span class="s1">path</span><span class="s2">.</span><span class="s1">is_dir</span><span class="s2">():</span>
                    <span class="s1">source</span><span class="s2">: </span><span class="s1">ConvertSource </span><span class="s2">= </span><span class="s1">EggDirectorySource</span><span class="s2">(</span><span class="s1">path</span><span class="s2">)</span>
                <span class="s0">else</span><span class="s2">:</span>
                    <span class="s1">source </span><span class="s2">= </span><span class="s1">EggFileSource</span><span class="s2">(</span><span class="s1">path</span><span class="s2">)</span>
            <span class="s0">else</span><span class="s2">:</span>
                <span class="s1">source </span><span class="s2">= </span><span class="s1">WininstFileSource</span><span class="s2">(</span><span class="s1">path</span><span class="s2">)</span>

            <span class="s0">if </span><span class="s1">verbose</span><span class="s2">:</span>
                <span class="s1">print</span><span class="s2">(</span><span class="s3">f&quot;</span><span class="s0">{</span><span class="s1">archive</span><span class="s0">}</span><span class="s3">...&quot;</span><span class="s2">, </span><span class="s1">flush</span><span class="s2">=</span><span class="s0">True</span><span class="s2">, </span><span class="s1">end</span><span class="s2">=</span><span class="s3">&quot;&quot;</span><span class="s2">)</span>

            <span class="s1">dest_path </span><span class="s2">= </span><span class="s1">Path</span><span class="s2">(</span><span class="s1">dest_dir</span><span class="s2">) / (</span>
                <span class="s3">f&quot;</span><span class="s0">{</span><span class="s1">source</span><span class="s2">.</span><span class="s1">name</span><span class="s0">}</span><span class="s3">-</span><span class="s0">{</span><span class="s1">source</span><span class="s2">.</span><span class="s1">version</span><span class="s0">}</span><span class="s3">-</span><span class="s0">{</span><span class="s1">source</span><span class="s2">.</span><span class="s1">pyver</span><span class="s0">}</span><span class="s3">-</span><span class="s0">{</span><span class="s1">source</span><span class="s2">.</span><span class="s1">abi</span><span class="s0">}</span><span class="s3">&quot;</span>
                <span class="s3">f&quot;-</span><span class="s0">{</span><span class="s1">source</span><span class="s2">.</span><span class="s1">platform</span><span class="s0">}</span><span class="s3">.whl&quot;</span>
            <span class="s2">)</span>
            <span class="s0">with </span><span class="s1">WheelFile</span><span class="s2">(</span><span class="s1">dest_path</span><span class="s2">, </span><span class="s3">&quot;w&quot;</span><span class="s2">) </span><span class="s0">as </span><span class="s1">wheelfile</span><span class="s2">:</span>
                <span class="s0">for </span><span class="s1">name_or_zinfo</span><span class="s2">, </span><span class="s1">contents </span><span class="s0">in </span><span class="s1">source</span><span class="s2">.</span><span class="s1">generate_contents</span><span class="s2">():</span>
                    <span class="s1">wheelfile</span><span class="s2">.</span><span class="s1">writestr</span><span class="s2">(</span><span class="s1">name_or_zinfo</span><span class="s2">, </span><span class="s1">contents</span><span class="s2">)</span>

                <span class="s5"># Write the METADATA file</span>
                <span class="s1">wheelfile</span><span class="s2">.</span><span class="s1">writestr</span><span class="s2">(</span>
                    <span class="s3">f&quot;</span><span class="s0">{</span><span class="s1">source</span><span class="s2">.</span><span class="s1">dist_info_dir</span><span class="s0">}</span><span class="s3">/METADATA&quot;</span><span class="s2">,</span>
                    <span class="s1">source</span><span class="s2">.</span><span class="s1">metadata</span><span class="s2">.</span><span class="s1">as_string</span><span class="s2">(</span><span class="s1">policy</span><span class="s2">=</span><span class="s1">serialization_policy</span><span class="s2">).</span><span class="s1">encode</span><span class="s2">(</span>
                        <span class="s3">&quot;utf-8&quot;</span>
                    <span class="s2">),</span>
                <span class="s2">)</span>

                <span class="s5"># Write the WHEEL file</span>
                <span class="s1">wheel_message </span><span class="s2">= </span><span class="s1">Message</span><span class="s2">()</span>
                <span class="s1">wheel_message</span><span class="s2">.</span><span class="s1">add_header</span><span class="s2">(</span><span class="s3">&quot;Wheel-Version&quot;</span><span class="s2">, </span><span class="s3">&quot;1.0&quot;</span><span class="s2">)</span>
                <span class="s1">wheel_message</span><span class="s2">.</span><span class="s1">add_header</span><span class="s2">(</span><span class="s3">&quot;Generator&quot;</span><span class="s2">, </span><span class="s1">GENERATOR</span><span class="s2">)</span>
                <span class="s1">wheel_message</span><span class="s2">.</span><span class="s1">add_header</span><span class="s2">(</span>
                    <span class="s3">&quot;Root-Is-Purelib&quot;</span><span class="s2">, </span><span class="s1">str</span><span class="s2">(</span><span class="s1">source</span><span class="s2">.</span><span class="s1">platform </span><span class="s2">== </span><span class="s3">&quot;any&quot;</span><span class="s2">).</span><span class="s1">lower</span><span class="s2">()</span>
                <span class="s2">)</span>
                <span class="s1">tags </span><span class="s2">= </span><span class="s1">parse_tag</span><span class="s2">(</span><span class="s3">f&quot;</span><span class="s0">{</span><span class="s1">source</span><span class="s2">.</span><span class="s1">pyver</span><span class="s0">}</span><span class="s3">-</span><span class="s0">{</span><span class="s1">source</span><span class="s2">.</span><span class="s1">abi</span><span class="s0">}</span><span class="s3">-</span><span class="s0">{</span><span class="s1">source</span><span class="s2">.</span><span class="s1">platform</span><span class="s0">}</span><span class="s3">&quot;</span><span class="s2">)</span>
                <span class="s0">for </span><span class="s1">tag </span><span class="s0">in </span><span class="s1">sorted</span><span class="s2">(</span><span class="s1">tags</span><span class="s2">, </span><span class="s1">key</span><span class="s2">=</span><span class="s0">lambda </span><span class="s1">tag</span><span class="s2">: </span><span class="s1">tag</span><span class="s2">.</span><span class="s1">interpreter</span><span class="s2">):</span>
                    <span class="s1">wheel_message</span><span class="s2">.</span><span class="s1">add_header</span><span class="s2">(</span><span class="s3">&quot;Tag&quot;</span><span class="s2">, </span><span class="s1">str</span><span class="s2">(</span><span class="s1">tag</span><span class="s2">))</span>

                <span class="s1">wheelfile</span><span class="s2">.</span><span class="s1">writestr</span><span class="s2">(</span>
                    <span class="s3">f&quot;</span><span class="s0">{</span><span class="s1">source</span><span class="s2">.</span><span class="s1">dist_info_dir</span><span class="s0">}</span><span class="s3">/WHEEL&quot;</span><span class="s2">,</span>
                    <span class="s1">wheel_message</span><span class="s2">.</span><span class="s1">as_string</span><span class="s2">(</span><span class="s1">policy</span><span class="s2">=</span><span class="s1">serialization_policy</span><span class="s2">).</span><span class="s1">encode</span><span class="s2">(</span>
                        <span class="s3">&quot;utf-8&quot;</span>
                    <span class="s2">),</span>
                <span class="s2">)</span>

            <span class="s0">if </span><span class="s1">verbose</span><span class="s2">:</span>
                <span class="s1">print</span><span class="s2">(</span><span class="s3">&quot;OK&quot;</span><span class="s2">)</span>
</pre>
</body>
</html>