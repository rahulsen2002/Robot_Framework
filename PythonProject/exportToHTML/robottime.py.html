<html>
<head>
<title>robottime.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #7a7e85;}
.s1 { color: #bcbec4;}
.s2 { color: #cf8e6d;}
.s3 { color: #bcbec4;}
.s4 { color: #6aab73;}
.s5 { color: #2aacb8;}
.s6 { color: #5f826b; font-style: italic;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
robottime.py</font>
</center></td></tr></table>
<pre><span class="s0">#  Copyright 2008-2015 Nokia Networks</span>
<span class="s0">#  Copyright 2016-     Robot Framework Foundation</span>
<span class="s0">#</span>
<span class="s0">#  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="s0">#  you may not use this file except in compliance with the License.</span>
<span class="s0">#  You may obtain a copy of the License at</span>
<span class="s0">#</span>
<span class="s0">#      http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="s0">#</span>
<span class="s0">#  Unless required by applicable law or agreed to in writing, software</span>
<span class="s0">#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="s0">#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="s0">#  See the License for the specific language governing permissions and</span>
<span class="s0">#  limitations under the License.</span>

<span class="s2">import </span><span class="s1">re</span>
<span class="s2">import </span><span class="s1">time</span>
<span class="s2">import </span><span class="s1">warnings</span>
<span class="s2">from </span><span class="s1">datetime </span><span class="s2">import </span><span class="s1">datetime</span><span class="s3">, </span><span class="s1">timedelta</span>

<span class="s2">from </span><span class="s3">.</span><span class="s1">misc </span><span class="s2">import </span><span class="s1">plural_or_not </span><span class="s2">as </span><span class="s1">s</span>
<span class="s2">from </span><span class="s3">.</span><span class="s1">normalizing </span><span class="s2">import </span><span class="s1">normalize</span>

<span class="s1">_timer_re </span><span class="s3">= </span><span class="s1">re</span><span class="s3">.</span><span class="s1">compile</span><span class="s3">(</span><span class="s4">r&quot;^([+-])?(\d+:)?(\d+):(\d+)(\.\d+)?$&quot;</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">_get_timetuple</span><span class="s3">(</span><span class="s1">epoch_secs</span><span class="s3">=</span><span class="s2">None</span><span class="s3">):</span>
    <span class="s2">if </span><span class="s1">epoch_secs </span><span class="s2">is None</span><span class="s3">:  </span><span class="s0"># can also be 0 (at least in unit tests)</span>
        <span class="s1">epoch_secs </span><span class="s3">= </span><span class="s1">time</span><span class="s3">.</span><span class="s1">time</span><span class="s3">()</span>
    <span class="s1">secs</span><span class="s3">, </span><span class="s1">millis </span><span class="s3">= </span><span class="s1">_float_secs_to_secs_and_millis</span><span class="s3">(</span><span class="s1">epoch_secs</span><span class="s3">)</span>
    <span class="s1">timetuple </span><span class="s3">= </span><span class="s1">time</span><span class="s3">.</span><span class="s1">localtime</span><span class="s3">(</span><span class="s1">secs</span><span class="s3">)[:</span><span class="s5">6</span><span class="s3">]  </span><span class="s0"># from year to secs</span>
    <span class="s2">return </span><span class="s3">(*</span><span class="s1">timetuple</span><span class="s3">, </span><span class="s1">millis</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">_float_secs_to_secs_and_millis</span><span class="s3">(</span><span class="s1">secs</span><span class="s3">):</span>
    <span class="s1">isecs </span><span class="s3">= </span><span class="s1">int</span><span class="s3">(</span><span class="s1">secs</span><span class="s3">)</span>
    <span class="s1">millis </span><span class="s3">= </span><span class="s1">round</span><span class="s3">((</span><span class="s1">secs </span><span class="s3">- </span><span class="s1">isecs</span><span class="s3">) * </span><span class="s5">1000</span><span class="s3">)</span>
    <span class="s2">return </span><span class="s3">(</span><span class="s1">isecs</span><span class="s3">, </span><span class="s1">millis</span><span class="s3">) </span><span class="s2">if </span><span class="s1">millis </span><span class="s3">&lt; </span><span class="s5">1000 </span><span class="s2">else </span><span class="s3">(</span><span class="s1">isecs </span><span class="s3">+ </span><span class="s5">1</span><span class="s3">, </span><span class="s5">0</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">timestr_to_secs</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">, </span><span class="s1">round_to</span><span class="s3">=</span><span class="s5">3</span><span class="s3">):</span>
    <span class="s6">&quot;&quot;&quot;Parses time strings like '1h 10s', '01:00:10' and '42' and returns seconds. 
 
    Time can also be given as an integer or float or, starting from RF 6.0.1, 
    as a `timedelta` instance. 
 
    The result is rounded according to the `round_to` argument. 
    Use `round_to=None` to disable rounding altogether. 
    &quot;&quot;&quot;</span>
    <span class="s2">if </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">, (</span><span class="s1">str</span><span class="s3">, </span><span class="s1">int</span><span class="s3">, </span><span class="s1">float</span><span class="s3">)):</span>
        <span class="s1">converters </span><span class="s3">= [</span><span class="s1">_number_to_secs</span><span class="s3">, </span><span class="s1">_timer_to_secs</span><span class="s3">, </span><span class="s1">_time_string_to_secs</span><span class="s3">]</span>
        <span class="s2">for </span><span class="s1">converter </span><span class="s2">in </span><span class="s1">converters</span><span class="s3">:</span>
            <span class="s1">secs </span><span class="s3">= </span><span class="s1">converter</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">)</span>
            <span class="s2">if </span><span class="s1">secs </span><span class="s2">is not None</span><span class="s3">:</span>
                <span class="s2">return </span><span class="s1">secs </span><span class="s2">if </span><span class="s1">round_to </span><span class="s2">is None else </span><span class="s1">round</span><span class="s3">(</span><span class="s1">secs</span><span class="s3">, </span><span class="s1">round_to</span><span class="s3">)</span>
    <span class="s2">if </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">, </span><span class="s1">timedelta</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">timestr</span><span class="s3">.</span><span class="s1">total_seconds</span><span class="s3">()</span>
    <span class="s2">raise </span><span class="s1">ValueError</span><span class="s3">(</span><span class="s4">f&quot;Invalid time string '</span><span class="s2">{</span><span class="s1">timestr</span><span class="s2">}</span><span class="s4">'.&quot;</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">_number_to_secs</span><span class="s3">(</span><span class="s1">number</span><span class="s3">):</span>
    <span class="s2">try</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">float</span><span class="s3">(</span><span class="s1">number</span><span class="s3">)</span>
    <span class="s2">except </span><span class="s1">ValueError</span><span class="s3">:</span>
        <span class="s2">return None</span>


<span class="s2">def </span><span class="s1">_timer_to_secs</span><span class="s3">(</span><span class="s1">number</span><span class="s3">):</span>
    <span class="s1">match </span><span class="s3">= </span><span class="s1">_timer_re</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s1">number</span><span class="s3">)</span>
    <span class="s2">if not </span><span class="s1">match</span><span class="s3">:</span>
        <span class="s2">return None</span>
    <span class="s1">prefix</span><span class="s3">, </span><span class="s1">hours</span><span class="s3">, </span><span class="s1">minutes</span><span class="s3">, </span><span class="s1">seconds</span><span class="s3">, </span><span class="s1">millis </span><span class="s3">= </span><span class="s1">match</span><span class="s3">.</span><span class="s1">groups</span><span class="s3">()</span>
    <span class="s1">seconds </span><span class="s3">= </span><span class="s1">float</span><span class="s3">(</span><span class="s1">minutes</span><span class="s3">) * </span><span class="s5">60 </span><span class="s3">+ </span><span class="s1">float</span><span class="s3">(</span><span class="s1">seconds</span><span class="s3">)</span>
    <span class="s2">if </span><span class="s1">hours</span><span class="s3">:</span>
        <span class="s1">seconds </span><span class="s3">+= </span><span class="s1">float</span><span class="s3">(</span><span class="s1">hours</span><span class="s3">[:-</span><span class="s5">1</span><span class="s3">]) * </span><span class="s5">60 </span><span class="s3">* </span><span class="s5">60</span>
    <span class="s2">if </span><span class="s1">millis</span><span class="s3">:</span>
        <span class="s1">seconds </span><span class="s3">+= </span><span class="s1">float</span><span class="s3">(</span><span class="s1">millis</span><span class="s3">[</span><span class="s5">1</span><span class="s3">:]) / </span><span class="s5">10 </span><span class="s3">** </span><span class="s1">len</span><span class="s3">(</span><span class="s1">millis</span><span class="s3">[</span><span class="s5">1</span><span class="s3">:])</span>
    <span class="s2">if </span><span class="s1">prefix </span><span class="s3">== </span><span class="s4">&quot;-&quot;</span><span class="s3">:</span>
        <span class="s1">seconds </span><span class="s3">*= -</span><span class="s5">1</span>
    <span class="s2">return </span><span class="s1">seconds</span>


<span class="s2">def </span><span class="s1">_time_string_to_secs</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">):</span>
    <span class="s2">try</span><span class="s3">:</span>
        <span class="s1">timestr </span><span class="s3">= </span><span class="s1">_normalize_timestr</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">)</span>
    <span class="s2">except </span><span class="s1">ValueError</span><span class="s3">:</span>
        <span class="s2">return None</span>
    <span class="s1">nanos </span><span class="s3">= </span><span class="s1">micros </span><span class="s3">= </span><span class="s1">millis </span><span class="s3">= </span><span class="s1">secs </span><span class="s3">= </span><span class="s1">mins </span><span class="s3">= </span><span class="s1">hours </span><span class="s3">= </span><span class="s1">days </span><span class="s3">= </span><span class="s1">weeks </span><span class="s3">= </span><span class="s5">0</span>
    <span class="s2">if </span><span class="s1">timestr</span><span class="s3">[</span><span class="s5">0</span><span class="s3">] == </span><span class="s4">&quot;-&quot;</span><span class="s3">:</span>
        <span class="s1">sign </span><span class="s3">= -</span><span class="s5">1</span>
        <span class="s1">timestr </span><span class="s3">= </span><span class="s1">timestr</span><span class="s3">[</span><span class="s5">1</span><span class="s3">:]</span>
    <span class="s2">else</span><span class="s3">:</span>
        <span class="s1">sign </span><span class="s3">= </span><span class="s5">1</span>
    <span class="s1">temp </span><span class="s3">= []</span>
    <span class="s2">for </span><span class="s1">c </span><span class="s2">in </span><span class="s1">timestr</span><span class="s3">:</span>
        <span class="s2">if </span><span class="s1">c </span><span class="s2">in </span><span class="s3">(</span><span class="s4">&quot;n&quot;</span><span class="s3">, </span><span class="s4">&quot;u&quot;</span><span class="s3">, </span><span class="s4">&quot;M&quot;</span><span class="s3">, </span><span class="s4">&quot;s&quot;</span><span class="s3">, </span><span class="s4">&quot;m&quot;</span><span class="s3">, </span><span class="s4">&quot;h&quot;</span><span class="s3">, </span><span class="s4">&quot;d&quot;</span><span class="s3">, </span><span class="s4">&quot;w&quot;</span><span class="s3">):</span>
            <span class="s2">try</span><span class="s3">:</span>
                <span class="s1">value </span><span class="s3">= </span><span class="s1">float</span><span class="s3">(</span><span class="s4">&quot;&quot;</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">temp</span><span class="s3">))</span>
            <span class="s2">except </span><span class="s1">ValueError</span><span class="s3">:</span>
                <span class="s2">return None</span>
            <span class="s2">if </span><span class="s1">c </span><span class="s3">== </span><span class="s4">&quot;n&quot;</span><span class="s3">:</span>
                <span class="s1">nanos </span><span class="s3">= </span><span class="s1">value</span>
            <span class="s2">elif </span><span class="s1">c </span><span class="s3">== </span><span class="s4">&quot;u&quot;</span><span class="s3">:</span>
                <span class="s1">micros </span><span class="s3">= </span><span class="s1">value</span>
            <span class="s2">elif </span><span class="s1">c </span><span class="s3">== </span><span class="s4">&quot;M&quot;</span><span class="s3">:</span>
                <span class="s1">millis </span><span class="s3">= </span><span class="s1">value</span>
            <span class="s2">elif </span><span class="s1">c </span><span class="s3">== </span><span class="s4">&quot;s&quot;</span><span class="s3">:</span>
                <span class="s1">secs </span><span class="s3">= </span><span class="s1">value</span>
            <span class="s2">elif </span><span class="s1">c </span><span class="s3">== </span><span class="s4">&quot;m&quot;</span><span class="s3">:</span>
                <span class="s1">mins </span><span class="s3">= </span><span class="s1">value</span>
            <span class="s2">elif </span><span class="s1">c </span><span class="s3">== </span><span class="s4">&quot;h&quot;</span><span class="s3">:</span>
                <span class="s1">hours </span><span class="s3">= </span><span class="s1">value</span>
            <span class="s2">elif </span><span class="s1">c </span><span class="s3">== </span><span class="s4">&quot;d&quot;</span><span class="s3">:</span>
                <span class="s1">days </span><span class="s3">= </span><span class="s1">value</span>
            <span class="s2">elif </span><span class="s1">c </span><span class="s3">== </span><span class="s4">&quot;w&quot;</span><span class="s3">:</span>
                <span class="s1">weeks </span><span class="s3">= </span><span class="s1">value</span>
            <span class="s1">temp </span><span class="s3">= []</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">temp</span><span class="s3">.</span><span class="s1">append</span><span class="s3">(</span><span class="s1">c</span><span class="s3">)</span>
    <span class="s2">if </span><span class="s1">temp</span><span class="s3">:</span>
        <span class="s2">return None</span>
    <span class="s2">return </span><span class="s1">sign </span><span class="s3">* (</span>
        <span class="s1">nanos </span><span class="s3">/ </span><span class="s5">1e9</span>
        <span class="s3">+ </span><span class="s1">micros </span><span class="s3">/ </span><span class="s5">1e6</span>
        <span class="s3">+ </span><span class="s1">millis </span><span class="s3">/ </span><span class="s5">1e3</span>
        <span class="s3">+ </span><span class="s1">secs</span>
        <span class="s3">+ </span><span class="s1">mins </span><span class="s3">* </span><span class="s5">60</span>
        <span class="s3">+ </span><span class="s1">hours </span><span class="s3">* </span><span class="s5">60 </span><span class="s3">* </span><span class="s5">60</span>
        <span class="s3">+ </span><span class="s1">days </span><span class="s3">* </span><span class="s5">60 </span><span class="s3">* </span><span class="s5">60 </span><span class="s3">* </span><span class="s5">24</span>
        <span class="s3">+ </span><span class="s1">weeks </span><span class="s3">* </span><span class="s5">60 </span><span class="s3">* </span><span class="s5">60 </span><span class="s3">* </span><span class="s5">24 </span><span class="s3">* </span><span class="s5">7</span>
    <span class="s3">)</span>


<span class="s2">def </span><span class="s1">_normalize_timestr</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">):</span>
    <span class="s1">timestr </span><span class="s3">= </span><span class="s1">normalize</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">)</span>
    <span class="s2">if not </span><span class="s1">timestr</span><span class="s3">:</span>
        <span class="s2">raise </span><span class="s1">ValueError</span>
    <span class="s1">seen </span><span class="s3">= []</span>
    <span class="s2">for </span><span class="s1">specifier</span><span class="s3">, </span><span class="s1">aliases </span><span class="s2">in </span><span class="s3">[</span>
        <span class="s3">(</span><span class="s4">&quot;n&quot;</span><span class="s3">, [</span><span class="s4">&quot;nanosecond&quot;</span><span class="s3">, </span><span class="s4">&quot;ns&quot;</span><span class="s3">]),</span>
        <span class="s3">(</span><span class="s4">&quot;u&quot;</span><span class="s3">, [</span><span class="s4">&quot;microsecond&quot;</span><span class="s3">, </span><span class="s4">&quot;us&quot;</span><span class="s3">, </span><span class="s4">&quot;Î¼s&quot;</span><span class="s3">]),</span>
        <span class="s3">(</span><span class="s4">&quot;M&quot;</span><span class="s3">, [</span><span class="s4">&quot;millisecond&quot;</span><span class="s3">, </span><span class="s4">&quot;millisec&quot;</span><span class="s3">, </span><span class="s4">&quot;millis&quot;</span><span class="s3">, </span><span class="s4">&quot;msec&quot;</span><span class="s3">, </span><span class="s4">&quot;ms&quot;</span><span class="s3">]),</span>
        <span class="s3">(</span><span class="s4">&quot;s&quot;</span><span class="s3">, [</span><span class="s4">&quot;second&quot;</span><span class="s3">, </span><span class="s4">&quot;sec&quot;</span><span class="s3">]),</span>
        <span class="s3">(</span><span class="s4">&quot;m&quot;</span><span class="s3">, [</span><span class="s4">&quot;minute&quot;</span><span class="s3">, </span><span class="s4">&quot;min&quot;</span><span class="s3">]),</span>
        <span class="s3">(</span><span class="s4">&quot;h&quot;</span><span class="s3">, [</span><span class="s4">&quot;hour&quot;</span><span class="s3">]),</span>
        <span class="s3">(</span><span class="s4">&quot;d&quot;</span><span class="s3">, [</span><span class="s4">&quot;day&quot;</span><span class="s3">]),</span>
        <span class="s3">(</span><span class="s4">&quot;w&quot;</span><span class="s3">, [</span><span class="s4">&quot;week&quot;</span><span class="s3">]),</span>
    <span class="s3">]:</span>
        <span class="s1">plural_aliases </span><span class="s3">= [</span><span class="s1">a </span><span class="s3">+ </span><span class="s4">&quot;s&quot; </span><span class="s2">for </span><span class="s1">a </span><span class="s2">in </span><span class="s1">aliases </span><span class="s2">if not </span><span class="s1">a</span><span class="s3">.</span><span class="s1">endswith</span><span class="s3">(</span><span class="s4">&quot;s&quot;</span><span class="s3">)]</span>
        <span class="s2">for </span><span class="s1">alias </span><span class="s2">in </span><span class="s1">plural_aliases </span><span class="s3">+ </span><span class="s1">aliases</span><span class="s3">:</span>
            <span class="s2">if </span><span class="s1">alias </span><span class="s2">in </span><span class="s1">timestr</span><span class="s3">:</span>
                <span class="s1">timestr </span><span class="s3">= </span><span class="s1">timestr</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s1">alias</span><span class="s3">, </span><span class="s1">specifier</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">specifier </span><span class="s2">in </span><span class="s1">timestr</span><span class="s3">:  </span><span class="s0"># There are false positives but that's fine.</span>
            <span class="s1">seen</span><span class="s3">.</span><span class="s1">append</span><span class="s3">(</span><span class="s1">specifier</span><span class="s3">)</span>
    <span class="s2">for </span><span class="s1">specifier </span><span class="s2">in </span><span class="s1">seen</span><span class="s3">:</span>
        <span class="s2">if </span><span class="s1">timestr</span><span class="s3">.</span><span class="s1">count</span><span class="s3">(</span><span class="s1">specifier</span><span class="s3">) &gt; </span><span class="s5">1</span><span class="s3">:</span>
            <span class="s2">raise </span><span class="s1">ValueError</span>
    <span class="s2">return </span><span class="s1">timestr</span>


<span class="s2">def </span><span class="s1">secs_to_timestr</span><span class="s3">(</span><span class="s1">secs</span><span class="s3">: </span><span class="s4">&quot;int|float|timedelta&quot;</span><span class="s3">, </span><span class="s1">compact</span><span class="s3">=</span><span class="s2">False</span><span class="s3">) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
    <span class="s6">&quot;&quot;&quot;Converts time in seconds to a string representation. 
 
    Returned string is in format like 
    '1 day 2 hours 3 minutes 4 seconds 5 milliseconds' with following rules: 
 
    - Time parts having zero value are not included (e.g. '3 minutes 4 seconds' 
      instead of '0 days 0 hours 3 minutes 4 seconds') 
    - Hour part has a maximum of 23 and minutes and seconds both have 59 
      (e.g. '1 minute 40 seconds' instead of '100 seconds') 
 
    If compact has value 'True', short suffixes are used. 
    (e.g. 1d 2h 3min 4s 5ms) 
    &quot;&quot;&quot;</span>
    <span class="s2">if </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">secs</span><span class="s3">, </span><span class="s1">timedelta</span><span class="s3">):</span>
        <span class="s1">secs </span><span class="s3">= </span><span class="s1">secs</span><span class="s3">.</span><span class="s1">total_seconds</span><span class="s3">()</span>
    <span class="s2">return </span><span class="s1">_SecsToTimestrHelper</span><span class="s3">(</span><span class="s1">secs</span><span class="s3">, </span><span class="s1">compact</span><span class="s3">).</span><span class="s1">get_value</span><span class="s3">()</span>


<span class="s2">class </span><span class="s1">_SecsToTimestrHelper</span><span class="s3">:</span>

    <span class="s2">def </span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">float_secs</span><span class="s3">, </span><span class="s1">compact</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_compact </span><span class="s3">= </span><span class="s1">compact</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_ret </span><span class="s3">= []</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_sign</span><span class="s3">, </span><span class="s1">ms</span><span class="s3">, </span><span class="s1">sec</span><span class="s3">, </span><span class="s1">min</span><span class="s3">, </span><span class="s1">hour</span><span class="s3">, </span><span class="s1">day </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_secs_to_components</span><span class="s3">(</span><span class="s1">float_secs</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_add_item</span><span class="s3">(</span><span class="s1">day</span><span class="s3">, </span><span class="s4">&quot;d&quot;</span><span class="s3">, </span><span class="s4">&quot;day&quot;</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_add_item</span><span class="s3">(</span><span class="s1">hour</span><span class="s3">, </span><span class="s4">&quot;h&quot;</span><span class="s3">, </span><span class="s4">&quot;hour&quot;</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_add_item</span><span class="s3">(</span><span class="s1">min</span><span class="s3">, </span><span class="s4">&quot;min&quot;</span><span class="s3">, </span><span class="s4">&quot;minute&quot;</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_add_item</span><span class="s3">(</span><span class="s1">sec</span><span class="s3">, </span><span class="s4">&quot;s&quot;</span><span class="s3">, </span><span class="s4">&quot;second&quot;</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_add_item</span><span class="s3">(</span><span class="s1">ms</span><span class="s3">, </span><span class="s4">&quot;ms&quot;</span><span class="s3">, </span><span class="s4">&quot;millisecond&quot;</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">get_value</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s1">len</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_ret</span><span class="s3">) &gt; </span><span class="s5">0</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_sign </span><span class="s3">+ </span><span class="s4">&quot; &quot;</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_ret</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s4">&quot;0s&quot; </span><span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_compact </span><span class="s2">else </span><span class="s4">&quot;0 seconds&quot;</span>

    <span class="s2">def </span><span class="s1">_add_item</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">value</span><span class="s3">, </span><span class="s1">compact_suffix</span><span class="s3">, </span><span class="s1">long_suffix</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s1">value </span><span class="s3">== </span><span class="s5">0</span><span class="s3">:</span>
            <span class="s2">return</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_compact</span><span class="s3">:</span>
            <span class="s1">suffix </span><span class="s3">= </span><span class="s1">compact_suffix</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">suffix </span><span class="s3">= </span><span class="s4">f&quot; </span><span class="s2">{</span><span class="s1">long_suffix</span><span class="s2">}{</span><span class="s1">s</span><span class="s3">(</span><span class="s1">value</span><span class="s3">)</span><span class="s2">}</span><span class="s4">&quot;</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_ret</span><span class="s3">.</span><span class="s1">append</span><span class="s3">(</span><span class="s4">f&quot;</span><span class="s2">{</span><span class="s1">value</span><span class="s2">}{</span><span class="s1">suffix</span><span class="s2">}</span><span class="s4">&quot;</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_secs_to_components</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">float_secs</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s1">float_secs </span><span class="s3">&lt; </span><span class="s5">0</span><span class="s3">:</span>
            <span class="s1">sign </span><span class="s3">= </span><span class="s4">&quot;- &quot;</span>
            <span class="s1">float_secs </span><span class="s3">= </span><span class="s1">abs</span><span class="s3">(</span><span class="s1">float_secs</span><span class="s3">)</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">sign </span><span class="s3">= </span><span class="s4">&quot;&quot;</span>
        <span class="s1">int_secs</span><span class="s3">, </span><span class="s1">millis </span><span class="s3">= </span><span class="s1">_float_secs_to_secs_and_millis</span><span class="s3">(</span><span class="s1">float_secs</span><span class="s3">)</span>
        <span class="s1">secs </span><span class="s3">= </span><span class="s1">int_secs </span><span class="s3">% </span><span class="s5">60</span>
        <span class="s1">mins </span><span class="s3">= </span><span class="s1">int_secs </span><span class="s3">// </span><span class="s5">60 </span><span class="s3">% </span><span class="s5">60</span>
        <span class="s1">hours </span><span class="s3">= </span><span class="s1">int_secs </span><span class="s3">// (</span><span class="s5">60 </span><span class="s3">* </span><span class="s5">60</span><span class="s3">) % </span><span class="s5">24</span>
        <span class="s1">days </span><span class="s3">= </span><span class="s1">int_secs </span><span class="s3">// (</span><span class="s5">60 </span><span class="s3">* </span><span class="s5">60 </span><span class="s3">* </span><span class="s5">24</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">sign</span><span class="s3">, </span><span class="s1">millis</span><span class="s3">, </span><span class="s1">secs</span><span class="s3">, </span><span class="s1">mins</span><span class="s3">, </span><span class="s1">hours</span><span class="s3">, </span><span class="s1">days</span>


<span class="s2">def </span><span class="s1">format_time</span><span class="s3">(</span>
    <span class="s1">timetuple_or_epochsecs</span><span class="s3">,</span>
    <span class="s1">daysep</span><span class="s3">=</span><span class="s4">&quot;&quot;</span><span class="s3">,</span>
    <span class="s1">daytimesep</span><span class="s3">=</span><span class="s4">&quot; &quot;</span><span class="s3">,</span>
    <span class="s1">timesep</span><span class="s3">=</span><span class="s4">&quot;:&quot;</span><span class="s3">,</span>
    <span class="s1">millissep</span><span class="s3">=</span><span class="s2">None</span><span class="s3">,</span>
<span class="s3">):</span>
    <span class="s6">&quot;&quot;&quot;Deprecated in Robot Framework 7.0. Will be removed in Robot Framework 8.0.&quot;&quot;&quot;</span>
    <span class="s1">warnings</span><span class="s3">.</span><span class="s1">warn</span><span class="s3">(</span>
        <span class="s4">&quot;'robot.utils.format_time' is deprecated and will be &quot;</span>
        <span class="s4">&quot;removed in Robot Framework 8.0.&quot;</span>
    <span class="s3">)</span>
    <span class="s2">if </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">timetuple_or_epochsecs</span><span class="s3">, (</span><span class="s1">int</span><span class="s3">, </span><span class="s1">float</span><span class="s3">)):</span>
        <span class="s1">timetuple </span><span class="s3">= </span><span class="s1">_get_timetuple</span><span class="s3">(</span><span class="s1">timetuple_or_epochsecs</span><span class="s3">)</span>
    <span class="s2">else</span><span class="s3">:</span>
        <span class="s1">timetuple </span><span class="s3">= </span><span class="s1">timetuple_or_epochsecs</span>
    <span class="s1">parts </span><span class="s3">= [</span><span class="s4">f&quot;</span><span class="s2">{</span><span class="s1">t</span><span class="s2">:</span><span class="s4">02</span><span class="s2">}</span><span class="s4">&quot; </span><span class="s2">for </span><span class="s1">t </span><span class="s2">in </span><span class="s1">timetuple</span><span class="s3">[:</span><span class="s5">6</span><span class="s3">]]</span>
    <span class="s1">day </span><span class="s3">= </span><span class="s1">daysep</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">parts</span><span class="s3">[:</span><span class="s5">3</span><span class="s3">])</span>
    <span class="s1">time_ </span><span class="s3">= </span><span class="s1">timesep</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">parts</span><span class="s3">[</span><span class="s5">3</span><span class="s3">:</span><span class="s5">6</span><span class="s3">])</span>
    <span class="s1">millis </span><span class="s3">= </span><span class="s4">f&quot;</span><span class="s2">{</span><span class="s1">millissep</span><span class="s2">}{</span><span class="s1">timetuple</span><span class="s3">[</span><span class="s5">6</span><span class="s3">]</span><span class="s2">:</span><span class="s4">03</span><span class="s2">}</span><span class="s4">&quot; </span><span class="s2">if </span><span class="s1">millissep </span><span class="s2">else </span><span class="s4">&quot;&quot;</span>
    <span class="s2">return </span><span class="s1">day </span><span class="s3">+ </span><span class="s1">daytimesep </span><span class="s3">+ </span><span class="s1">time_ </span><span class="s3">+ </span><span class="s1">millis</span>


<span class="s2">def </span><span class="s1">get_time</span><span class="s3">(</span><span class="s1">format</span><span class="s3">=</span><span class="s4">&quot;timestamp&quot;</span><span class="s3">, </span><span class="s1">time_</span><span class="s3">=</span><span class="s2">None</span><span class="s3">):</span>
    <span class="s6">&quot;&quot;&quot;Return the given or current time in requested format. 
 
    If time is not given, current time is used. How time is returned is 
    determined based on the given 'format' string as follows. Note that all 
    checks are case-insensitive. 
 
    - If 'format' contains word 'epoch' the time is returned in seconds after 
      the unix epoch. 
    - If 'format' contains any of the words 'year', 'month', 'day', 'hour', 
      'min' or 'sec' only selected parts are returned. The order of the returned 
      parts is always the one in previous sentence and order of words in 
      'format' is not significant. Parts are returned as zero padded strings 
      (e.g. May -&gt; '05'). 
    - Otherwise (and by default) the time is returned as a timestamp string in 
      format '2006-02-24 15:08:31' 
    &quot;&quot;&quot;</span>
    <span class="s1">time_ </span><span class="s3">= </span><span class="s1">int</span><span class="s3">(</span><span class="s1">time</span><span class="s3">.</span><span class="s1">time</span><span class="s3">() </span><span class="s2">if </span><span class="s1">time_ </span><span class="s2">is None else </span><span class="s1">time_</span><span class="s3">)</span>
    <span class="s1">format </span><span class="s3">= </span><span class="s1">format</span><span class="s3">.</span><span class="s1">lower</span><span class="s3">()</span>
    <span class="s0"># 1) Return time in seconds since epoc</span>
    <span class="s2">if </span><span class="s4">&quot;epoch&quot; </span><span class="s2">in </span><span class="s1">format</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">time_</span>
    <span class="s1">dt </span><span class="s3">= </span><span class="s1">datetime</span><span class="s3">.</span><span class="s1">fromtimestamp</span><span class="s3">(</span><span class="s1">time_</span><span class="s3">)</span>
    <span class="s1">parts </span><span class="s3">= []</span>
    <span class="s2">for </span><span class="s1">part</span><span class="s3">, </span><span class="s1">name </span><span class="s2">in </span><span class="s3">[</span>
        <span class="s3">(</span><span class="s1">dt</span><span class="s3">.</span><span class="s1">year</span><span class="s3">, </span><span class="s4">&quot;year&quot;</span><span class="s3">),</span>
        <span class="s3">(</span><span class="s1">dt</span><span class="s3">.</span><span class="s1">month</span><span class="s3">, </span><span class="s4">&quot;month&quot;</span><span class="s3">),</span>
        <span class="s3">(</span><span class="s1">dt</span><span class="s3">.</span><span class="s1">day</span><span class="s3">, </span><span class="s4">&quot;day&quot;</span><span class="s3">),</span>
        <span class="s3">(</span><span class="s1">dt</span><span class="s3">.</span><span class="s1">hour</span><span class="s3">, </span><span class="s4">&quot;hour&quot;</span><span class="s3">),</span>
        <span class="s3">(</span><span class="s1">dt</span><span class="s3">.</span><span class="s1">minute</span><span class="s3">, </span><span class="s4">&quot;min&quot;</span><span class="s3">),</span>
        <span class="s3">(</span><span class="s1">dt</span><span class="s3">.</span><span class="s1">second</span><span class="s3">, </span><span class="s4">&quot;sec&quot;</span><span class="s3">),</span>
    <span class="s3">]:</span>
        <span class="s2">if </span><span class="s1">name </span><span class="s2">in </span><span class="s1">format</span><span class="s3">:</span>
            <span class="s1">parts</span><span class="s3">.</span><span class="s1">append</span><span class="s3">(</span><span class="s4">f&quot;</span><span class="s2">{</span><span class="s1">part</span><span class="s2">:</span><span class="s4">02</span><span class="s2">}</span><span class="s4">&quot;</span><span class="s3">)</span>
    <span class="s0"># 2) Return time as timestamp</span>
    <span class="s2">if not </span><span class="s1">parts</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">dt</span><span class="s3">.</span><span class="s1">isoformat</span><span class="s3">(</span><span class="s4">&quot; &quot;</span><span class="s3">, </span><span class="s1">timespec</span><span class="s3">=</span><span class="s4">&quot;seconds&quot;</span><span class="s3">)</span>
    <span class="s0"># Return requested parts of the time</span>
    <span class="s2">if </span><span class="s1">len</span><span class="s3">(</span><span class="s1">parts</span><span class="s3">) == </span><span class="s5">1</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">parts</span><span class="s3">[</span><span class="s5">0</span><span class="s3">]</span>
    <span class="s2">return </span><span class="s1">parts</span>


<span class="s2">def </span><span class="s1">parse_timestamp</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">: </span><span class="s4">&quot;str|datetime&quot;</span><span class="s3">) </span><span class="s1">-&gt; datetime</span><span class="s3">:</span>
    <span class="s6">&quot;&quot;&quot;Parse timestamp in ISO 8601-like formats into a ``datetime``. 
 
    Months, days, hours, minutes and seconds must use two digits and 
    year must use four. Microseconds can use up to six digits. All time 
    parts can be omitted. 
 
    Separators '-', '_', ' ', 'T', ':' and '.' between date and time components. 
    Separators can also be omitted altogether. 
 
    Examples:: 
 
        2023-09-08T14:34:42.123456 
        2023-09-08 14:34:42.123 
        20230908 143442 
        2023_09_08 
 
    This is similar to ``datetime.fromisoformat``, but a little less strict. 
    The standard function is recommended if the input format is known to be 
    accepted. 
 
    If the input is a ``datetime``, it is returned as-is. 
 
    New in Robot Framework 7.0. 
    &quot;&quot;&quot;</span>
    <span class="s2">if </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">, </span><span class="s1">datetime</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">timestamp</span>
    <span class="s2">try</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">datetime</span><span class="s3">.</span><span class="s1">fromisoformat</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">)</span>
    <span class="s2">except </span><span class="s1">ValueError</span><span class="s3">:</span>
        <span class="s2">pass</span>
    <span class="s1">orig </span><span class="s3">= </span><span class="s1">timestamp</span>
    <span class="s2">for </span><span class="s1">sep </span><span class="s2">in </span><span class="s3">(</span><span class="s4">&quot;-&quot;</span><span class="s3">, </span><span class="s4">&quot;_&quot;</span><span class="s3">, </span><span class="s4">&quot; &quot;</span><span class="s3">, </span><span class="s4">&quot;T&quot;</span><span class="s3">, </span><span class="s4">&quot;:&quot;</span><span class="s3">, </span><span class="s4">&quot;.&quot;</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s1">sep </span><span class="s2">in </span><span class="s1">timestamp</span><span class="s3">:</span>
            <span class="s1">timestamp </span><span class="s3">= </span><span class="s1">timestamp</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s1">sep</span><span class="s3">, </span><span class="s4">&quot;&quot;</span><span class="s3">)</span>
    <span class="s1">timestamp </span><span class="s3">= </span><span class="s1">timestamp</span><span class="s3">.</span><span class="s1">ljust</span><span class="s3">(</span><span class="s5">20</span><span class="s3">, </span><span class="s4">&quot;0&quot;</span><span class="s3">)</span>
    <span class="s2">try</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">datetime</span><span class="s3">(</span>
            <span class="s1">int</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">[</span><span class="s5">0</span><span class="s3">:</span><span class="s5">4</span><span class="s3">]),</span>
            <span class="s1">int</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">[</span><span class="s5">4</span><span class="s3">:</span><span class="s5">6</span><span class="s3">]),</span>
            <span class="s1">int</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">[</span><span class="s5">6</span><span class="s3">:</span><span class="s5">8</span><span class="s3">]),</span>
            <span class="s1">int</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">[</span><span class="s5">8</span><span class="s3">:</span><span class="s5">10</span><span class="s3">]),</span>
            <span class="s1">int</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">[</span><span class="s5">10</span><span class="s3">:</span><span class="s5">12</span><span class="s3">]),</span>
            <span class="s1">int</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">[</span><span class="s5">12</span><span class="s3">:</span><span class="s5">14</span><span class="s3">]),</span>
            <span class="s1">int</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">[</span><span class="s5">14</span><span class="s3">:</span><span class="s5">20</span><span class="s3">]),</span>
        <span class="s3">)</span>
    <span class="s2">except </span><span class="s1">ValueError</span><span class="s3">:</span>
        <span class="s2">raise </span><span class="s1">ValueError</span><span class="s3">(</span><span class="s4">f&quot;Invalid timestamp '</span><span class="s2">{</span><span class="s1">orig</span><span class="s2">}</span><span class="s4">'.&quot;</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">parse_time</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">):</span>
    <span class="s6">&quot;&quot;&quot;Parses the time string and returns its value as seconds since epoch. 
 
    Time can be given in five different formats: 
 
    1) Numbers are interpreted as time since epoch directly. It is possible to 
       use also ints and floats, not only strings containing numbers. 
    2) Valid timestamp ('YYYY-MM-DD hh:mm:ss' and 'YYYYMMDD hhmmss'). 
    3) 'NOW' (case-insensitive) is the current local time. 
    4) 'UTC' (case-insensitive) is the current time in UTC. 
    5) Format 'NOW - 1 day' or 'UTC + 1 hour 30 min' is the current local/UTC 
       time plus/minus the time specified with the time string. 
 
    Seconds are rounded down to avoid getting times in the future. 
    &quot;&quot;&quot;</span>
    <span class="s2">for </span><span class="s1">method </span><span class="s2">in </span><span class="s3">[</span><span class="s1">_parse_time_epoch</span><span class="s3">, </span><span class="s1">_parse_time_timestamp</span><span class="s3">, </span><span class="s1">_parse_time_now_and_utc</span><span class="s3">]:</span>
        <span class="s1">seconds </span><span class="s3">= </span><span class="s1">method</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">seconds </span><span class="s2">is not None</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">int</span><span class="s3">(</span><span class="s1">seconds</span><span class="s3">)</span>
    <span class="s2">raise </span><span class="s1">ValueError</span><span class="s3">(</span><span class="s4">f&quot;Invalid time format '</span><span class="s2">{</span><span class="s1">timestr</span><span class="s2">}</span><span class="s4">'.&quot;</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">_parse_time_epoch</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">):</span>
    <span class="s2">try</span><span class="s3">:</span>
        <span class="s1">ret </span><span class="s3">= </span><span class="s1">float</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">)</span>
    <span class="s2">except </span><span class="s1">ValueError</span><span class="s3">:</span>
        <span class="s2">return None</span>
    <span class="s2">if </span><span class="s1">ret </span><span class="s3">&lt; </span><span class="s5">0</span><span class="s3">:</span>
        <span class="s2">raise </span><span class="s1">ValueError</span><span class="s3">(</span><span class="s4">f&quot;Epoch time must be positive, got '</span><span class="s2">{</span><span class="s1">timestr</span><span class="s2">}</span><span class="s4">'.&quot;</span><span class="s3">)</span>
    <span class="s2">return </span><span class="s1">ret</span>


<span class="s2">def </span><span class="s1">_parse_time_timestamp</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">):</span>
    <span class="s2">try</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">parse_timestamp</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">).</span><span class="s1">timestamp</span><span class="s3">()</span>
    <span class="s2">except </span><span class="s1">ValueError</span><span class="s3">:</span>
        <span class="s2">return None</span>


<span class="s2">def </span><span class="s1">_parse_time_now_and_utc</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">):</span>
    <span class="s1">timestr </span><span class="s3">= </span><span class="s1">timestr</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s4">&quot; &quot;</span><span class="s3">, </span><span class="s4">&quot;&quot;</span><span class="s3">).</span><span class="s1">lower</span><span class="s3">()</span>
    <span class="s1">base </span><span class="s3">= </span><span class="s1">_parse_time_now_and_utc_base</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">[:</span><span class="s5">3</span><span class="s3">])</span>
    <span class="s2">if </span><span class="s1">base </span><span class="s2">is not None</span><span class="s3">:</span>
        <span class="s1">extra </span><span class="s3">= </span><span class="s1">_parse_time_now_and_utc_extra</span><span class="s3">(</span><span class="s1">timestr</span><span class="s3">[</span><span class="s5">3</span><span class="s3">:])</span>
        <span class="s2">if </span><span class="s1">extra </span><span class="s2">is not None</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">base </span><span class="s3">+ </span><span class="s1">extra </span><span class="s3">+ </span><span class="s1">_get_dst_difference</span><span class="s3">(</span><span class="s1">base</span><span class="s3">, </span><span class="s1">base </span><span class="s3">+ </span><span class="s1">extra</span><span class="s3">)</span>
    <span class="s2">return None</span>


<span class="s2">def </span><span class="s1">_parse_time_now_and_utc_base</span><span class="s3">(</span><span class="s1">base</span><span class="s3">):</span>
    <span class="s1">now </span><span class="s3">= </span><span class="s1">time</span><span class="s3">.</span><span class="s1">time</span><span class="s3">()</span>
    <span class="s2">if </span><span class="s1">base </span><span class="s3">== </span><span class="s4">&quot;now&quot;</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">now</span>
    <span class="s2">if </span><span class="s1">base </span><span class="s3">== </span><span class="s4">&quot;utc&quot;</span><span class="s3">:</span>
        <span class="s1">zone </span><span class="s3">= </span><span class="s1">time</span><span class="s3">.</span><span class="s1">altzone </span><span class="s2">if </span><span class="s1">time</span><span class="s3">.</span><span class="s1">localtime</span><span class="s3">().</span><span class="s1">tm_isdst </span><span class="s2">else </span><span class="s1">time</span><span class="s3">.</span><span class="s1">timezone</span>
        <span class="s2">return </span><span class="s1">now </span><span class="s3">+ </span><span class="s1">zone</span>
    <span class="s2">return None</span>


<span class="s2">def </span><span class="s1">_parse_time_now_and_utc_extra</span><span class="s3">(</span><span class="s1">extra</span><span class="s3">):</span>
    <span class="s2">if not </span><span class="s1">extra</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s5">0</span>
    <span class="s2">if </span><span class="s1">extra</span><span class="s3">[</span><span class="s5">0</span><span class="s3">] </span><span class="s2">not in </span><span class="s3">[</span><span class="s4">&quot;+&quot;</span><span class="s3">, </span><span class="s4">&quot;-&quot;</span><span class="s3">]:</span>
        <span class="s2">return None</span>
    <span class="s2">return </span><span class="s3">(</span><span class="s5">1 </span><span class="s2">if </span><span class="s1">extra</span><span class="s3">[</span><span class="s5">0</span><span class="s3">] == </span><span class="s4">&quot;+&quot; </span><span class="s2">else </span><span class="s3">-</span><span class="s5">1</span><span class="s3">) * </span><span class="s1">timestr_to_secs</span><span class="s3">(</span><span class="s1">extra</span><span class="s3">[</span><span class="s5">1</span><span class="s3">:])</span>


<span class="s2">def </span><span class="s1">_get_dst_difference</span><span class="s3">(</span><span class="s1">time1</span><span class="s3">, </span><span class="s1">time2</span><span class="s3">):</span>
    <span class="s1">time1_is_dst </span><span class="s3">= </span><span class="s1">time</span><span class="s3">.</span><span class="s1">localtime</span><span class="s3">(</span><span class="s1">time1</span><span class="s3">).</span><span class="s1">tm_isdst</span>
    <span class="s1">time2_is_dst </span><span class="s3">= </span><span class="s1">time</span><span class="s3">.</span><span class="s1">localtime</span><span class="s3">(</span><span class="s1">time2</span><span class="s3">).</span><span class="s1">tm_isdst</span>
    <span class="s2">if </span><span class="s1">time1_is_dst </span><span class="s2">is </span><span class="s1">time2_is_dst</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s5">0</span>
    <span class="s1">difference </span><span class="s3">= </span><span class="s1">time</span><span class="s3">.</span><span class="s1">timezone </span><span class="s3">- </span><span class="s1">time</span><span class="s3">.</span><span class="s1">altzone</span>
    <span class="s2">return </span><span class="s1">difference </span><span class="s2">if </span><span class="s1">time1_is_dst </span><span class="s2">else </span><span class="s3">-</span><span class="s1">difference</span>


<span class="s2">def </span><span class="s1">get_timestamp</span><span class="s3">(</span><span class="s1">daysep</span><span class="s3">=</span><span class="s4">&quot;&quot;</span><span class="s3">, </span><span class="s1">daytimesep</span><span class="s3">=</span><span class="s4">&quot; &quot;</span><span class="s3">, </span><span class="s1">timesep</span><span class="s3">=</span><span class="s4">&quot;:&quot;</span><span class="s3">, </span><span class="s1">millissep</span><span class="s3">=</span><span class="s4">&quot;.&quot;</span><span class="s3">):</span>
    <span class="s6">&quot;&quot;&quot;Deprecated in Robot Framework 7.0. Will be removed in Robot Framework 8.0.&quot;&quot;&quot;</span>
    <span class="s1">warnings</span><span class="s3">.</span><span class="s1">warn</span><span class="s3">(</span>
        <span class="s4">&quot;'robot.utils.get_timestamp' is deprecated and will be &quot;</span>
        <span class="s4">&quot;removed in Robot Framework 8.0.&quot;</span>
    <span class="s3">)</span>
    <span class="s1">dt </span><span class="s3">= </span><span class="s1">datetime</span><span class="s3">.</span><span class="s1">now</span><span class="s3">()</span>
    <span class="s1">parts </span><span class="s3">= [</span>
        <span class="s1">str</span><span class="s3">(</span><span class="s1">dt</span><span class="s3">.</span><span class="s1">year</span><span class="s3">),</span>
        <span class="s1">daysep</span><span class="s3">,</span>
        <span class="s4">f&quot;</span><span class="s2">{</span><span class="s1">dt</span><span class="s3">.</span><span class="s1">month</span><span class="s2">:</span><span class="s4">02</span><span class="s2">}</span><span class="s4">&quot;</span><span class="s3">,</span>
        <span class="s1">daysep</span><span class="s3">,</span>
        <span class="s4">f&quot;</span><span class="s2">{</span><span class="s1">dt</span><span class="s3">.</span><span class="s1">day</span><span class="s2">:</span><span class="s4">02</span><span class="s2">}</span><span class="s4">&quot;</span><span class="s3">,</span>
        <span class="s1">daytimesep</span><span class="s3">,</span>
        <span class="s4">f&quot;</span><span class="s2">{</span><span class="s1">dt</span><span class="s3">.</span><span class="s1">hour</span><span class="s2">:</span><span class="s4">02</span><span class="s2">}</span><span class="s4">&quot;</span><span class="s3">,</span>
        <span class="s1">timesep</span><span class="s3">,</span>
        <span class="s4">f&quot;</span><span class="s2">{</span><span class="s1">dt</span><span class="s3">.</span><span class="s1">minute</span><span class="s2">:</span><span class="s4">02</span><span class="s2">}</span><span class="s4">&quot;</span><span class="s3">,</span>
        <span class="s1">timesep</span><span class="s3">,</span>
        <span class="s4">f&quot;</span><span class="s2">{</span><span class="s1">dt</span><span class="s3">.</span><span class="s1">second</span><span class="s2">:</span><span class="s4">02</span><span class="s2">}</span><span class="s4">&quot;</span><span class="s3">,</span>
    <span class="s3">]</span>
    <span class="s2">if </span><span class="s1">millissep</span><span class="s3">:</span>
        <span class="s0"># Make sure milliseconds is &lt; 1000. Good enough for a deprecated function.</span>
        <span class="s1">millis </span><span class="s3">= </span><span class="s1">min</span><span class="s3">(</span><span class="s1">round</span><span class="s3">(</span><span class="s1">dt</span><span class="s3">.</span><span class="s1">microsecond</span><span class="s3">, -</span><span class="s5">3</span><span class="s3">) // </span><span class="s5">1000</span><span class="s3">, </span><span class="s5">999</span><span class="s3">)</span>
        <span class="s1">parts</span><span class="s3">.</span><span class="s1">extend</span><span class="s3">([</span><span class="s1">millissep</span><span class="s3">, </span><span class="s4">f&quot;</span><span class="s2">{</span><span class="s1">millis</span><span class="s2">:</span><span class="s4">03</span><span class="s2">}</span><span class="s4">&quot;</span><span class="s3">])</span>
    <span class="s2">return </span><span class="s4">&quot;&quot;</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">parts</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">timestamp_to_secs</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">, </span><span class="s1">seps</span><span class="s3">=</span><span class="s2">None</span><span class="s3">):</span>
    <span class="s6">&quot;&quot;&quot;Deprecated in Robot Framework 7.0. Will be removed in Robot Framework 8.0.&quot;&quot;&quot;</span>
    <span class="s1">warnings</span><span class="s3">.</span><span class="s1">warn</span><span class="s3">(</span>
        <span class="s4">&quot;'robot.utils.timestamp_to_secs' is deprecated and will be &quot;</span>
        <span class="s4">&quot;removed in Robot Framework 8.0. User 'parse_timestamp' instead.&quot;</span>
    <span class="s3">)</span>
    <span class="s2">try</span><span class="s3">:</span>
        <span class="s1">secs </span><span class="s3">= </span><span class="s1">_timestamp_to_millis</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">, </span><span class="s1">seps</span><span class="s3">) / </span><span class="s5">1000.0</span>
    <span class="s2">except </span><span class="s3">(</span><span class="s1">ValueError</span><span class="s3">, </span><span class="s1">OverflowError</span><span class="s3">):</span>
        <span class="s2">raise </span><span class="s1">ValueError</span><span class="s3">(</span><span class="s4">f&quot;Invalid timestamp '</span><span class="s2">{</span><span class="s1">timestamp</span><span class="s2">}</span><span class="s4">'.&quot;</span><span class="s3">)</span>
    <span class="s2">else</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">round</span><span class="s3">(</span><span class="s1">secs</span><span class="s3">, </span><span class="s5">3</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">secs_to_timestamp</span><span class="s3">(</span><span class="s1">secs</span><span class="s3">, </span><span class="s1">seps</span><span class="s3">=</span><span class="s2">None</span><span class="s3">, </span><span class="s1">millis</span><span class="s3">=</span><span class="s2">False</span><span class="s3">):</span>
    <span class="s6">&quot;&quot;&quot;Deprecated in Robot Framework 7.0. Will be removed in Robot Framework 8.0.&quot;&quot;&quot;</span>
    <span class="s1">warnings</span><span class="s3">.</span><span class="s1">warn</span><span class="s3">(</span>
        <span class="s4">&quot;'robot.utils.secs_to_timestamp' is deprecated and will be &quot;</span>
        <span class="s4">&quot;removed in Robot Framework 8.0.&quot;</span>
    <span class="s3">)</span>
    <span class="s2">if not </span><span class="s1">seps</span><span class="s3">:</span>
        <span class="s1">seps </span><span class="s3">= (</span><span class="s4">&quot;&quot;</span><span class="s3">, </span><span class="s4">&quot; &quot;</span><span class="s3">, </span><span class="s4">&quot;:&quot;</span><span class="s3">, </span><span class="s4">&quot;.&quot; </span><span class="s2">if </span><span class="s1">millis </span><span class="s2">else None</span><span class="s3">)</span>
    <span class="s1">ttuple </span><span class="s3">= </span><span class="s1">time</span><span class="s3">.</span><span class="s1">localtime</span><span class="s3">(</span><span class="s1">secs</span><span class="s3">)[:</span><span class="s5">6</span><span class="s3">]</span>
    <span class="s2">if </span><span class="s1">millis</span><span class="s3">:</span>
        <span class="s1">millis </span><span class="s3">= (</span><span class="s1">secs </span><span class="s3">- </span><span class="s1">int</span><span class="s3">(</span><span class="s1">secs</span><span class="s3">)) * </span><span class="s5">1000</span>
        <span class="s1">ttuple </span><span class="s3">= (*</span><span class="s1">ttuple</span><span class="s3">, </span><span class="s1">round</span><span class="s3">(</span><span class="s1">millis</span><span class="s3">))</span>
    <span class="s2">return </span><span class="s1">format_time</span><span class="s3">(</span><span class="s1">ttuple</span><span class="s3">, *</span><span class="s1">seps</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">get_elapsed_time</span><span class="s3">(</span><span class="s1">start_time</span><span class="s3">, </span><span class="s1">end_time</span><span class="s3">):</span>
    <span class="s6">&quot;&quot;&quot;Deprecated in Robot Framework 7.0. Will be removed in Robot Framework 8.0.&quot;&quot;&quot;</span>
    <span class="s1">warnings</span><span class="s3">.</span><span class="s1">warn</span><span class="s3">(</span>
        <span class="s4">&quot;'robot.utils.get_elapsed_time' is deprecated and will be &quot;</span>
        <span class="s4">&quot;removed in Robot Framework 8.0.&quot;</span>
    <span class="s3">)</span>
    <span class="s2">if </span><span class="s1">start_time </span><span class="s3">== </span><span class="s1">end_time </span><span class="s2">or not </span><span class="s3">(</span><span class="s1">start_time </span><span class="s2">and </span><span class="s1">end_time</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s5">0</span>
    <span class="s2">if </span><span class="s1">start_time</span><span class="s3">[:-</span><span class="s5">4</span><span class="s3">] == </span><span class="s1">end_time</span><span class="s3">[:-</span><span class="s5">4</span><span class="s3">]:</span>
        <span class="s2">return </span><span class="s1">int</span><span class="s3">(</span><span class="s1">end_time</span><span class="s3">[-</span><span class="s5">3</span><span class="s3">:]) - </span><span class="s1">int</span><span class="s3">(</span><span class="s1">start_time</span><span class="s3">[-</span><span class="s5">3</span><span class="s3">:])</span>
    <span class="s1">start_millis </span><span class="s3">= </span><span class="s1">_timestamp_to_millis</span><span class="s3">(</span><span class="s1">start_time</span><span class="s3">)</span>
    <span class="s1">end_millis </span><span class="s3">= </span><span class="s1">_timestamp_to_millis</span><span class="s3">(</span><span class="s1">end_time</span><span class="s3">)</span>
    <span class="s2">return </span><span class="s1">end_millis </span><span class="s3">- </span><span class="s1">start_millis</span>


<span class="s2">def </span><span class="s1">elapsed_time_to_string</span><span class="s3">(</span>
    <span class="s1">elapsed</span><span class="s3">: </span><span class="s4">&quot;int|float|timedelta&quot;</span><span class="s3">,</span>
    <span class="s1">include_millis</span><span class="s3">: </span><span class="s1">bool </span><span class="s3">= </span><span class="s2">True</span><span class="s3">,</span>
    <span class="s1">seconds</span><span class="s3">: </span><span class="s1">bool </span><span class="s3">= </span><span class="s2">False</span><span class="s3">,</span>
<span class="s3">):</span>
    <span class="s6">&quot;&quot;&quot;Converts elapsed time to format 'hh:mm:ss.mil'. 
 
    Elapsed time as an integer or as a float is currently considered to be 
    milliseconds, but that will be changed to seconds in Robot Framework 8.0. 
    Use ``seconds=True`` to change the behavior already now and to avoid the 
    deprecation warning. An alternative is giving the elapsed time as 
    a ``timedelta``. 
 
    If `include_millis` is True, '.mil' part is omitted. 
 
    Support for giving the elapsed time as a ``timedelta`` and the ``seconds`` 
    argument are new in Robot Framework 7.0. 
    &quot;&quot;&quot;</span>
    <span class="s0"># TODO: Change the default input to seconds in RF 8.0.</span>
    <span class="s2">if </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">elapsed</span><span class="s3">, </span><span class="s1">timedelta</span><span class="s3">):</span>
        <span class="s1">elapsed </span><span class="s3">= </span><span class="s1">elapsed</span><span class="s3">.</span><span class="s1">total_seconds</span><span class="s3">()</span>
    <span class="s2">elif not </span><span class="s1">seconds</span><span class="s3">:</span>
        <span class="s1">elapsed </span><span class="s3">/= </span><span class="s5">1000</span>
        <span class="s1">warnings</span><span class="s3">.</span><span class="s1">warn</span><span class="s3">(</span>
            <span class="s4">&quot;'robot.utils.elapsed_time_to_string' currently accepts input as &quot;</span>
            <span class="s4">&quot;milliseconds, but that will be changed to seconds in Robot Framework 8.0. &quot;</span>
            <span class="s4">&quot;Use 'seconds=True' to change the behavior already now and to avoid this &quot;</span>
            <span class="s4">&quot;warning. Alternatively pass the elapsed time as a 'timedelta'.&quot;</span>
        <span class="s3">)</span>
    <span class="s1">prefix </span><span class="s3">= </span><span class="s4">&quot;&quot;</span>
    <span class="s2">if </span><span class="s1">elapsed </span><span class="s3">&lt; </span><span class="s5">0</span><span class="s3">:</span>
        <span class="s1">prefix </span><span class="s3">= </span><span class="s4">&quot;-&quot;</span>
        <span class="s1">elapsed </span><span class="s3">= </span><span class="s1">abs</span><span class="s3">(</span><span class="s1">elapsed</span><span class="s3">)</span>
    <span class="s2">if </span><span class="s1">include_millis</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">prefix </span><span class="s3">+ </span><span class="s1">_elapsed_time_to_string_with_millis</span><span class="s3">(</span><span class="s1">elapsed</span><span class="s3">)</span>
    <span class="s2">return </span><span class="s1">prefix </span><span class="s3">+ </span><span class="s1">_elapsed_time_to_string_without_millis</span><span class="s3">(</span><span class="s1">elapsed</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">_elapsed_time_to_string_with_millis</span><span class="s3">(</span><span class="s1">elapsed</span><span class="s3">):</span>
    <span class="s1">elapsed </span><span class="s3">= </span><span class="s1">round</span><span class="s3">(</span><span class="s1">elapsed</span><span class="s3">, </span><span class="s5">3</span><span class="s3">)</span>
    <span class="s1">secs </span><span class="s3">= </span><span class="s1">int</span><span class="s3">(</span><span class="s1">elapsed</span><span class="s3">)</span>
    <span class="s1">millis </span><span class="s3">= </span><span class="s1">round</span><span class="s3">((</span><span class="s1">elapsed </span><span class="s3">- </span><span class="s1">secs</span><span class="s3">) * </span><span class="s5">1000</span><span class="s3">)</span>
    <span class="s1">mins</span><span class="s3">, </span><span class="s1">secs </span><span class="s3">= </span><span class="s1">divmod</span><span class="s3">(</span><span class="s1">secs</span><span class="s3">, </span><span class="s5">60</span><span class="s3">)</span>
    <span class="s1">hours</span><span class="s3">, </span><span class="s1">mins </span><span class="s3">= </span><span class="s1">divmod</span><span class="s3">(</span><span class="s1">mins</span><span class="s3">, </span><span class="s5">60</span><span class="s3">)</span>
    <span class="s2">return </span><span class="s4">f&quot;</span><span class="s2">{</span><span class="s1">hours</span><span class="s2">:</span><span class="s4">02</span><span class="s2">}</span><span class="s4">:</span><span class="s2">{</span><span class="s1">mins</span><span class="s2">:</span><span class="s4">02</span><span class="s2">}</span><span class="s4">:</span><span class="s2">{</span><span class="s1">secs</span><span class="s2">:</span><span class="s4">02</span><span class="s2">}</span><span class="s4">.</span><span class="s2">{</span><span class="s1">millis</span><span class="s2">:</span><span class="s4">03</span><span class="s2">}</span><span class="s4">&quot;</span>


<span class="s2">def </span><span class="s1">_elapsed_time_to_string_without_millis</span><span class="s3">(</span><span class="s1">elapsed</span><span class="s3">):</span>
    <span class="s1">secs </span><span class="s3">= </span><span class="s1">round</span><span class="s3">(</span><span class="s1">elapsed</span><span class="s3">)</span>
    <span class="s1">mins</span><span class="s3">, </span><span class="s1">secs </span><span class="s3">= </span><span class="s1">divmod</span><span class="s3">(</span><span class="s1">secs</span><span class="s3">, </span><span class="s5">60</span><span class="s3">)</span>
    <span class="s1">hours</span><span class="s3">, </span><span class="s1">mins </span><span class="s3">= </span><span class="s1">divmod</span><span class="s3">(</span><span class="s1">mins</span><span class="s3">, </span><span class="s5">60</span><span class="s3">)</span>
    <span class="s2">return </span><span class="s4">f&quot;</span><span class="s2">{</span><span class="s1">hours</span><span class="s2">:</span><span class="s4">02</span><span class="s2">}</span><span class="s4">:</span><span class="s2">{</span><span class="s1">mins</span><span class="s2">:</span><span class="s4">02</span><span class="s2">}</span><span class="s4">:</span><span class="s2">{</span><span class="s1">secs</span><span class="s2">:</span><span class="s4">02</span><span class="s2">}</span><span class="s4">&quot;</span>


<span class="s2">def </span><span class="s1">_timestamp_to_millis</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">, </span><span class="s1">seps</span><span class="s3">=</span><span class="s2">None</span><span class="s3">):</span>
    <span class="s2">if </span><span class="s1">seps</span><span class="s3">:</span>
        <span class="s1">timestamp </span><span class="s3">= </span><span class="s1">_normalize_timestamp</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">, </span><span class="s1">seps</span><span class="s3">)</span>
    <span class="s1">Y</span><span class="s3">, </span><span class="s1">M</span><span class="s3">, </span><span class="s1">D</span><span class="s3">, </span><span class="s1">h</span><span class="s3">, </span><span class="s1">m</span><span class="s3">, </span><span class="s1">s</span><span class="s3">, </span><span class="s1">millis </span><span class="s3">= </span><span class="s1">_split_timestamp</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">)</span>
    <span class="s1">secs </span><span class="s3">= </span><span class="s1">time</span><span class="s3">.</span><span class="s1">mktime</span><span class="s3">((</span><span class="s1">Y</span><span class="s3">, </span><span class="s1">M</span><span class="s3">, </span><span class="s1">D</span><span class="s3">, </span><span class="s1">h</span><span class="s3">, </span><span class="s1">m</span><span class="s3">, </span><span class="s1">s</span><span class="s3">, </span><span class="s5">0</span><span class="s3">, </span><span class="s5">0</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">))</span>
    <span class="s2">return </span><span class="s1">round</span><span class="s3">(</span><span class="s5">1000 </span><span class="s3">* </span><span class="s1">secs </span><span class="s3">+ </span><span class="s1">millis</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">_normalize_timestamp</span><span class="s3">(</span><span class="s1">ts</span><span class="s3">, </span><span class="s1">seps</span><span class="s3">):</span>
    <span class="s2">for </span><span class="s1">sep </span><span class="s2">in </span><span class="s1">seps</span><span class="s3">:</span>
        <span class="s2">if </span><span class="s1">sep </span><span class="s2">in </span><span class="s1">ts</span><span class="s3">:</span>
            <span class="s1">ts </span><span class="s3">= </span><span class="s1">ts</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s1">sep</span><span class="s3">, </span><span class="s4">&quot;&quot;</span><span class="s3">)</span>
    <span class="s1">ts </span><span class="s3">= </span><span class="s1">ts</span><span class="s3">.</span><span class="s1">ljust</span><span class="s3">(</span><span class="s5">17</span><span class="s3">, </span><span class="s4">&quot;0&quot;</span><span class="s3">)</span>
    <span class="s2">return </span><span class="s4">f&quot;</span><span class="s2">{</span><span class="s1">ts</span><span class="s3">[:</span><span class="s5">8</span><span class="s3">]</span><span class="s2">} {</span><span class="s1">ts</span><span class="s3">[</span><span class="s5">8</span><span class="s3">:</span><span class="s5">10</span><span class="s3">]</span><span class="s2">}</span><span class="s4">:</span><span class="s2">{</span><span class="s1">ts</span><span class="s3">[</span><span class="s5">10</span><span class="s3">:</span><span class="s5">12</span><span class="s3">]</span><span class="s2">}</span><span class="s4">:</span><span class="s2">{</span><span class="s1">ts</span><span class="s3">[</span><span class="s5">12</span><span class="s3">:</span><span class="s5">14</span><span class="s3">]</span><span class="s2">}</span><span class="s4">.</span><span class="s2">{</span><span class="s1">ts</span><span class="s3">[</span><span class="s5">14</span><span class="s3">:</span><span class="s5">17</span><span class="s3">]</span><span class="s2">}</span><span class="s4">&quot;</span>


<span class="s2">def </span><span class="s1">_split_timestamp</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">):</span>
    <span class="s1">years </span><span class="s3">= </span><span class="s1">int</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">[:</span><span class="s5">4</span><span class="s3">])</span>
    <span class="s1">mons </span><span class="s3">= </span><span class="s1">int</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">[</span><span class="s5">4</span><span class="s3">:</span><span class="s5">6</span><span class="s3">])</span>
    <span class="s1">days </span><span class="s3">= </span><span class="s1">int</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">[</span><span class="s5">6</span><span class="s3">:</span><span class="s5">8</span><span class="s3">])</span>
    <span class="s1">hours </span><span class="s3">= </span><span class="s1">int</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">[</span><span class="s5">9</span><span class="s3">:</span><span class="s5">11</span><span class="s3">])</span>
    <span class="s1">mins </span><span class="s3">= </span><span class="s1">int</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">[</span><span class="s5">12</span><span class="s3">:</span><span class="s5">14</span><span class="s3">])</span>
    <span class="s1">secs </span><span class="s3">= </span><span class="s1">int</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">[</span><span class="s5">15</span><span class="s3">:</span><span class="s5">17</span><span class="s3">])</span>
    <span class="s1">millis </span><span class="s3">= </span><span class="s1">int</span><span class="s3">(</span><span class="s1">timestamp</span><span class="s3">[</span><span class="s5">18</span><span class="s3">:</span><span class="s5">21</span><span class="s3">])</span>
    <span class="s2">return </span><span class="s1">years</span><span class="s3">, </span><span class="s1">mons</span><span class="s3">, </span><span class="s1">days</span><span class="s3">, </span><span class="s1">hours</span><span class="s3">, </span><span class="s1">mins</span><span class="s3">, </span><span class="s1">secs</span><span class="s3">, </span><span class="s1">millis</span>
</pre>
</body>
</html>