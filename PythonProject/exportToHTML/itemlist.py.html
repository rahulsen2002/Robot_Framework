<html>
<head>
<title>itemlist.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #7a7e85;}
.s1 { color: #bcbec4;}
.s2 { color: #cf8e6d;}
.s3 { color: #bcbec4;}
.s4 { color: #6aab73;}
.s5 { color: #5f826b; font-style: italic;}
.s6 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
itemlist.py</font>
</center></td></tr></table>
<pre><span class="s0">#  Copyright 2008-2015 Nokia Networks</span>
<span class="s0">#  Copyright 2016-     Robot Framework Foundation</span>
<span class="s0">#</span>
<span class="s0">#  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="s0">#  you may not use this file except in compliance with the License.</span>
<span class="s0">#  You may obtain a copy of the License at</span>
<span class="s0">#</span>
<span class="s0">#      http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="s0">#</span>
<span class="s0">#  Unless required by applicable law or agreed to in writing, software</span>
<span class="s0">#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="s0">#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="s0">#  See the License for the specific language governing permissions and</span>
<span class="s0">#  limitations under the License.</span>

<span class="s2">from </span><span class="s1">functools </span><span class="s2">import </span><span class="s1">total_ordering</span>
<span class="s2">from </span><span class="s1">typing </span><span class="s2">import </span><span class="s3">(</span>
    <span class="s1">Any</span><span class="s3">, </span><span class="s1">Iterable</span><span class="s3">, </span><span class="s1">Iterator</span><span class="s3">, </span><span class="s1">MutableSequence</span><span class="s3">, </span><span class="s1">overload</span><span class="s3">, </span><span class="s1">Type</span><span class="s3">, </span><span class="s1">TYPE_CHECKING</span><span class="s3">, </span><span class="s1">TypeVar</span>
<span class="s3">)</span>

<span class="s2">from </span><span class="s1">robot</span><span class="s3">.</span><span class="s1">utils </span><span class="s2">import </span><span class="s1">copy_signature</span><span class="s3">, </span><span class="s1">KnownAtRuntime</span>

<span class="s2">from </span><span class="s3">.</span><span class="s1">modelobject </span><span class="s2">import </span><span class="s1">DataDict</span><span class="s3">, </span><span class="s1">full_name</span><span class="s3">, </span><span class="s1">ModelObject</span>

<span class="s2">if </span><span class="s1">TYPE_CHECKING</span><span class="s3">:</span>
    <span class="s2">from </span><span class="s3">.</span><span class="s1">visitor </span><span class="s2">import </span><span class="s1">SuiteVisitor</span>


<span class="s1">T </span><span class="s3">= </span><span class="s1">TypeVar</span><span class="s3">(</span><span class="s4">&quot;T&quot;</span><span class="s3">)</span>
<span class="s1">Self </span><span class="s3">= </span><span class="s1">TypeVar</span><span class="s3">(</span><span class="s4">&quot;Self&quot;</span><span class="s3">, </span><span class="s1">bound</span><span class="s3">=</span><span class="s4">&quot;ItemList&quot;</span><span class="s3">)</span>


<span class="s3">@</span><span class="s1">total_ordering</span>
<span class="s2">class </span><span class="s1">ItemList</span><span class="s3">(</span><span class="s1">MutableSequence</span><span class="s3">[</span><span class="s1">T</span><span class="s3">]):</span>
    <span class="s5">&quot;&quot;&quot;List of items of a certain enforced type. 
 
    New items can be created using the :meth:`create` method and existing items 
    added using the common list methods like :meth:`append` or :meth:`insert`. 
    In addition to the common type, items can have certain common and 
    automatically assigned attributes. 
 
    Starting from Robot Framework 6.1, items can be added as dictionaries and 
    actual items are generated based on them automatically. If the type has 
    a ``from_dict`` class method, it is used, and otherwise dictionary data is 
    passed to the type as keyword arguments. 
    &quot;&quot;&quot;</span>

    <span class="s0"># TypeVar T needs to be applied to a variable to be compatible with @copy_signature</span>
    <span class="s1">item_type</span><span class="s3">: </span><span class="s1">Type</span><span class="s3">[</span><span class="s1">T</span><span class="s3">] = </span><span class="s1">KnownAtRuntime</span>
    <span class="s1">__slots__ </span><span class="s3">= (</span><span class="s4">&quot;_item_class&quot;</span><span class="s3">, </span><span class="s4">&quot;_common_attrs&quot;</span><span class="s3">, </span><span class="s4">&quot;_items&quot;</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__init__</span><span class="s3">(</span>
        <span class="s1">self</span><span class="s3">,</span>
        <span class="s1">item_class</span><span class="s3">: </span><span class="s1">Type</span><span class="s3">[</span><span class="s1">T</span><span class="s3">],</span>
        <span class="s1">common_attrs</span><span class="s3">: </span><span class="s4">&quot;dict[str, Any]|None&quot; </span><span class="s3">= </span><span class="s2">None</span><span class="s3">,</span>
        <span class="s1">items</span><span class="s3">: </span><span class="s4">&quot;Iterable[T|DataDict]&quot; </span><span class="s3">= (),</span>
    <span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_item_class </span><span class="s3">= </span><span class="s1">item_class</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_common_attrs </span><span class="s3">= </span><span class="s1">common_attrs</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">: </span><span class="s4">&quot;list[T]&quot; </span><span class="s3">= []</span>
        <span class="s2">if </span><span class="s1">items</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">extend</span><span class="s3">(</span><span class="s1">items</span><span class="s3">)</span>

    <span class="s3">@</span><span class="s1">copy_signature</span><span class="s3">(</span><span class="s1">item_type</span><span class="s3">)</span>
    <span class="s2">def </span><span class="s1">create</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, *</span><span class="s1">args</span><span class="s3">, **</span><span class="s1">kwargs</span><span class="s3">) </span><span class="s1">-&gt; T</span><span class="s3">:</span>
        <span class="s5">&quot;&quot;&quot;Create a new item using the provided arguments.&quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">append</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_item_class</span><span class="s3">(*</span><span class="s1">args</span><span class="s3">, **</span><span class="s1">kwargs</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">append</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">item</span><span class="s3">: </span><span class="s4">&quot;T|DataDict&quot;</span><span class="s3">) </span><span class="s1">-&gt; T</span><span class="s3">:</span>
        <span class="s1">item </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_check_type_and_set_attrs</span><span class="s3">(</span><span class="s1">item</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">.</span><span class="s1">append</span><span class="s3">(</span><span class="s1">item</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">item</span>

    <span class="s2">def </span><span class="s1">_check_type_and_set_attrs</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">item</span><span class="s3">: </span><span class="s4">&quot;T|DataDict&quot;</span><span class="s3">) </span><span class="s1">-&gt; T</span><span class="s3">:</span>
        <span class="s2">if not </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">item</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_item_class</span><span class="s3">):</span>
            <span class="s2">if </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">item</span><span class="s3">, </span><span class="s1">dict</span><span class="s3">):</span>
                <span class="s1">item </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_item_from_dict</span><span class="s3">(</span><span class="s1">item</span><span class="s3">)</span>
            <span class="s2">else</span><span class="s3">:</span>
                <span class="s2">raise </span><span class="s1">TypeError</span><span class="s3">(</span>
                    <span class="s4">f&quot;Only '</span><span class="s2">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_type_name</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_item_class</span><span class="s3">)</span><span class="s2">}</span><span class="s4">' objects accepted, &quot;</span>
                    <span class="s4">f&quot;got '</span><span class="s2">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_type_name</span><span class="s3">(</span><span class="s1">item</span><span class="s3">)</span><span class="s2">}</span><span class="s4">'.&quot;</span>
                <span class="s3">)</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_common_attrs</span><span class="s3">:</span>
            <span class="s2">for </span><span class="s1">attr</span><span class="s3">, </span><span class="s1">value </span><span class="s2">in </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_common_attrs</span><span class="s3">.</span><span class="s1">items</span><span class="s3">():</span>
                <span class="s1">setattr</span><span class="s3">(</span><span class="s1">item</span><span class="s3">, </span><span class="s1">attr</span><span class="s3">, </span><span class="s1">value</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">item</span>

    <span class="s2">def </span><span class="s1">_type_name</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">item</span><span class="s3">: </span><span class="s4">&quot;type|object&quot;</span><span class="s3">) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s1">typ </span><span class="s3">= </span><span class="s1">item </span><span class="s2">if </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">item</span><span class="s3">, </span><span class="s1">type</span><span class="s3">) </span><span class="s2">else </span><span class="s1">type</span><span class="s3">(</span><span class="s1">item</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">full_name</span><span class="s3">(</span><span class="s1">typ</span><span class="s3">) </span><span class="s2">if </span><span class="s1">issubclass</span><span class="s3">(</span><span class="s1">typ</span><span class="s3">, </span><span class="s1">ModelObject</span><span class="s3">) </span><span class="s2">else </span><span class="s1">typ</span><span class="s3">.</span><span class="s1">__name__</span>

    <span class="s2">def </span><span class="s1">_item_from_dict</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">data</span><span class="s3">: </span><span class="s1">DataDict</span><span class="s3">) </span><span class="s1">-&gt; T</span><span class="s3">:</span>
        <span class="s2">if </span><span class="s1">hasattr</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_item_class</span><span class="s3">, </span><span class="s4">&quot;from_dict&quot;</span><span class="s3">):</span>
            <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_item_class</span><span class="s3">.</span><span class="s1">from_dict</span><span class="s3">(</span><span class="s1">data</span><span class="s3">)  </span><span class="s0"># type: ignore</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_item_class</span><span class="s3">(**</span><span class="s1">data</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">extend</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">items</span><span class="s3">: </span><span class="s4">&quot;Iterable[T|DataDict]&quot;</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">.</span><span class="s1">extend</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_check_type_and_set_attrs</span><span class="s3">(</span><span class="s1">i</span><span class="s3">) </span><span class="s2">for </span><span class="s1">i </span><span class="s2">in </span><span class="s1">items</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">insert</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">index</span><span class="s3">: </span><span class="s1">int</span><span class="s3">, </span><span class="s1">item</span><span class="s3">: </span><span class="s4">&quot;T|DataDict&quot;</span><span class="s3">):</span>
        <span class="s1">item </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_check_type_and_set_attrs</span><span class="s3">(</span><span class="s1">item</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">.</span><span class="s1">insert</span><span class="s3">(</span><span class="s1">index</span><span class="s3">, </span><span class="s1">item</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">index</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">item</span><span class="s3">: </span><span class="s1">T</span><span class="s3">, *</span><span class="s1">start_and_end</span><span class="s3">) </span><span class="s1">-&gt; int</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">.</span><span class="s1">index</span><span class="s3">(</span><span class="s1">item</span><span class="s3">, *</span><span class="s1">start_and_end</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">clear</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_items </span><span class="s3">= []</span>

    <span class="s2">def </span><span class="s1">visit</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">visitor</span><span class="s3">: </span><span class="s4">&quot;SuiteVisitor&quot;</span><span class="s3">):</span>
        <span class="s2">for </span><span class="s1">item </span><span class="s2">in </span><span class="s1">self</span><span class="s3">:</span>
            <span class="s1">item</span><span class="s3">.</span><span class="s1">visit</span><span class="s3">(</span><span class="s1">visitor</span><span class="s3">)  </span><span class="s0"># type: ignore</span>

    <span class="s2">def </span><span class="s1">__iter__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; Iterator</span><span class="s3">[</span><span class="s1">T</span><span class="s3">]:</span>
        <span class="s1">index </span><span class="s3">= </span><span class="s6">0</span>
        <span class="s2">while </span><span class="s1">index </span><span class="s3">&lt; </span><span class="s1">len</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">):</span>
            <span class="s2">yield </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">[</span><span class="s1">index</span><span class="s3">]</span>
            <span class="s1">index </span><span class="s3">+= </span><span class="s6">1</span>

    <span class="s3">@</span><span class="s1">overload</span>
    <span class="s2">def </span><span class="s1">__getitem__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">index</span><span class="s3">: </span><span class="s1">int</span><span class="s3">, /) </span><span class="s1">-&gt; T</span><span class="s3">: ...</span>

    <span class="s3">@</span><span class="s1">overload</span>
    <span class="s2">def </span><span class="s1">__getitem__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">: </span><span class="s1">Self</span><span class="s3">, </span><span class="s1">index</span><span class="s3">: </span><span class="s1">slice</span><span class="s3">, /) </span><span class="s1">-&gt; Self</span><span class="s3">: ...</span>

    <span class="s2">def </span><span class="s1">__getitem__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">: </span><span class="s1">Self</span><span class="s3">, </span><span class="s1">index</span><span class="s3">: </span><span class="s4">&quot;int|slice&quot;</span><span class="s3">, /) </span><span class="s1">-&gt; </span><span class="s4">&quot;T|Self&quot;</span><span class="s3">:</span>
        <span class="s2">if </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">index</span><span class="s3">, </span><span class="s1">slice</span><span class="s3">):</span>
            <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_create_new_from</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">[</span><span class="s1">index</span><span class="s3">])</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">[</span><span class="s1">index</span><span class="s3">]</span>

    <span class="s2">def </span><span class="s1">_create_new_from</span><span class="s3">(</span><span class="s1">self</span><span class="s3">: </span><span class="s1">Self</span><span class="s3">, </span><span class="s1">items</span><span class="s3">: </span><span class="s1">Iterable</span><span class="s3">[</span><span class="s1">T</span><span class="s3">]) </span><span class="s1">-&gt; Self</span><span class="s3">:</span>
        <span class="s0"># Cannot pass common_attrs directly to new object because all</span>
        <span class="s0"># subclasses don't have compatible __init__.</span>
        <span class="s1">new </span><span class="s3">= </span><span class="s1">type</span><span class="s3">(</span><span class="s1">self</span><span class="s3">)(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_item_class</span><span class="s3">)</span>
        <span class="s1">new</span><span class="s3">.</span><span class="s1">_common_attrs </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_common_attrs</span>
        <span class="s1">new</span><span class="s3">.</span><span class="s1">extend</span><span class="s3">(</span><span class="s1">items</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">new</span>

    <span class="s3">@</span><span class="s1">overload</span>
    <span class="s2">def </span><span class="s1">__setitem__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">index</span><span class="s3">: </span><span class="s1">int</span><span class="s3">, </span><span class="s1">item</span><span class="s3">: </span><span class="s4">&quot;T|DataDict&quot;</span><span class="s3">, /): ...</span>

    <span class="s3">@</span><span class="s1">overload</span>
    <span class="s2">def </span><span class="s1">__setitem__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">index</span><span class="s3">: </span><span class="s1">slice</span><span class="s3">, </span><span class="s1">items</span><span class="s3">: </span><span class="s4">&quot;Iterable[T|DataDict]&quot;</span><span class="s3">, /): ...</span>

    <span class="s2">def </span><span class="s1">__setitem__</span><span class="s3">(</span>
        <span class="s1">self</span><span class="s3">, </span><span class="s1">index</span><span class="s3">: </span><span class="s4">&quot;int|slice&quot;</span><span class="s3">, </span><span class="s1">item</span><span class="s3">: </span><span class="s4">&quot;T|DataDict|Iterable[T|DataDict]&quot;</span><span class="s3">, /</span>
    <span class="s3">):</span>
        <span class="s2">if </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">index</span><span class="s3">, </span><span class="s1">slice</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">[</span><span class="s1">index</span><span class="s3">] = [</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_check_type_and_set_attrs</span><span class="s3">(</span><span class="s1">i</span><span class="s3">) </span><span class="s2">for </span><span class="s1">i </span><span class="s2">in </span><span class="s1">item</span><span class="s3">]</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">[</span><span class="s1">index</span><span class="s3">] = </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_check_type_and_set_attrs</span><span class="s3">(</span><span class="s1">item</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__delitem__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">index</span><span class="s3">: </span><span class="s4">&quot;int|slice&quot;</span><span class="s3">, /):</span>
        <span class="s2">del </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">[</span><span class="s1">index</span><span class="s3">]</span>

    <span class="s2">def </span><span class="s1">__contains__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">item</span><span class="s3">: </span><span class="s1">Any</span><span class="s3">, /) </span><span class="s1">-&gt; bool</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">item </span><span class="s2">in </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span>

    <span class="s2">def </span><span class="s1">__len__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; int</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">len</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__str__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">str</span><span class="s3">(</span><span class="s1">list</span><span class="s3">(</span><span class="s1">self</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__repr__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s1">class_name </span><span class="s3">= </span><span class="s1">type</span><span class="s3">(</span><span class="s1">self</span><span class="s3">).</span><span class="s1">__name__</span>
        <span class="s1">item_name </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_item_class</span><span class="s3">.</span><span class="s1">__name__</span>
        <span class="s2">return </span><span class="s4">f&quot;</span><span class="s2">{</span><span class="s1">class_name</span><span class="s2">}</span><span class="s4">(item_class=</span><span class="s2">{</span><span class="s1">item_name</span><span class="s2">}</span><span class="s4">, items=</span><span class="s2">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s2">}</span><span class="s4">)&quot;</span>

    <span class="s2">def </span><span class="s1">count</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">item</span><span class="s3">: </span><span class="s1">T</span><span class="s3">) </span><span class="s1">-&gt; int</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">.</span><span class="s1">count</span><span class="s3">(</span><span class="s1">item</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">sort</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, **</span><span class="s1">config</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">.</span><span class="s1">sort</span><span class="s3">(**</span><span class="s1">config</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">reverse</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">.</span><span class="s1">reverse</span><span class="s3">()</span>

    <span class="s2">def </span><span class="s1">__reversed__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; Iterator</span><span class="s3">[</span><span class="s1">T</span><span class="s3">]:</span>
        <span class="s1">index </span><span class="s3">= </span><span class="s6">0</span>
        <span class="s2">while </span><span class="s1">index </span><span class="s3">&lt; </span><span class="s1">len</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">):</span>
            <span class="s2">yield </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">[</span><span class="s1">len</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">) - </span><span class="s1">index </span><span class="s3">- </span><span class="s6">1</span><span class="s3">]</span>
            <span class="s1">index </span><span class="s3">+= </span><span class="s6">1</span>

    <span class="s2">def </span><span class="s1">__eq__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">: </span><span class="s1">object</span><span class="s3">) </span><span class="s1">-&gt; bool</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s3">(</span>
            <span class="s1">isinstance</span><span class="s3">(</span><span class="s1">other</span><span class="s3">, </span><span class="s1">ItemList</span><span class="s3">)</span>
            <span class="s2">and </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_is_compatible</span><span class="s3">(</span><span class="s1">other</span><span class="s3">)</span>
            <span class="s2">and </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items </span><span class="s3">== </span><span class="s1">other</span><span class="s3">.</span><span class="s1">_items</span>
        <span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_is_compatible</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">) </span><span class="s1">-&gt; bool</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s3">(</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_item_class </span><span class="s2">is </span><span class="s1">other</span><span class="s3">.</span><span class="s1">_item_class</span>
            <span class="s2">and </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_common_attrs </span><span class="s3">== </span><span class="s1">other</span><span class="s3">.</span><span class="s1">_common_attrs</span>
        <span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__lt__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">: </span><span class="s4">&quot;ItemList[T]&quot;</span><span class="s3">) </span><span class="s1">-&gt; bool</span><span class="s3">:</span>
        <span class="s2">if not </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">other</span><span class="s3">, </span><span class="s1">ItemList</span><span class="s3">):</span>
            <span class="s2">raise </span><span class="s1">TypeError</span><span class="s3">(</span><span class="s4">f&quot;Cannot order 'ItemList' and '</span><span class="s2">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_type_name</span><span class="s3">(</span><span class="s1">other</span><span class="s3">)</span><span class="s2">}</span><span class="s4">'.&quot;</span><span class="s3">)</span>
        <span class="s2">if not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_is_compatible</span><span class="s3">(</span><span class="s1">other</span><span class="s3">):</span>
            <span class="s2">raise </span><span class="s1">TypeError</span><span class="s3">(</span><span class="s4">&quot;Cannot order incompatible 'ItemList' objects.&quot;</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items </span><span class="s3">&lt; </span><span class="s1">other</span><span class="s3">.</span><span class="s1">_items</span>

    <span class="s2">def </span><span class="s1">__add__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">: </span><span class="s1">Self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">: </span><span class="s4">&quot;ItemList[T]&quot;</span><span class="s3">) </span><span class="s1">-&gt; Self</span><span class="s3">:</span>
        <span class="s2">if not </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">other</span><span class="s3">, </span><span class="s1">ItemList</span><span class="s3">):</span>
            <span class="s2">raise </span><span class="s1">TypeError</span><span class="s3">(</span><span class="s4">f&quot;Cannot add 'ItemList' and '</span><span class="s2">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_type_name</span><span class="s3">(</span><span class="s1">other</span><span class="s3">)</span><span class="s2">}</span><span class="s4">'.&quot;</span><span class="s3">)</span>
        <span class="s2">if not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_is_compatible</span><span class="s3">(</span><span class="s1">other</span><span class="s3">):</span>
            <span class="s2">raise </span><span class="s1">TypeError</span><span class="s3">(</span><span class="s4">&quot;Cannot add incompatible 'ItemList' objects.&quot;</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_create_new_from</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items </span><span class="s3">+ </span><span class="s1">other</span><span class="s3">.</span><span class="s1">_items</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__iadd__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">: </span><span class="s1">Self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">: </span><span class="s1">Iterable</span><span class="s3">[</span><span class="s1">T</span><span class="s3">]) </span><span class="s1">-&gt; Self</span><span class="s3">:</span>
        <span class="s2">if </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">other</span><span class="s3">, </span><span class="s1">ItemList</span><span class="s3">) </span><span class="s2">and not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_is_compatible</span><span class="s3">(</span><span class="s1">other</span><span class="s3">):</span>
            <span class="s2">raise </span><span class="s1">TypeError</span><span class="s3">(</span><span class="s4">&quot;Cannot add incompatible 'ItemList' objects.&quot;</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">extend</span><span class="s3">(</span><span class="s1">other</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span>

    <span class="s2">def </span><span class="s1">__mul__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">: </span><span class="s1">Self</span><span class="s3">, </span><span class="s1">count</span><span class="s3">: </span><span class="s1">int</span><span class="s3">) </span><span class="s1">-&gt; Self</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_create_new_from</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_items </span><span class="s3">* </span><span class="s1">count</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__imul__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">: </span><span class="s1">Self</span><span class="s3">, </span><span class="s1">count</span><span class="s3">: </span><span class="s1">int</span><span class="s3">) </span><span class="s1">-&gt; Self</span><span class="s3">:</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_items </span><span class="s3">*= </span><span class="s1">count</span>
        <span class="s2">return </span><span class="s1">self</span>

    <span class="s2">def </span><span class="s1">__rmul__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">: </span><span class="s1">Self</span><span class="s3">, </span><span class="s1">count</span><span class="s3">: </span><span class="s1">int</span><span class="s3">) </span><span class="s1">-&gt; Self</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">self </span><span class="s3">* </span><span class="s1">count</span>

    <span class="s2">def </span><span class="s1">to_dicts</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; </span><span class="s4">&quot;list[DataDict]&quot;</span><span class="s3">:</span>
        <span class="s5">&quot;&quot;&quot;Return list of items converted to dictionaries. 
 
        Items are converted to dictionaries using the ``to_dict`` method, if 
        they have it, or the built-in ``vars()``. 
 
        New in Robot Framework 6.1. 
        &quot;&quot;&quot;</span>
        <span class="s2">if not </span><span class="s1">hasattr</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_item_class</span><span class="s3">, </span><span class="s4">&quot;to_dict&quot;</span><span class="s3">):</span>
            <span class="s2">return </span><span class="s3">[</span><span class="s1">vars</span><span class="s3">(</span><span class="s1">item</span><span class="s3">) </span><span class="s2">for </span><span class="s1">item </span><span class="s2">in </span><span class="s1">self</span><span class="s3">]</span>
        <span class="s2">return </span><span class="s3">[</span><span class="s1">item</span><span class="s3">.</span><span class="s1">to_dict</span><span class="s3">() </span><span class="s2">for </span><span class="s1">item </span><span class="s2">in </span><span class="s1">self</span><span class="s3">]  </span><span class="s0"># type: ignore</span>
</pre>
</body>
</html>